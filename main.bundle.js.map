{"version":3,"sources":["./src/$_lazy_route_resource lazy","./src/app/app.component.css","./src/app/app.component.html","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/natural.js","./src/app/player/audio/audio.component.css","./src/app/player/audio/audio.component.html","./src/app/player/audio/audio.component.ts","./src/app/player/lyrics/lyrics.component.css","./src/app/player/lyrics/lyrics.component.html","./src/app/player/lyrics/lyrics.component.ts","./src/app/player/lyrics/particles.ts","./src/app/player/player.component.css","./src/app/player/player.component.html","./src/app/player/player.component.ts","./src/app/player/player.service.ts","./src/app/player/points/points.component.css","./src/app/player/points/points.component.html","./src/app/player/points/points.component.ts","./src/app/player/speech/recognition.service.ts","./src/app/player/speech/speech.component.css","./src/app/player/speech/speech.component.html","./src/app/player/speech/speech.component.ts","./src/app/song-selection/song-selection.component.css","./src/app/song-selection/song-selection.component.html","./src/app/song-selection/song-selection.component.ts","./src/app/songs/songs.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;ACVA,wBAAwB,kBAAkB,uBAAuB,qBAAqB,yBAAyB,gBAAgB,gBAAgB,KAAK,kBAAkB,wBAAwB,KAAK,mDAAmD,gBAAgB,6BAA6B,OAAO,KAAK,sBAAsB,qBAAqB,mBAAmB,uBAAuB,kBAAkB,KAAK,mBAAmB,2BAA2B,2BAA2B,oBAAoB,mCAAmC,oCAAoC,qCAAqC,qCAAqC,0BAA0B,+BAA+B,2BAA2B,0BAA0B,yBAAyB,KAAK,4BAA4B,6BAA6B,yBAAyB,SAAS,2BAA2B,0BAA0B,+BAA+B,2BAA2B,2BAA2B,2BAA2B,oBAAoB,KAAK,yBAAyB,uBAAuB,mBAAmB,mBAAmB,sBAAsB,sBAAsB,uBAAuB,qBAAqB,qBAAqB,+CAA+C,KAAK,+BAA+B,gCAAgC,KAAK,K;;;;;;;ACAz2C,guB;;;;;;;;;;;;;;;;;;;;;;ACAwF;AACnC;AAElC;AAQnB;IAKE,sBAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QAHhC,aAAQ,GAAW,EAAE,CAAC;QAI3B,OAAO,CAAC,GAAG,CAAI,cAAY,CAAC,IAAI,WAAQ,CAAC,CAAC;IAC5C,CAAC;qBAPU,YAAY;IASvB,+BAAQ,GAAR;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;IAC3C,CAAC;IAEM,uCAAgB,GAAvB,UAAwB,IAAU;QAChC,OAAO,CAAC,GAAG,CAAI,cAAY,CAAC,IAAI,+BAA4B,EAAE,IAAI,CAAC,CAAC;QACpE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC;IAEM,6CAAsB,GAA7B;QACE,OAAO,CAAC,GAAG,CAAI,cAAY,CAAC,IAAI,6BAA0B,CAAC,CAAC;QAC5D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC;IArBU,YAAY;QANxB,wEAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCAO2B,0EAAY;OAL5B,YAAY,CAsBxB;IAAD,mBAAC;;CAAA;AAtBwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXiC;AACjB;AACE;AACI;AACa;AACJ;AACQ;AACG;AACd;AACc;AACM;AACU;AAChB;AAuBnE;IAAA;IAAyB,CAAC;IAAb,SAAS;QArBrB,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,oEAAY;gBACZ,iFAAe;gBACf,qFAAc;gBACd,wFAAe;gBACf,wFAAe;gBACf,yGAAsB;gBACtB,yFAAe;aAChB;YACD,OAAO,EAAE;gBACP,gFAAa;gBACb,iEAAU;aACX;YACD,SAAS,EAAE;gBACT,6EAAa;gBACb,0EAAY;gBACZ,+FAAkB;aACnB;YACD,SAAS,EAAE,CAAC,oEAAY,CAAC;SAC1B,CAAC;OACW,SAAS,CAAI;IAAD,gBAAC;CAAA;AAAJ;;;;;;;;ACnCtB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,+BAA+B;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD,oFAAoF;AACpF;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,MAAM;AACd;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,8BAA8B;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,CAAC;;AAED,oGAAoG;;AAEpG;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC;;AAED,kFAAkF,0CAA0C;;AAE5H,wHAAwH,kBAAkB,mBAAmB;;AAE7J,oHAAoH;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;;AAED,iHAAiH;AACjH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,kHAAkH;AAClH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,CAAC;;AAED,8GAA8G;AAC9G;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,mHAAmH;AACnH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,mBAAmB;AACnB;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,eAAe;AACf;AACA,eAAe;AACf;AACA,eAAe;AACf;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED,uHAAuH;AACvH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,yBAAyB;AACzC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,gHAAgH;AAChH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,+HAA+H;AAC/H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED,oHAAoH;AACpH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED,oFAAoF;;AAEpF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gBAAgB,KAAK;AACrB;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED,sFAAsF;;AAEtF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED,mHAAmH;AACnH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,iHAAiH;AACjH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,kIAAkI;AAClI;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF,wHAAwH;AACxH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED,2HAA2H;AAC3H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,qHAAqH,kBAAkB,wBAAwB;;AAE/J,sHAAsH;AACtH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,yBAAyB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,mCAAmC,OAAO;AAC1C;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,oCAAoC,mBAAmB,EAAE;AACzD;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,8CAA8C,mCAAmC;AACjF,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,6CAA6C,mCAAmC;AAChF,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,0DAA0D,iBAAiB;AAC3E;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,0DAA0D,iBAAiB;AAC3E;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,gBAAgB,EAAE;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,gCAAgC,EAAE;AAC3E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,8BAA8B,EAAE;AAC3D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,+BAA+B,EAAE;AAChE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC,2BAA2B,EAAE;AACpE;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,mDAAmD;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;;AAEA;AACA;AACA,yCAAyC,sBAAsB,sBAAsB,wBAAwB,wBAAwB,wBAAwB;AAC7J;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB,2BAA2B;AAC3C,KAAK,OAAO;;AAEZ;AACA,gDAAgD,EAAE,iBAAiB;;AAEnE,uBAAuB;AACvB,0BAA0B,+CAA+C;AACzE,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE;AACpE,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,qBAAqB;;AAElD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC;AACD,CAAC;;AAED,kIAAkI;AAClI;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;AAED,yHAAyH;AACzH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED,oIAAoI;AACpI;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,kBAAkB;AAClC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;AAED,mHAAmH;AACnH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,iIAAiI;AACjI;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED,0HAA0H;AAC1H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;AAED,2GAA2G;AAC3G;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG,GAAG,WAAW;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA,YAAY,uCAAuC;AACnD;;AAEA,oCAAoC,2BAA2B;AAC/D;;AAEA;AACA;;AAEA,gBAAgB,2BAA2B;AAC3C;;AAEA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,kFAAkF;AAClF,CAAC;;AAED,2HAA2H;AAC3H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,2CAA2C;AAClE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,6BAA6B;AAC9C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,uDAAuD;AACjG;;AAEA;AACA,0CAA0C,uDAAuD;AACjG;;AAEA;AACA,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0CAA0C,eAAe;AACzD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,GAAG;AACH;AACA,mDAAmD;AACnD,kFAAkF;AAClF,kFAAkF;AAClF;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,CAAC;;AAED,6GAA6G;AAC7G;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,iBAAiB,WAAW;AAC5B;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED,8HAA8H;AAC9H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,YAAY;;AAEZ;AACA,gCAAgC;AAChC;;AAEA;AACA,iBAAiB,eAAe;AAChC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,gBAAgB,eAAe;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED,6HAA6H;AAC7H;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAC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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/$$_lazy_route_resource lazy\n// module id = ./src/$$_lazy_route_resource lazy recursive\n// module chunks = main","module.exports = \".app {\\r\\n  width: 100%;\\r\\n  max-width: 700px;\\r\\n  margin: 0 auto;\\r\\n  position: absolute;\\r\\n  left: 27%;\\r\\n  top: 50px;\\r\\n}\\r\\n\\r\\n.app-nav {\\r\\n  padding: 0 0 2rem;\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 480px) {\\r\\n  .app-nav {\\r\\n    padding: 0 2rem 2rem;\\r\\n  }\\r\\n}\\r\\n\\r\\n.app-nav-img {\\r\\n  display: block;\\r\\n  margin: auto;\\r\\n  max-width: 400px;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.app-body {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: column;\\r\\n          flex-direction: column;\\r\\n  -webkit-box-flex: 1;\\r\\n      -ms-flex-positive: 1;\\r\\n          flex-grow: 1;\\r\\n  background: #f5f5f5;\\r\\n  border-radius: 5px;\\r\\n}\\r\\n\\r\\n.app-body-songlist {\\r\\n  background-color: #fff;\\r\\n  border-radius: 5px;\\r\\n\\r\\n}\\r\\n\\r\\n.app-body-content {\\r\\n  -webkit-box-flex: 1;\\r\\n      -ms-flex-positive: 1;\\r\\n          flex-grow: 1;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.app-backbutton {\\r\\n  background: none;\\r\\n  border: none;\\r\\n  color: white;\\r\\n  cursor: pointer;\\r\\n  font-size: 22px;\\r\\n  font-weight: 100;\\r\\n  margin: 1rem 0;\\r\\n  padding: .5rem;\\r\\n  text-shadow: 0 1px 2px rgba(0, 0, 0, .5);\\r\\n}\\r\\n\\r\\n.app-backbutton:focus {\\r\\n  outline: 1px dotted white;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = ./src/app/app.component.css\n// module chunks = main","module.exports = \"<div class=\\\"app\\\">\\r\\n  <div class=\\\"p1\\\">\\r\\n    <div class=\\\"app-nav\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"app-body\\\">\\r\\n      <div class=\\\"app-body-content\\\" *ngIf=\\\"currentSong\\\">\\r\\n        <app-player [currentSong]=\\\"currentSong\\\">\\r\\n        </app-player>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"app-body-songlist p1\\\" *ngIf=\\\"!currentSong\\\">\\r\\n        <app-song-selection [songList]=\\\"songList\\\" [currentSong]=\\\"currentSong\\\" (onChooseSong)=\\\"handleChooseSong($event)\\\"></app-song-selection>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <button class=\\\"app-backbutton\\\" *ngIf=\\\"currentSong\\\" (click)=\\\"handleClearCurrentSong()\\\">\\r\\n      ← Back to list of songs\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = ./src/app/app.component.html\n// module chunks = main","import { Component, ViewChild, ElementRef, AfterViewInit, OnInit } from '@angular/core';\r\nimport { SongsService } from './songs/songs.service';\r\nimport { Song } from './songs/song.interface';\r\nimport './natural';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\n\r\nexport class AppComponent implements OnInit {\r\n\r\n  public songList: Song[] = [];\r\n  public currentSong: Song;\r\n\r\n  constructor(private Songs: SongsService) {\r\n    console.log(`${AppComponent.name}::ctor`);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.songList = this.Songs.getSongList();\r\n  }\r\n\r\n  public handleChooseSong(song: Song) {\r\n    console.log(`${AppComponent.name}::handleChooseSong song %o`, song);\r\n    this.currentSong = song;\r\n  }\r\n\r\n  public handleClearCurrentSong() {\r\n    console.log(`${AppComponent.name}::handleClearCurrentSong`);\r\n    this.currentSong = null;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HttpModule } from '@angular/http';\r\nimport { AppComponent } from './app.component';\r\nimport { PlayerComponent } from './player/player.component';\r\nimport { PlayerService } from './player/player.service';\r\nimport { AudioComponent } from './player/audio/audio.component';\r\nimport { LyricsComponent } from './player/lyrics/lyrics.component';\r\nimport { SongsService } from './songs/songs.service';\r\nimport { SpeechComponent } from './player/speech/speech.component';\r\nimport { RecognitionService } from './player/speech/recognition.service';\r\nimport { SongSelectionComponent } from './song-selection/song-selection.component';\r\nimport { PointsComponent } from './player/points/points.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    PlayerComponent,\r\n    AudioComponent,\r\n    LyricsComponent,\r\n    SpeechComponent,\r\n    SongSelectionComponent,\r\n    PointsComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpModule\r\n  ],\r\n  providers: [\r\n    PlayerService,\r\n    SongsService,\r\n    RecognitionService\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","(function(){var require = function (file, cwd) {\r\n  var resolved = require.resolve(file, cwd || '/');\r\n  var mod = require.modules[resolved];\r\n  if (!mod) throw new Error(\r\n      'Failed to resolve module ' + file + ', tried ' + resolved\r\n  );\r\n  var cached = require.cache[resolved];\r\n  var res = cached? cached.exports : mod();\r\n  return res;\r\n};\r\n\r\nrequire.paths = [];\r\nrequire.modules = {};\r\nrequire.cache = {};\r\nrequire.extensions = [\".js\",\".coffee\"];\r\n\r\nrequire._core = {\r\n  'assert': true,\r\n  'events': true,\r\n  'fs': true,\r\n  'path': true,\r\n  'vm': true\r\n};\r\n\r\nrequire.resolve = (function () {\r\n  return function (x, cwd) {\r\n      if (!cwd) cwd = '/';\r\n\r\n      if (require._core[x]) return x;\r\n      var path = require.modules.path();\r\n      cwd = path.resolve('/', cwd);\r\n      var y = cwd || '/';\r\n\r\n      if (x.match(/^(?:\\.\\.?\\/|\\/)/)) {\r\n          var m = loadAsFileSync(path.resolve(y, x))\r\n              || loadAsDirectorySync(path.resolve(y, x));\r\n          if (m) return m;\r\n      }\r\n\r\n      var n = loadNodeModulesSync(x, y);\r\n      if (n) return n;\r\n\r\n      throw new Error(\"Cannot find module '\" + x + \"'\");\r\n\r\n      function loadAsFileSync (x) {\r\n          x = path.normalize(x);\r\n          if (require.modules[x]) {\r\n              return x;\r\n          }\r\n\r\n          for (var i = 0; i < require.extensions.length; i++) {\r\n              var ext = require.extensions[i];\r\n              if (require.modules[x + ext]) return x + ext;\r\n          }\r\n      }\r\n\r\n      function loadAsDirectorySync (x) {\r\n          x = x.replace(/\\/+$/, '');\r\n          var pkgfile = path.normalize(x + '/package.json');\r\n          if (require.modules[pkgfile]) {\r\n              var pkg = require.modules[pkgfile]();\r\n              var b = pkg.browserify;\r\n              if (typeof b === 'object' && b.main) {\r\n                  var m = loadAsFileSync(path.resolve(x, b.main));\r\n                  if (m) return m;\r\n              }\r\n              else if (typeof b === 'string') {\r\n                  var m = loadAsFileSync(path.resolve(x, b));\r\n                  if (m) return m;\r\n              }\r\n              else if (pkg.main) {\r\n                  var m = loadAsFileSync(path.resolve(x, pkg.main));\r\n                  if (m) return m;\r\n              }\r\n          }\r\n\r\n          return loadAsFileSync(x + '/index');\r\n      }\r\n\r\n      function loadNodeModulesSync (x, start) {\r\n          var dirs = nodeModulesPathsSync(start);\r\n          for (var i = 0; i < dirs.length; i++) {\r\n              var dir = dirs[i];\r\n              var m = loadAsFileSync(dir + '/' + x);\r\n              if (m) return m;\r\n              var n = loadAsDirectorySync(dir + '/' + x);\r\n              if (n) return n;\r\n          }\r\n\r\n          var m = loadAsFileSync(x);\r\n          if (m) return m;\r\n      }\r\n\r\n      function nodeModulesPathsSync (start) {\r\n          var parts;\r\n          if (start === '/') parts = [ '' ];\r\n          else parts = path.normalize(start).split('/');\r\n\r\n          var dirs = [];\r\n          for (var i = parts.length - 1; i >= 0; i--) {\r\n              if (parts[i] === 'node_modules') continue;\r\n              var dir = parts.slice(0, i + 1).join('/') + '/node_modules';\r\n              dirs.push(dir);\r\n          }\r\n\r\n          return dirs;\r\n      }\r\n  };\r\n})();\r\n\r\nrequire.alias = function (from, to) {\r\n  var path = require.modules.path();\r\n  var res = null;\r\n  try {\r\n      res = require.resolve(from + '/package.json', '/');\r\n  }\r\n  catch (err) {\r\n      res = require.resolve(from, '/');\r\n  }\r\n  var basedir = path.dirname(res);\r\n\r\n  var keys = (Object.keys || function (obj) {\r\n      var res = [];\r\n      for (var key in obj) res.push(key);\r\n      return res;\r\n  })(require.modules);\r\n\r\n  for (var i = 0; i < keys.length; i++) {\r\n      var key = keys[i];\r\n      if (key.slice(0, basedir.length + 1) === basedir + '/') {\r\n          var f = key.slice(basedir.length);\r\n          require.modules[to + f] = require.modules[basedir + f];\r\n      }\r\n      else if (key === basedir) {\r\n          require.modules[to] = require.modules[basedir];\r\n      }\r\n  }\r\n};\r\n\r\n(function () {\r\n  var process = {};\r\n\r\n  require.define = function (filename, fn) {\r\n      if (require.modules.__browserify_process) {\r\n          process = require.modules.__browserify_process();\r\n      }\r\n\r\n      var dirname = require._core[filename]\r\n          ? ''\r\n          : require.modules.path().dirname(filename)\r\n      ;\r\n\r\n      var require_ = function (file) {\r\n          var requiredModule = require(file, dirname);\r\n          var cached = require.cache[require.resolve(file, dirname)];\r\n\r\n          if (cached && cached.parent === null) {\r\n              cached.parent = module_;\r\n          }\r\n\r\n          return requiredModule;\r\n      };\r\n      require_.resolve = function (name) {\r\n          return require.resolve(name, dirname);\r\n      };\r\n      require_.modules = require.modules;\r\n      require_.define = require.define;\r\n      require_.cache = require.cache;\r\n      var module_ = {\r\n          id : filename,\r\n          filename: filename,\r\n          exports : {},\r\n          loaded : false,\r\n          parent: null\r\n      };\r\n\r\n      require.modules[filename] = function () {\r\n          require.cache[filename] = module_;\r\n          fn.call(\r\n              module_.exports,\r\n              require_,\r\n              module_,\r\n              module_.exports,\r\n              dirname,\r\n              filename,\r\n              process\r\n          );\r\n          module_.loaded = true;\r\n          return module_.exports;\r\n      };\r\n  };\r\n})();\r\n\r\n\r\nrequire.define(\"path\",function(require,module,exports,__dirname,__filename,process){function filter (xs, fn) {\r\n  var res = [];\r\n  for (var i = 0; i < xs.length; i++) {\r\n      if (fn(xs[i], i, xs)) res.push(xs[i]);\r\n  }\r\n  return res;\r\n}\r\n\r\n// resolves . and .. elements in a path array with directory names there\r\n// must be no slashes, empty elements, or device names (c:\\) in the array\r\n// (so also no leading and trailing slashes - it does not distinguish\r\n// relative and absolute paths)\r\nfunction normalizeArray(parts, allowAboveRoot) {\r\n// if the path tries to go above the root, `up` ends up > 0\r\nvar up = 0;\r\nfor (var i = parts.length; i >= 0; i--) {\r\n  var last = parts[i];\r\n  if (last == '.') {\r\n    parts.splice(i, 1);\r\n  } else if (last === '..') {\r\n    parts.splice(i, 1);\r\n    up++;\r\n  } else if (up) {\r\n    parts.splice(i, 1);\r\n    up--;\r\n  }\r\n}\r\n\r\n// if the path is allowed to go above the root, restore leading ..s\r\nif (allowAboveRoot) {\r\n  for (; up--; up) {\r\n    parts.unshift('..');\r\n  }\r\n}\r\n\r\nreturn parts;\r\n}\r\n\r\n// Regex to split a filename into [*, dir, basename, ext]\r\n// posix version\r\nvar splitPathRe = /^(.+\\/(?!$)|\\/)?((?:.+?)?(\\.[^.]*)?)$/;\r\n\r\n// path.resolve([from ...], to)\r\n// posix version\r\nexports.resolve = function() {\r\nvar resolvedPath = '',\r\n  resolvedAbsolute = false;\r\n\r\nfor (var i = arguments.length; i >= -1 && !resolvedAbsolute; i--) {\r\nvar path = (i >= 0)\r\n    ? arguments[i]\r\n    : process.cwd();\r\n\r\n// Skip empty and invalid entries\r\nif (typeof path !== 'string' || !path) {\r\n  continue;\r\n}\r\n\r\nresolvedPath = path + '/' + resolvedPath;\r\nresolvedAbsolute = path.charAt(0) === '/';\r\n}\r\n\r\n// At this point the path should be resolved to a full absolute path, but\r\n// handle relative paths to be safe (might happen when process.cwd() fails)\r\n\r\n// Normalize the path\r\nresolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\r\n  return !!p;\r\n}), !resolvedAbsolute).join('/');\r\n\r\nreturn ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\r\n};\r\n\r\n// path.normalize(path)\r\n// posix version\r\nexports.normalize = function(path) {\r\nvar isAbsolute = path.charAt(0) === '/',\r\n  trailingSlash = path.slice(-1) === '/';\r\n\r\n// Normalize the path\r\npath = normalizeArray(filter(path.split('/'), function(p) {\r\n  return !!p;\r\n}), !isAbsolute).join('/');\r\n\r\nif (!path && !isAbsolute) {\r\n  path = '.';\r\n}\r\nif (path && trailingSlash) {\r\n  path += '/';\r\n}\r\n\r\nreturn (isAbsolute ? '/' : '') + path;\r\n};\r\n\r\n\r\n// posix version\r\nexports.join = function() {\r\nvar paths = Array.prototype.slice.call(arguments, 0);\r\nreturn exports.normalize(filter(paths, function(p, index) {\r\n  return p && typeof p === 'string';\r\n}).join('/'));\r\n};\r\n\r\n\r\nexports.dirname = function(path) {\r\nvar dir = splitPathRe.exec(path)[1] || '';\r\nvar isWindows = false;\r\nif (!dir) {\r\n  // No dirname\r\n  return '.';\r\n} else if (dir.length === 1 ||\r\n    (isWindows && dir.length <= 3 && dir.charAt(1) === ':')) {\r\n  // It is just a slash or a drive letter with a slash\r\n  return dir;\r\n} else {\r\n  // It is a full dirname, strip trailing slash\r\n  return dir.substring(0, dir.length - 1);\r\n}\r\n};\r\n\r\n\r\nexports.basename = function(path, ext) {\r\nvar f = splitPathRe.exec(path)[2] || '';\r\n// TODO: make this comparison case-insensitive on windows?\r\nif (ext && f.substr(-1 * ext.length) === ext) {\r\n  f = f.substr(0, f.length - ext.length);\r\n}\r\nreturn f;\r\n};\r\n\r\n\r\nexports.extname = function(path) {\r\nreturn splitPathRe.exec(path)[3] || '';\r\n};\r\n});\r\n\r\nrequire.define(\"__browserify_process\",function(require,module,exports,__dirname,__filename,process){var process = module.exports = {};\r\n\r\nprocess.nextTick = (function () {\r\n  var queue = [];\r\n  var canPost = typeof window !== 'undefined'\r\n      && window.postMessage && window.addEventListener\r\n  ;\r\n\r\n  if (canPost) {\r\n      window.addEventListener('message', function (ev) {\r\n          if (ev.source === window && ev.data === 'browserify-tick') {\r\n              ev.stopPropagation();\r\n              if (queue.length > 0) {\r\n                  var fn = queue.shift();\r\n                  fn();\r\n              }\r\n          }\r\n      }, true);\r\n  }\r\n\r\n  return function (fn) {\r\n      if (canPost) {\r\n          queue.push(fn);\r\n          window.postMessage('browserify-tick', '*');\r\n      }\r\n      else setTimeout(fn, 0);\r\n  };\r\n})();\r\n\r\nprocess.title = 'browser';\r\nprocess.browser = true;\r\nprocess.env = {};\r\nprocess.argv = [];\r\n\r\nprocess.binding = function (name) {\r\n  if (name === 'evals') return (require)('vm')\r\n  else throw new Error('No such module. (Possibly not yet loaded)')\r\n};\r\n\r\n(function () {\r\n  var cwd = '/';\r\n  var path;\r\n  process.cwd = function () { return cwd };\r\n  process.chdir = function (dir) {\r\n      if (!path) path = require('path');\r\n      cwd = path.resolve(dir, cwd);\r\n  };\r\n})();\r\n});\r\n\r\nrequire.define(\"vm\",function(require,module,exports,__dirname,__filename,process){module.exports = require(\"vm-browserify\")});\r\n\r\nrequire.define(\"/node_modules/vm-browserify/package.json\",function(require,module,exports,__dirname,__filename,process){module.exports = {\"main\":\"index.js\"}});\r\n\r\nrequire.define(\"/node_modules/vm-browserify/index.js\",function(require,module,exports,__dirname,__filename,process){var Object_keys = function (obj) {\r\n  if (Object.keys) return Object.keys(obj)\r\n  else {\r\n      var res = [];\r\n      for (var key in obj) res.push(key)\r\n      return res;\r\n  }\r\n};\r\n\r\nvar forEach = function (xs, fn) {\r\n  if (xs.forEach) return xs.forEach(fn)\r\n  else for (var i = 0; i < xs.length; i++) {\r\n      fn(xs[i], i, xs);\r\n  }\r\n};\r\n\r\nvar Script = exports.Script = function NodeScript (code) {\r\n  if (!(this instanceof Script)) return new Script(code);\r\n  this.code = code;\r\n};\r\n\r\nScript.prototype.runInNewContext = function (context) {\r\n  if (!context) context = {};\r\n\r\n  var iframe = document.createElement('iframe');\r\n  if (!iframe.style) iframe.style = {};\r\n  iframe.style.display = 'none';\r\n\r\n  document.body.appendChild(iframe);\r\n\r\n  var win = iframe.contentWindow;\r\n\r\n  forEach(Object_keys(context), function (key) {\r\n      win[key] = context[key];\r\n  });\r\n\r\n  if (!win.eval && win.execScript) {\r\n      // win.eval() magically appears when this is called in IE:\r\n      win.execScript('null');\r\n  }\r\n\r\n  var res = win.eval(this.code);\r\n\r\n  forEach(Object_keys(win), function (key) {\r\n      context[key] = win[key];\r\n  });\r\n\r\n  document.body.removeChild(iframe);\r\n\r\n  return res;\r\n};\r\n\r\nScript.prototype.runInThisContext = function () {\r\n  return eval(this.code); // maybe...\r\n};\r\n\r\nScript.prototype.runInContext = function (context) {\r\n  // seems to be just runInNewContext on magical context objects which are\r\n  // otherwise indistinguishable from objects except plain old objects\r\n  // for the parameter segfaults node\r\n  return this.runInNewContext(context);\r\n};\r\n\r\nforEach(Object_keys(Script.prototype), function (name) {\r\n  exports[name] = Script[name] = function (code) {\r\n      var s = Script(code);\r\n      return s[name].apply(s, [].slice.call(arguments, 1));\r\n  };\r\n});\r\n\r\nexports.createScript = function (code) {\r\n  return exports.Script(code);\r\n};\r\n\r\nexports.createContext = Script.createContext = function (context) {\r\n  // not really sure what this one does\r\n  // seems to just make a shallow copy\r\n  var copy = {};\r\n  if(typeof context === 'object') {\r\n      forEach(Object_keys(context), function (key) {\r\n          copy[key] = context[key];\r\n      });\r\n  }\r\n  return copy;\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/phonetics/soundex.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Phonetic = require('./phonetic');\r\n\r\nfunction transformLipps(token) {\r\n  return token.replace(/[bfpv]/g, '1');\r\n}\r\n\r\nfunction transformThroats(token) {\r\n  return token.replace(/[cgjkqsxz]/g, '2');\r\n}\r\n\r\nfunction transformToungue(token) {\r\n  return token.replace(/[dt]/g, '3');\r\n}\r\n\r\nfunction transformL(token) {\r\n  return token.replace(/l/g, '4');\r\n}\r\n\r\nfunction transformHum(token) {\r\n  return token.replace(/[mn]/g, '5');\r\n}\r\n\r\nfunction transformR(token) {\r\n  return token.replace(/r/g, '6');\r\n}\r\n\r\nfunction condense(token) {\r\n  return token.replace(/(\\d)[hw]?\\1+/g, '$1').replace(/[hw]/g, '');\r\n}\r\n\r\nfunction padRight0(token) {\r\n  if(token.length < 4)\r\n      return token + Array(4 - token.length).join('0');\r\n  else\r\n      return token;\r\n}\r\n\r\nvar SoundEx = new Phonetic();\r\nmodule.exports = SoundEx;\r\n\r\nSoundEx.process = function(token, maxLength) {\r\n  token = token.toLowerCase();\r\n\r\n  return token.charAt(0).toUpperCase() + padRight0(condense(transformLipps(transformThroats(\r\n      transformToungue(transformL(transformHum(transformR(\r\n          token.substr(1, token.length - 1).replace(/[aeiouy]/g, '')))))))\r\n              )).substr(0, (maxLength && maxLength - 1) || 3);\r\n};\r\n\r\n// export for tests;\r\nSoundEx.transformLipps = transformLipps;\r\nSoundEx.transformThroats = transformThroats;\r\nSoundEx.transformToungue = transformToungue;\r\nSoundEx.transformL = transformL;\r\nSoundEx.transformHum = transformHum;\r\nSoundEx.transformR = transformR;\r\nSoundEx.condense = condense;\r\nSoundEx.padRight0 = padRight0;\r\n});\r\n\r\nrequire.define(\"/lib/natural/phonetics/phonetic.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar stopwords = require('../util/stopwords');\r\nvar Tokenizer = new require('../tokenizers/aggressive_tokenizer')\r\n  tokenizer = new Tokenizer();\r\n\r\nmodule.exports = function() {\r\n  this.compare = function(stringA, stringB) {\r\n      return this.process(stringA) == this.process(stringB);\r\n  };\r\n\r\n  this.attach = function() {\r\nvar phonetic = this;\r\n\r\n      String.prototype.soundsLike = function(compareTo) {\r\n          return phonetic.compare(this, compareTo);\r\n      }\r\n\r\n      String.prototype.phonetics = function() {\r\n          return phonetic.process(this);\r\n      }\r\n\r\n      String.prototype.tokenizeAndPhoneticize = function(keepStops) {\r\n          var phoneticizedTokens = [];\r\n\r\n          tokenizer.tokenize(this).forEach(function(token) {\r\n              if(keepStops || stopwords.words.indexOf(token) < 0)\r\n                  phoneticizedTokens.push(token.phonetics());\r\n          });\r\n\r\n          return phoneticizedTokens;\r\n      }\r\n  };\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/util/stopwords.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n// a list of commonly used words that have little meaning and can be excluded\r\n// from analysis.\r\nvar words = [\r\n  'about', 'after', 'all', 'also', 'am', 'an', 'and', 'another', 'any', 'are', 'as', 'at', 'be',\r\n  'because', 'been', 'before', 'being', 'between', 'both', 'but', 'by', 'came', 'can',\r\n  'come', 'could', 'did', 'do', 'each', 'for', 'from', 'get', 'got', 'has', 'had',\r\n  'he', 'have', 'her', 'here', 'him', 'himself', 'his', 'how', 'if', 'in', 'into',\r\n  'is', 'it', 'like', 'make', 'many', 'me', 'might', 'more', 'most', 'much', 'must',\r\n  'my', 'never', 'now', 'of', 'on', 'only', 'or', 'other', 'our', 'out', 'over',\r\n  'said', 'same', 'see', 'should', 'since', 'some', 'still', 'such', 'take', 'than',\r\n  'that', 'the', 'their', 'them', 'then', 'there', 'these', 'they', 'this', 'those',\r\n  'through', 'to', 'too', 'under', 'up', 'very', 'was', 'way', 'we', 'well', 'were',\r\n  'what', 'where', 'which', 'while', 'who', 'with', 'would', 'you', 'your',\r\n  'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n  'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '$', '1',\r\n  '2', '3', '4', '5', '6', '7', '8', '9', '0', '_'];\r\n\r\n// tell the world about the noise words.\r\nexports.words = words;\r\n});\r\n\r\nrequire.define(\"/lib/natural/phonetics/metaphone.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Phonetic = require('./phonetic');\r\n\r\nfunction dedup(token) {\r\n  return token.replace(/([^c])\\1/g, '$1');\r\n}\r\n\r\nfunction dropInitialLetters(token) {\r\n  if(token.match(/^(kn|gn|pn|ae|wr)/))\r\n      return token.substr(1, token.length - 1);\r\n\r\n  return token;\r\n}\r\n\r\nfunction dropBafterMAtEnd(token) {\r\n  return token.replace(/mb$/, 'm');\r\n}\r\n\r\nfunction cTransform(token) {\r\n  token = token.replace(/([^s]|^)(c)(h)/g, '$1x$3').trim();\r\n  token = token.replace(/cia/g, 'xia');\r\n  token = token.replace(/c(i|e|y)/g, 's$1');\r\n  token = token.replace(/c/g, 'k');\r\n\r\n  return token;\r\n}\r\n\r\nfunction dTransform(token) {\r\n  token = token.replace(/d(ge|gy|gi)/g, 'j$1');\r\n  token = token.replace(/d/g, 't');\r\n\r\n  return token;\r\n}\r\n\r\nfunction dropG(token) {\r\n  token = token.replace(/gh(^$|[^aeiou])/g, 'h$1');\r\n  token = token.replace(/g(n|ned)$/g, '$1');\r\n\r\n  return token;\r\n}\r\n\r\nfunction transformG(token) {\r\n  token = token.replace(/([^g]|^)(g)(i|e|y)/g, '$1j$3');\r\n  token = token.replace(/gg/g, 'g');\r\n  token = token.replace(/g/g, 'k');\r\n\r\n  return token;\r\n}\r\n\r\nfunction dropH(token) {\r\n  return token.replace(/([aeiou])h([^aeiou])/g, '$1$2');\r\n}\r\n\r\nfunction transformCK(token) {\r\n  return token.replace(/ck/g, 'k');\r\n}\r\nfunction transformPH(token) {\r\n  return token.replace(/ph/g, 'f');\r\n}\r\n\r\nfunction transformQ(token) {\r\n  return token.replace(/q/g, 'k');\r\n}\r\n\r\nfunction transformS(token) {\r\n  return token.replace(/s(h|io|ia)/g, 'x$1');\r\n}\r\n\r\nfunction transformT(token) {\r\n  token = token.replace(/t(ia|io)/g, 'x$1');\r\n  token = token.replace(/th/, '0');\r\n\r\n  return token;\r\n}\r\n\r\nfunction dropT(token) {\r\n  return token.replace(/tch/g, 'ch');\r\n}\r\n\r\nfunction transformV(token) {\r\n  return token.replace(/v/g, 'f');\r\n}\r\n\r\nfunction transformWH(token) {\r\n  return token.replace(/^wh/, 'w');\r\n}\r\n\r\nfunction dropW(token) {\r\n  return token.replace(/w([^aeiou]|$)/g, '$1');\r\n}\r\n\r\nfunction transformX(token) {\r\n  token = token.replace(/^x/, 's');\r\n  token = token.replace(/x/g, 'ks');\r\n  return token;\r\n}\r\n\r\nfunction dropY(token) {\r\n  return token.replace(/y([^aeiou]|$)/g, '$1');\r\n}\r\n\r\nfunction transformZ(token) {\r\n  return token.replace(/z/, 's');\r\n}\r\n\r\nfunction dropVowels(token) {\r\n  return token.charAt(0) + token.substr(1, token.length).replace(/[aeiou]/g, '');\r\n}\r\n\r\nvar Metaphone = new Phonetic();\r\nmodule.exports = Metaphone;\r\n\r\nMetaphone.process = function(token, maxLength) {\r\n  maxLength == maxLength || 32;\r\n  token = token.toLowerCase();\r\n  token = dedup(token);\r\n  token = dropInitialLetters(token);\r\n  token = dropBafterMAtEnd(token);\r\n  token = transformCK(token);\r\n  token = cTransform(token);\r\n  token = dTransform(token);\r\n  token = dropG(token);\r\n  token = transformG(token);\r\n  token = dropH(token);\r\n  token = transformPH(token);\r\n  token = transformQ(token);\r\n  token = transformS(token);\r\n  token = transformX(token);\r\n  token = transformT(token);\r\n  token = dropT(token);\r\n  token = transformV(token);\r\n  token = transformWH(token);\r\n  token = dropW(token);\r\n  token = dropY(token);\r\n  token = transformZ(token);\r\n  token = dropVowels(token);\r\n\r\n  token.toUpperCase();\r\n  if(token.length >= maxLength)\r\n      token = token.substring(0, maxLength);\r\n\r\n  return token.toUpperCase();\r\n};\r\n\r\n// expose functions for testing\r\nMetaphone.dedup = dedup;\r\nMetaphone.dropInitialLetters = dropInitialLetters;\r\nMetaphone.dropBafterMAtEnd = dropBafterMAtEnd;\r\nMetaphone.cTransform = cTransform;\r\nMetaphone.dTransform = dTransform;\r\nMetaphone.dropG = dropG;\r\nMetaphone.transformG = transformG;\r\nMetaphone.dropH = dropH;\r\nMetaphone.transformCK = transformCK;\r\nMetaphone.transformPH = transformPH;\r\nMetaphone.transformQ = transformQ;\r\nMetaphone.transformS = transformS;\r\nMetaphone.transformT = transformT;\r\nMetaphone.dropT = dropT;\r\nMetaphone.transformV = transformV;\r\nMetaphone.transformWH = transformWH;\r\nMetaphone.dropW = dropW;\r\nMetaphone.transformX = transformX;\r\nMetaphone.dropY = dropY;\r\nMetaphone.transformZ = transformZ;\r\nMetaphone.dropVowels = dropVowels;\r\n});\r\n\r\nrequire.define(\"/lib/natural/phonetics/double_metaphone.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Phonetic = require('./phonetic');\r\n\r\nvar DoubleMetaphone = new Phonetic();\r\nmodule.exports = DoubleMetaphone;\r\n\r\nfunction isVowel(c) {\r\nreturn c && c.match(/[aeiouy]/i);\r\n}\r\n\r\nfunction truncate(string, length) {\r\n  if(string.length >= length)\r\n      string = string.substring(0, length);\r\n\r\n  return string;\r\n}\r\n\r\nfunction process(token, maxLength) {\r\ntoken = token.toUpperCase();\r\nvar primary = '', secondary = '';\r\n  var pos = 0;\r\n  maxLength == maxLength || 32;\r\n\r\n  function subMatch(startOffset, stopOffset, terms) {\r\n      return subMatchAbsolute(pos + startOffset, pos + stopOffset, terms);\r\n  }\r\n\r\n  function subMatchAbsolute(startOffset, stopOffset, terms) {\r\n      return terms.indexOf(token.substring(startOffset, stopOffset)) > -1;\r\n  }\r\n\r\n  function addSecondary(primaryAppendage, secondaryAppendage) {\r\n    primary += primaryAppendage;\r\n    secondary += secondaryAppendage;\r\n  }\r\n\r\n  function add(primaryAppendage) {\r\n    addSecondary(primaryAppendage, primaryAppendage);\r\n  }\r\n\r\n  function addCompressedDouble(c, encoded) {\r\n    if(token[pos + 1] == c)\r\n      pos++;\r\n    add(encoded || c);\r\n  }\r\n\r\n  function handleC() {\r\n      if(pos > 1 && !isVowel(token[pos - 2])\r\n              && token[pos - 1] == 'A' && token[pos + 1] == 'H'\r\n                  && (token[pos + 2] != 'I' && token[pos + 2] != 'I')\r\n                      || subMatch(-2, 4, ['BACHER', 'MACHER'])) {\r\n          add('K');\r\n          pos++;\r\n      } else if(pos == 0 && token.substring(1, 6) == 'EASAR') {\r\n          add('S');\r\n          pos++;\r\n      } else if(token.substring(pos + 1, pos + 4) == 'HIA') {\r\n          add('K');\r\n          pos++;\r\n      } else if(token[pos + 1] == 'H') {\r\n          if(pos > 0 && token.substring(pos + 2, pos + 4) == 'AE') {\r\n              addSecondary('K', 'X');\r\n              pos++;\r\n          } else if(pos == 0\r\n                      && (subMatch(1, 6, ['HARAC', 'HARIS'])\r\n                          || subMatch(1, 3, ['HOR', 'HUM', 'HIA', 'HEM']))\r\n                      && token.substring(pos + 1, pos + 5) != 'HORE') {\r\n              add('K');\r\n              pos++;\r\n          } else {\r\n              if((subMatchAbsolute(0, 3, ['VAN', 'VON']) || token.substring(0,  3) == 'SCH')\r\n                  || subMatch(-2, 4, ['ORCHES', 'ARCHIT', 'ORCHID'])\r\n                  || subMatch(2, 3, ['T', 'S'])\r\n                  || ((subMatch(-1, 0, ['A', 'O', 'U', 'E']) || pos == 0)\r\n                      && subMatch(2, 3, ['B', 'F', 'H', 'L', 'M', 'N', 'R', 'V', 'W']))) {\r\n                  add('K');\r\n              } else if(pos > 0) {\r\n                  if(token.substring(0, 2) == 'MC') {\r\n                      add('K');\r\n                  } else {\r\n                      addSecondary('X', 'K');\r\n                  }\r\n              } else {\r\n                  add('X');\r\n              }\r\n\r\n              pos++;\r\n          }\r\n      } else if(token.substring(pos, pos + 2) == 'CZ'\r\n              && token.substring(pos - 2, pos + 1) != 'WICZ') {\r\n          addSecondary('S', 'X');\r\n          pos++;\r\n      } else if(token.substring(pos, pos + 3) == 'CIA') {\r\n          add('X');\r\n          pos += 2;\r\n      } else if(token[pos + 1] == 'C' && pos != 1 && token[0] != 'M') {\r\n          if(['I', 'E', 'H'].indexOf(token[pos + 2]) > -1\r\n                  && token.substring(pos + 2, pos + 4) != 'HU') {\r\n              if(pos == 1 && token[pos - 1] == 'A'\r\n                      || subMatch(-1, 4, ['UCCEE', 'UCCES'])) {\r\n                  add('KS');\r\n              } else {\r\n                 add('X');\r\n              }\r\n\r\n             pos +=2;\r\n          } else {\r\n              add('K');\r\n              pos++;\r\n          }\r\n      } else if(['K', 'G', 'Q'].indexOf(token[pos + 1]) > -1) {\r\n          add('K');\r\n          pos++;\r\n      } else if(['E', 'I', 'Y'].indexOf(token[pos + 1]) > -1) {\r\n          if(subMatch(1, 3, ['IA', 'IE', 'IO'])) {\r\n              addSecondary('S', 'X');\r\n          } else {\r\n              add('S');\r\n          }\r\n          pos++;\r\n      } else {\r\n          add('K');\r\n          if(token[pos + 1] == ' ' && ['C', 'Q', 'G'].indexOf(token[pos + 2])) {\r\n              pos += 2;\r\n          } else if(['C', 'K', 'Q'].indexOf(token[pos + 1]) > -1\r\n                  && !subMatch(1, 3, ['CE', 'CI'])) {\r\n              pos++;\r\n          }\r\n      }\r\n  }\r\n\r\n  function handleD() {\r\n    if(token[pos + 1] == 'G') {\r\n      if(['I', 'E', 'Y'].indexOf(token[pos + 2]) > -1)  {\r\n        add('J');\r\n        pos += 2;\r\n      } else {\r\n        add('TK');\r\n        pos++;\r\n      }\r\n    } else if(token[pos + 1] == 'T') {\r\n      add('T');\r\n      pos++;\r\n    } else\r\n      addCompressedDouble('D', 'T');\r\n  }\r\n\r\n  function handleG() {\r\n      if(token[pos + 1] == 'H') {\r\n          if(pos > 0 && !isVowel(token[pos - 1])) {\r\n              add('K');\r\n              pos++;\r\n          } else if(pos == 0) {\r\n              if(token[pos + 2] == 'I') {\r\n                  add('J');\r\n              } else {\r\n                  add('K');\r\n              }\r\n              pos++;\r\n          } else if(pos > 1\r\n              && (['B', 'H', 'D'].indexOf(token[pos - 2]) > -1\r\n                  || ['B', 'H', 'D'].indexOf(token[pos - 3]) > -1\r\n                  || ['B', 'H'].indexOf(token[pos - 4]) > -1)) {\r\n              pos++;\r\n          } else {\r\n              if(pos > 2\r\n                      && token[pos - 1] == 'U'\r\n                      && ['C', 'G', 'L', 'R', 'T'].indexOf(token[pos - 3]) > -1) {\r\n                  add('F');\r\n              } else if(token[pos - 1] != 'I') {\r\n                  add('K');\r\n              }\r\n\r\n              pos++;\r\n          }\r\n      } else if(token[pos + 1] == 'N') {\r\n          if(pos == 1 && startsWithVowel && !slavoGermanic) {\r\n              addSecondary('KN', 'N');\r\n          } else {\r\n              if(token.substring(pos + 2, pos + 4) != 'EY'\r\n                      && (token[pos + 1] != 'Y'\r\n                          && !slavoGermanic)) {\r\n                  addSecondary('N', 'KN');\r\n              } else\r\n                  add('KN');\r\n          }\r\n          pos++;\r\n      } else if(token.substring(pos + 1, pos + 3) == 'LI' && !slavoGermanic) {\r\n          addSecondary('KL', 'L');\r\n          pos++;\r\n      } else if(pos == 0 && (token[pos + 1] == 'Y'\r\n              || subMatch(1, 3, ['ES', 'EP', 'EB', 'EL', 'EY', 'IB', 'IL', 'IN', 'IE', 'EI', 'ER']))) {\r\n          addSecondary('K', 'J')\r\n      } else {\r\n          addCompressedDouble('G', 'K');\r\n      }\r\n  }\r\n\r\n  function handleH() {\r\n  // keep if starts a word or is surrounded by vowels\r\n  if((pos == 0 || isVowel(token[pos - 1])) && isVowel(token[pos + 1])) {\r\n    add('H');\r\n    pos++;\r\n  }\r\n  }\r\n\r\n  function handleJ() {\r\n      var jose = (token.substring(pos + 1, pos + 4) == 'OSE');\r\n\r\n      if(san || jose) {\r\n          if((pos == 0 && token[pos + 4] == ' ')\r\n                  || san) {\r\n              add('H');\r\n          } else\r\n              add('J', 'H');\r\n      } else {\r\n          if(pos == 0/* && !jose*/) {\r\n              addSecondary('J', 'A');\r\n          } else if(isVowel(token[pos - 1]) && !slavoGermanic\r\n                  && (token[pos + 1] == 'A' || token[pos + 1] == 'O')) {\r\n              addSecondary('J', 'H');\r\n          } else if(pos == token.length - 1) {\r\n              addSecondary('J', ' ');\r\n          } else\r\n              addCompressedDouble('J');\r\n      }\r\n  }\r\n\r\n  function handleL() {\r\n    if(token[pos + 1] == 'L') {\r\n      if(pos == token.length - 3 && (\r\n            subMatch(-1, 3, ['ILLO', 'ILLA', 'ALLE']) || (\r\n              token.substring(pos - 1, pos + 3) == 'ALLE' &&\r\n              (subMatch(-2, -1, ['AS', 'OS']) > -1 ||\r\n              ['A', 'O'].indexOf(token[token.length - 1]) > -1)))) {\r\n        addSecondary('L', '');\r\n        pos++;\r\n        return;\r\n      }\r\n      pos++;\r\n    }\r\n    add('L');\r\n  }\r\n\r\n  function handleM() {\r\n    addCompressedDouble('M');\r\n    if(token[pos - 1] == 'U' && token[pos + 1] == 'B' &&\r\n        ((pos == token.length - 2  || token.substring(pos + 2, pos + 4) == 'ER')))\r\n      pos++;\r\n  }\r\n\r\n  function handleP() {\r\n    if(token[pos + 1] == 'H') {\r\n      add('F');\r\n      pos++;\r\n    } else {\r\n      addCompressedDouble('P');\r\n\r\n    if(token[pos + 1] == 'B')\r\n        pos++;\r\n    }\r\n  }\r\n\r\n  function handleR() {\r\n    if(pos == token.length - 1 && !slavoGermanic\r\n        && token.substring(pos - 2, pos) == 'IE'\r\n        && !subMatch(-4, -3, ['ME', 'MA'])) {\r\n      addSecondary('', 'R');\r\n    } else\r\n      addCompressedDouble('R');\r\n  }\r\n\r\n  function handleS() {\r\n      if(pos == 0 && token.substring(0, 5) == 'SUGAR') {\r\n          addSecondary('X', 'S');\r\n      } else if(token[pos + 1] == 'H') {\r\n          if(subMatch(2, 5, ['EIM', 'OEK', 'OLM', 'OLZ'])) {\r\n              add('S');\r\n          } else {\r\n              add('X');\r\n          }\r\n          pos++;\r\n      } else if(subMatch(1, 3, ['IO', 'IA'])) {\r\n          if(slavoGermanic) {\r\n              add('S');\r\n          } else {\r\n              addSecondary('S', 'X');\r\n          }\r\n          pos++;\r\n      } else if((pos == 0 && ['M', 'N', 'L', 'W'].indexOf(token[pos + 1]) > -1)\r\n              || token[pos + 1] == 'Z') {\r\n          addSecondary('S', 'X');\r\n          if(token[pos + 1] == 'Z')\r\n              pos++;\r\n      } else if(token.substring(pos, pos + 2) == 'SC') {\r\n          if(token[pos + 2] == 'H') {\r\n              if(subMatch(3, 5, ['ER', 'EN'])) {\r\n                  addSecondary('X', 'SK');\r\n              } else if(subMatch(3, 5, ['OO', 'UY', 'ED', 'EM'])) {\r\n                  add('SK');\r\n              } else if(pos == 0 && !isVowel(token[3]) && token[3] != 'W') {\r\n                  addSecondary('X', 'S');\r\n              } else {\r\n                  add('X');\r\n              }\r\n          } else if(['I', 'E', 'Y'].indexOf(token[pos + 2]) > -1) {\r\n              add('S');\r\n          } else {\r\n              add('SK');\r\n          }\r\n\r\n          pos += 2;\r\n      } else if(pos == token.length - 1\r\n              && subMatch(-2, 0, ['AI', 'OI'])) {\r\n          addSecondary('', 'S');\r\n      } else if(token[pos + 1] != 'L' && (\r\n              token[pos - 1] != 'A' && token[pos - 1] != 'I')) {\r\n          addCompressedDouble('S');\r\n          if(token[pos + 1] == 'Z')\r\n              pos++;\r\n      }\r\n  }\r\n\r\n  function handleT() {\r\n      if(token.substring(pos + 1, pos + 4) == 'ION') {\r\n          add('XN');\r\n          pos += 3;\r\n      } else if(subMatch(1, 3, ['IA', 'CH'])) {\r\n          add('X');\r\n          pos += 2;\r\n      } else if(token[pos + 1] == 'H'\r\n              || token.substring(1, 2) == 'TH') {\r\n          if(subMatch(2, 4, ['OM', 'AM'])\r\n                  || ['VAN ', 'VON '].indexOf(token.substring(0, 4)) > -1\r\n                  || token.substring(0, 3) == 'SCH') {\r\n              add('T');\r\n          } else\r\n              addSecondary('0', 'T');\r\n          pos++;\r\n      } else {\r\n          addCompressedDouble('T');\r\n\r\n          if(token[pos + 1] == 'D')\r\n              pos++;\r\n      }\r\n  }\r\n\r\n  function handleX() {\r\n    if(pos == 0) {\r\n      add('S');\r\n    } else if(!(pos == token.length - 1\r\n        && (['IAU', 'EAU', 'IEU'].indexOf(token.substring(pos - 3, pos)) > -1\r\n          || ['AU', 'OU'].indexOf(token.substring(pos - 2, pos)) > -1))) {\r\n      add('KS');\r\n    }\r\n  }\r\n\r\n  function handleW() {\r\n      if(pos == 0) {\r\n          if(token[1] == 'H') {\r\n              add('A');\r\n          } else if (isVowel(token[1])) {\r\n              addSecondary('A', 'F');\r\n          }\r\n      } else if((pos == token.length - 1 && isVowel(token[pos - 1])\r\n                  || subMatch(-1, 4, ['EWSKI', 'EWSKY', 'OWSKI', 'OWSKY'])\r\n                  || token.substring(0, 3) == 'SCH')) {\r\n              addSecondary('', 'F');\r\n              pos++;\r\n      } else if(['ICZ', 'ITZ'].indexOf(token.substring(pos + 1, pos + 4)) > -1) {\r\n          addSecondary('TS', 'FX');\r\n          pos += 3;\r\n      }\r\n  }\r\n\r\n  function handleZ() {\r\n      if(token[pos + 1] == 'H') {\r\n          add('J');\r\n          pos++;\r\n      } else if(subMatch(1, 3, ['ZO', 'ZI', 'ZA'])\r\n              || (slavoGermanic && pos > 0 && token[pos - 1] != 'T')) {\r\n          addSecondary('S', 'TS');\r\n          pos++;\r\n      } else\r\n          addCompressedDouble('Z', 'S');\r\n  }\r\n\r\n  var san = (token.substring(0, 3) == 'SAN');\r\n  var startsWithVowel = isVowel(token[0]);\r\n  var slavoGermanic = token.match(/(W|K|CZ|WITZ)/);\r\n\r\n  if(subMatch(0, 2, ['GN', 'KN', 'PN', 'WR', 'PS'])) {\r\n    pos++;\r\n  }\r\n\r\n  while(pos < token.length) {\r\n    switch(token[pos]) {\r\n        case 'A': case 'E': case 'I': case 'O': case 'U': case 'Y':\r\n        case 'Ê': case 'É': case 'É': case'À':\r\n          if(pos == 0)\r\n            add('A');\r\n          break;\r\n      case 'B':\r\n        addCompressedDouble('B', 'P');\r\n        break;\r\n          case 'C':\r\n              handleC();\r\n              break;\r\n        case 'Ç':\r\n            add(\"S\");\r\n            break;\r\n        case 'D':\r\n          handleD();\r\n          break;\r\n        case 'F': case 'K': case 'N':\r\n          addCompressedDouble(token[pos]);\r\n          break;\r\n          case 'G':\r\n              handleG();\r\n              break;\r\n        case 'H':\r\n          handleH();\r\n          break;\r\n          case 'J':\r\n              handleJ();\r\n              break;\r\n        case 'L':\r\n          handleL();\r\n          break;\r\n        case 'M':\r\n          handleM();\r\n          break;\r\n        case 'Ñ':\r\n          add('N');\r\n          break;\r\n        case 'P':\r\n          handleP();\r\n          break;\r\n        case 'Q':\r\n          addCompressedDouble('Q', 'K');\r\n          break;\r\n        case 'R':\r\n          handleR();\r\n          break;\r\n          case 'S':\r\n              handleS();\r\n              break;\r\n          case 'T':\r\n              handleT();\r\n              break;\r\n        case 'V':\r\n          addCompressedDouble('V', 'F');\r\n          break;\r\n          case 'W':\r\n              handleW();\r\n              break;\r\n        case 'X':\r\n          handleX();\r\n          break;\r\n        case 'Z':\r\n          handleZ();\r\n          break;\r\n    }\r\n\r\n      if(primary.length >= maxLength && secondary.length >= maxLength) {\r\n          break;\r\n      }\r\n\r\n    pos++;\r\n  }\r\n\r\n  return [truncate(primary, maxLength), truncate(secondary, maxLength)];\r\n}\r\n\r\nfunction compare(stringA, stringB) {\r\n  var encodingsA = process(stringA),\r\n      encodingsB = process(stringB);\r\n\r\n  return encodingsA[0] == encodingsB[0] ||\r\n      encodingsA[1] == encodingsB[1];\r\n};\r\n\r\nDoubleMetaphone.compare = compare\r\nDoubleMetaphone.process = process;\r\nDoubleMetaphone.isVowel = isVowel;\r\n});\r\n\r\nrequire.define(\"/lib/natural/stemmers/porter_stemmer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Stemmer = require('./stemmer');\r\n\r\n// denote groups of consecutive consonants with a C and consecutive vowels\r\n// with a V.\r\nfunction categorizeGroups(token) {\r\n  return token.replace(/[^aeiou]+/g, 'C').replace(/[aeiouy]+/g, 'V');\r\n}\r\n\r\n// denote single consonants with a C and single vowels with a V\r\nfunction categorizeChars(token) {\r\n  return token.replace(/[^aeiou]/g, 'C').replace(/[aeiouy]/g, 'V');\r\n}\r\n\r\n// calculate the \"measure\" M of a word. M is the count of VC sequences dropping\r\n// an initial C if it exists and a trailing V if it exists.\r\nfunction measure(token) {\r\n  if(!token)\r\nreturn -1;\r\n\r\n  return categorizeGroups(token).replace(/^C/, '').replace(/V$/, '').length / 2;\r\n}\r\n\r\n// determine if a token end with a double consonant i.e. happ\r\nfunction endsWithDoublCons(token) {\r\n  return token.match(/([^aeiou])\\1$/);\r\n}\r\n\r\n// replace a pattern in a word. if a replacement occurs an optional callback\r\n// can be called to post-process the result. if no match is made NULL is\r\n// returned.\r\nfunction attemptReplace(token, pattern, replacement, callback) {\r\n  var result = null;\r\n\r\n  if((typeof pattern == 'string') && token.substr(0 - pattern.length) == pattern)\r\n      result = token.replace(new RegExp(pattern + '$'), replacement);\r\n  else if((pattern instanceof RegExp) && token.match(pattern))\r\n      result = token.replace(pattern, replacement);\r\n\r\n  if(result && callback)\r\n      return callback(result);\r\n  else\r\n      return result;\r\n}\r\n\r\n// attempt to replace a list of patterns/replacements on a token for a minimum\r\n// measure M.\r\nfunction attemptReplacePatterns(token, replacements, measureThreshold) {\r\n  var replacement = null;\r\n\r\n  for(var i = 0; i < replacements.length; i++) {\r\nif(measureThreshold == null || measure(attemptReplace(token, replacements[i][0], '')) > measureThreshold)\r\n    replacement = attemptReplace(token, replacements[i][0], replacements[i][1]);\r\n\r\nif(replacement)\r\n    break;\r\n  }\r\n\r\n  return replacement;\r\n}\r\n\r\n// replace a list of patterns/replacements on a word. if no match is made return\r\n// the original token.\r\nfunction replacePatterns(token, replacements, measureThreshold) {\r\n  var result = attemptReplacePatterns(token, replacements, measureThreshold);\r\n  token = result == null ? token : result;\r\n\r\n  return token;\r\n}\r\n\r\n// step 1a as defined for the porter stemmer algorithm.\r\nfunction step1a(token) {\r\n  if(token.match(/(ss|i)es$/))\r\n      return token.replace(/(ss|i)es$/, '$1');\r\n\r\n  if(token.substr(-1) == 's' && token.substr(-2, 1) != 's')\r\n      return token.replace(/s?$/, '');\r\n\r\n  return token;\r\n}\r\n\r\n// step 1b as defined for the porter stemmer algorithm.\r\nfunction step1b(token) {\r\n  if(token.substr(-3) == 'eed') {\r\nif(measure(token.substr(0, token.length - 3)) > 0)\r\n          return token.replace(/eed$/, 'ee');\r\n  } else {\r\nvar result = attemptReplace(token, /ed|ing$/, '', function(token) {\r\n    if(categorizeGroups(token).indexOf('V') > 0) {\r\n  var result = attemptReplacePatterns(token, [['at', 'ate'],  ['bl', 'ble'], ['iz', 'ize']]);\r\n\r\n  if(result)\r\n      return result;\r\n  else {\r\n      if(endsWithDoublCons(token) && token.match(/[^lsz]$/))\r\n    return token.replace(/([^aeiou])\\1$/, '$1');\r\n\r\n      if(measure(token) == 1 && categorizeChars(token).substr(-3) == 'CVC' && token.match(/[^wxy]$/))\r\n    return token + 'e';\r\n  }\r\n\r\n  return token;\r\n    }\r\n\r\n    return null;\r\n});\r\n\r\nif(result)\r\n    return result;\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\n// step 1c as defined for the porter stemmer algorithm.\r\nfunction step1c(token) {\r\n  if(categorizeGroups(token).substr(-2, 1) == 'V') {\r\n      if(token.substr(-1) == 'y')\r\n          return token.replace(/y$/, 'i');\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\n// step 2 as defined for the porter stemmer algorithm.\r\nfunction step2(token) {\r\n  return replacePatterns(token, [['ational', 'ate'], ['tional', 'tion'], ['enci', 'ence'], ['anci', 'ance'],\r\n      ['izer', 'ize'], ['abli', 'able'], ['alli', 'al'], ['entli', 'ent'], ['eli', 'e'],\r\n      ['ousli', 'ous'], ['ization', 'ize'], ['ation', 'ate'], ['ator', 'ate'],['alism', 'al'],\r\n      ['iveness', 'ive'], ['fulness', 'ful'], ['ousness', 'ous'], ['aliti', 'al'],\r\n      ['iviti', 'ive'], ['biliti', 'ble']], 0);\r\n}\r\n\r\n// step 3 as defined for the porter stemmer algorithm.\r\nfunction step3(token) {\r\n  return replacePatterns(token, [['icate', 'ic'], ['ative', ''], ['alize', 'al'],\r\n         ['iciti', 'ic'], ['ical', 'ic'], ['ful', ''], ['ness', '']], 0);\r\n}\r\n\r\n// step 4 as defined for the porter stemmer algorithm.\r\nfunction step4(token) {\r\n  return replacePatterns(token, [['al', ''], ['ance', ''], ['ence', ''], ['er', ''],\r\n      ['ic', ''], ['able', ''], ['ible', ''], ['ant', ''],\r\n      ['ement', ''], ['ment', ''], ['ent', ''], [/([st])ion/, '$1'], ['ou', ''], ['ism', ''],\r\n      ['ate', ''], ['iti', ''], ['ous', ''], ['ive', ''],\r\n      ['ize', '']], 1);\r\n}\r\n\r\n// step 5a as defined for the porter stemmer algorithm.\r\nfunction step5a(token) {\r\n  var m = measure(token);\r\n\r\n  if((m > 1 && token.substr(-1) == 'e') || (m == 1 && !(categorizeChars(token).substr(-4, 3) == 'CVC' && token.match(/[^wxy].$/))))\r\n      return token.replace(/e$/, '');\r\n\r\n  return token;\r\n}\r\n\r\n// step 5b as defined for the porter stemmer algorithm.\r\nfunction step5b(token) {\r\n  if(measure(token) > 1) {\r\n      if(endsWithDoublCons(token) && token.substr(-2) == 'll')\r\n         return token.replace(/ll$/, 'l');\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\nvar PorterStemmer = new Stemmer();\r\nmodule.exports = PorterStemmer;\r\n\r\n// perform full stemming algorithm on a single word\r\nPorterStemmer.stem = function(token) {\r\n  return step5b(step5a(step4(step3(step2(step1c(step1b(step1a(token.toLowerCase())))))))).toString();\r\n};\r\n\r\n//exports for tests\r\nPorterStemmer.step1a = step1a;\r\nPorterStemmer.step1b = step1b;\r\nPorterStemmer.step1c = step1c;\r\nPorterStemmer.step2 = step2;\r\nPorterStemmer.step3 = step3;\r\nPorterStemmer.step4 = step4;\r\nPorterStemmer.step5a = step5a;\r\nPorterStemmer.step5b = step5b;\r\n});\r\n\r\nrequire.define(\"/lib/natural/stemmers/stemmer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar stopwords = require('../util/stopwords');\r\nvar Tokenizer = require('../tokenizers/aggressive_tokenizer');\r\n\r\nmodule.exports = function() {\r\n  var stemmer = this;\r\n\r\n  stemmer.stem = function(token) {\r\n      return token;\r\n  };\r\n\r\n  stemmer.tokenizeAndStem = function(text, keepStops) {\r\n      var stemmedTokens = [];\r\n\r\n      new Tokenizer().tokenize(text).forEach(function(token) {\r\n          if(keepStops || stopwords.words.indexOf(token) == -1)\r\n              stemmedTokens.push(stemmer.stem(token));\r\n      });\r\n\r\n      return stemmedTokens;\r\n  };\r\n\r\n  stemmer.attach = function() {\r\n      String.prototype.stem = function() {\r\n          return stemmer.stem(this);\r\n      };\r\n\r\n      String.prototype.tokenizeAndStem = function(keepStops) {\r\n          return stemmer.tokenizeAndStem(this, keepStops);\r\n      };\r\n  };\r\n}\r\n});\r\n\r\nrequire.define(\"/lib/natural/tokenizers/aggressive_tokenizer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Tokenizer = require('./tokenizer'),\r\n  util = require('util');\r\n\r\nAggressiveTokenizer = function() {\r\n  Tokenizer.call(this);\r\n};\r\nutil.inherits(AggressiveTokenizer, Tokenizer);\r\n\r\nmodule.exports = AggressiveTokenizer;\r\n\r\nAggressiveTokenizer.prototype.tokenize = function(text) {\r\n  // break a string up into an array of tokens by anything non-word\r\n  return this.trim(text.split(/\\W+/));\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/tokenizers/tokenizer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Tokenizer = function() {\r\n};\r\n\r\nTokenizer.prototype.trim = function(array) {\r\n  if(array[array.length - 1] == '')\r\n      array.pop();\r\n\r\n  if(array[0] == '')\r\n      array.shift();\r\n\r\n  return array;\r\n};\r\n\r\n// expose an attach function that will patch String with a tokenize method\r\nTokenizer.prototype.attach = function() {\r\n  var tokenizer = this;\r\n\r\n  String.prototype.tokenize = function() {\r\n      return tokenizer.tokenize(this);\r\n  }\r\n};\r\n\r\nTokenizer.prototype.tokenize = function() {};\r\n\r\nmodule.exports = Tokenizer;\r\n});\r\n\r\nrequire.define(\"util\",function(require,module,exports,__dirname,__filename,process){var events = require('events');\r\n\r\nexports.print = function () {};\r\nexports.puts = function () {};\r\nexports.debug = function() {};\r\n\r\nexports.inspect = function(obj, showHidden, depth, colors) {\r\nvar seen = [];\r\n\r\nvar stylize = function(str, styleType) {\r\n  // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\r\n  var styles =\r\n      { 'bold' : [1, 22],\r\n        'italic' : [3, 23],\r\n        'underline' : [4, 24],\r\n        'inverse' : [7, 27],\r\n        'white' : [37, 39],\r\n        'grey' : [90, 39],\r\n        'black' : [30, 39],\r\n        'blue' : [34, 39],\r\n        'cyan' : [36, 39],\r\n        'green' : [32, 39],\r\n        'magenta' : [35, 39],\r\n        'red' : [31, 39],\r\n        'yellow' : [33, 39] };\r\n\r\n  var style =\r\n      { 'special': 'cyan',\r\n        'number': 'blue',\r\n        'boolean': 'yellow',\r\n        'undefined': 'grey',\r\n        'null': 'bold',\r\n        'string': 'green',\r\n        'date': 'magenta',\r\n        // \"name\": intentionally not styling\r\n        'regexp': 'red' }[styleType];\r\n\r\n  if (style) {\r\n    return '\\033[' + styles[style][0] + 'm' + str +\r\n           '\\033[' + styles[style][1] + 'm';\r\n  } else {\r\n    return str;\r\n  }\r\n};\r\nif (! colors) {\r\n  stylize = function(str, styleType) { return str; };\r\n}\r\n\r\nfunction format(value, recurseTimes) {\r\n  // Provide a hook for user-specified inspect functions.\r\n  // Check that value is an object with an inspect function on it\r\n  if (value && typeof value.inspect === 'function' &&\r\n      // Filter out the util module, it's inspect function is special\r\n      value !== exports &&\r\n      // Also filter out any prototype objects using the circular check.\r\n      !(value.constructor && value.constructor.prototype === value)) {\r\n    return value.inspect(recurseTimes);\r\n  }\r\n\r\n  // Primitive types cannot have properties\r\n  switch (typeof value) {\r\n    case 'undefined':\r\n      return stylize('undefined', 'undefined');\r\n\r\n    case 'string':\r\n      var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\r\n                                               .replace(/'/g, \"\\\\'\")\r\n                                               .replace(/\\\\\"/g, '\"') + '\\'';\r\n      return stylize(simple, 'string');\r\n\r\n    case 'number':\r\n      return stylize('' + value, 'number');\r\n\r\n    case 'boolean':\r\n      return stylize('' + value, 'boolean');\r\n  }\r\n  // For some reason typeof null is \"object\", so special case here.\r\n  if (value === null) {\r\n    return stylize('null', 'null');\r\n  }\r\n\r\n  // Look up the keys of the object.\r\n  var visible_keys = Object_keys(value);\r\n  var keys = showHidden ? Object_getOwnPropertyNames(value) : visible_keys;\r\n\r\n  // Functions without properties can be shortcutted.\r\n  if (typeof value === 'function' && keys.length === 0) {\r\n    if (isRegExp(value)) {\r\n      return stylize('' + value, 'regexp');\r\n    } else {\r\n      var name = value.name ? ': ' + value.name : '';\r\n      return stylize('[Function' + name + ']', 'special');\r\n    }\r\n  }\r\n\r\n  // Dates without properties can be shortcutted\r\n  if (isDate(value) && keys.length === 0) {\r\n    return stylize(value.toUTCString(), 'date');\r\n  }\r\n\r\n  var base, type, braces;\r\n  // Determine the object type\r\n  if (isArray(value)) {\r\n    type = 'Array';\r\n    braces = ['[', ']'];\r\n  } else {\r\n    type = 'Object';\r\n    braces = ['{', '}'];\r\n  }\r\n\r\n  // Make functions say that they are functions\r\n  if (typeof value === 'function') {\r\n    var n = value.name ? ': ' + value.name : '';\r\n    base = (isRegExp(value)) ? ' ' + value : ' [Function' + n + ']';\r\n  } else {\r\n    base = '';\r\n  }\r\n\r\n  // Make dates with properties first say the date\r\n  if (isDate(value)) {\r\n    base = ' ' + value.toUTCString();\r\n  }\r\n\r\n  if (keys.length === 0) {\r\n    return braces[0] + base + braces[1];\r\n  }\r\n\r\n  if (recurseTimes < 0) {\r\n    if (isRegExp(value)) {\r\n      return stylize('' + value, 'regexp');\r\n    } else {\r\n      return stylize('[Object]', 'special');\r\n    }\r\n  }\r\n\r\n  seen.push(value);\r\n\r\n  var output = keys.map(function(key) {\r\n    var name, str;\r\n    if (value.__lookupGetter__) {\r\n      if (value.__lookupGetter__(key)) {\r\n        if (value.__lookupSetter__(key)) {\r\n          str = stylize('[Getter/Setter]', 'special');\r\n        } else {\r\n          str = stylize('[Getter]', 'special');\r\n        }\r\n      } else {\r\n        if (value.__lookupSetter__(key)) {\r\n          str = stylize('[Setter]', 'special');\r\n        }\r\n      }\r\n    }\r\n    if (visible_keys.indexOf(key) < 0) {\r\n      name = '[' + key + ']';\r\n    }\r\n    if (!str) {\r\n      if (seen.indexOf(value[key]) < 0) {\r\n        if (recurseTimes === null) {\r\n          str = format(value[key]);\r\n        } else {\r\n          str = format(value[key], recurseTimes - 1);\r\n        }\r\n        if (str.indexOf('\\n') > -1) {\r\n          if (isArray(value)) {\r\n            str = str.split('\\n').map(function(line) {\r\n              return '  ' + line;\r\n            }).join('\\n').substr(2);\r\n          } else {\r\n            str = '\\n' + str.split('\\n').map(function(line) {\r\n              return '   ' + line;\r\n            }).join('\\n');\r\n          }\r\n        }\r\n      } else {\r\n        str = stylize('[Circular]', 'special');\r\n      }\r\n    }\r\n    if (typeof name === 'undefined') {\r\n      if (type === 'Array' && key.match(/^\\d+$/)) {\r\n        return str;\r\n      }\r\n      name = JSON.stringify('' + key);\r\n      if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\r\n        name = name.substr(1, name.length - 2);\r\n        name = stylize(name, 'name');\r\n      } else {\r\n        name = name.replace(/'/g, \"\\\\'\")\r\n                   .replace(/\\\\\"/g, '\"')\r\n                   .replace(/(^\"|\"$)/g, \"'\");\r\n        name = stylize(name, 'string');\r\n      }\r\n    }\r\n\r\n    return name + ': ' + str;\r\n  });\r\n\r\n  seen.pop();\r\n\r\n  var numLinesEst = 0;\r\n  var length = output.reduce(function(prev, cur) {\r\n    numLinesEst++;\r\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\r\n    return prev + cur.length + 1;\r\n  }, 0);\r\n\r\n  if (length > 50) {\r\n    output = braces[0] +\r\n             (base === '' ? '' : base + '\\n ') +\r\n             ' ' +\r\n             output.join(',\\n  ') +\r\n             ' ' +\r\n             braces[1];\r\n\r\n  } else {\r\n    output = braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\r\n  }\r\n\r\n  return output;\r\n}\r\nreturn format(obj, (typeof depth === 'undefined' ? 2 : depth));\r\n};\r\n\r\n\r\nfunction isArray(ar) {\r\nreturn ar instanceof Array ||\r\n       Array.isArray(ar) ||\r\n       (ar && ar !== Object.prototype && isArray(ar.__proto__));\r\n}\r\n\r\n\r\nfunction isRegExp(re) {\r\nreturn re instanceof RegExp ||\r\n  (typeof re === 'object' && Object.prototype.toString.call(re) === '[object RegExp]');\r\n}\r\n\r\n\r\nfunction isDate(d) {\r\nif (d instanceof Date) return true;\r\nif (typeof d !== 'object') return false;\r\nvar properties = Date.prototype && Object_getOwnPropertyNames(Date.prototype);\r\nvar proto = d.__proto__ && Object_getOwnPropertyNames(d.__proto__);\r\nreturn JSON.stringify(proto) === JSON.stringify(properties);\r\n}\r\n\r\nfunction pad(n) {\r\nreturn n < 10 ? '0' + n.toString(10) : n.toString(10);\r\n}\r\n\r\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\r\n            'Oct', 'Nov', 'Dec'];\r\n\r\n// 26 Feb 16:19:34\r\nfunction timestamp() {\r\nvar d = new Date();\r\nvar time = [pad(d.getHours()),\r\n            pad(d.getMinutes()),\r\n            pad(d.getSeconds())].join(':');\r\nreturn [d.getDate(), months[d.getMonth()], time].join(' ');\r\n}\r\n\r\nexports.log = function (msg) {};\r\n\r\nexports.pump = null;\r\n\r\nvar Object_keys = Object.keys || function (obj) {\r\n  var res = [];\r\n  for (var key in obj) res.push(key);\r\n  return res;\r\n};\r\n\r\nvar Object_getOwnPropertyNames = Object.getOwnPropertyNames || function (obj) {\r\n  var res = [];\r\n  for (var key in obj) {\r\n      if (Object.hasOwnProperty.call(obj, key)) res.push(key);\r\n  }\r\n  return res;\r\n};\r\n\r\nvar Object_create = Object.create || function (prototype, properties) {\r\n  // from es5-shim\r\n  var object;\r\n  if (prototype === null) {\r\n      object = { '__proto__' : null };\r\n  }\r\n  else {\r\n      if (typeof prototype !== 'object') {\r\n          throw new TypeError(\r\n              'typeof prototype[' + (typeof prototype) + '] != \\'object\\''\r\n          );\r\n      }\r\n      var Type = function () {};\r\n      Type.prototype = prototype;\r\n      object = new Type();\r\n      object.__proto__ = prototype;\r\n  }\r\n  if (typeof properties !== 'undefined' && Object.defineProperties) {\r\n      Object.defineProperties(object, properties);\r\n  }\r\n  return object;\r\n};\r\n\r\nexports.inherits = function(ctor, superCtor) {\r\nctor.super_ = superCtor;\r\nctor.prototype = Object_create(superCtor.prototype, {\r\n  constructor: {\r\n    value: ctor,\r\n    enumerable: false,\r\n    writable: true,\r\n    configurable: true\r\n  }\r\n});\r\n};\r\n});\r\n\r\nrequire.define(\"events\",function(require,module,exports,__dirname,__filename,process){if (!process.EventEmitter) process.EventEmitter = function () {};\r\n\r\nvar EventEmitter = exports.EventEmitter = process.EventEmitter;\r\nvar isArray = typeof Array.isArray === 'function'\r\n  ? Array.isArray\r\n  : function (xs) {\r\n      return Object.prototype.toString.call(xs) === '[object Array]'\r\n  }\r\n;\r\n\r\n// By default EventEmitters will print a warning if more than\r\n// 10 listeners are added to it. This is a useful default which\r\n// helps finding memory leaks.\r\n//\r\n// Obviously not all Emitters should be limited to 10. This function allows\r\n// that to be increased. Set to zero for unlimited.\r\nvar defaultMaxListeners = 10;\r\nEventEmitter.prototype.setMaxListeners = function(n) {\r\nif (!this._events) this._events = {};\r\nthis._events.maxListeners = n;\r\n};\r\n\r\n\r\nEventEmitter.prototype.emit = function(type) {\r\n// If there is no 'error' event listener then throw.\r\nif (type === 'error') {\r\n  if (!this._events || !this._events.error ||\r\n      (isArray(this._events.error) && !this._events.error.length))\r\n  {\r\n    if (arguments[1] instanceof Error) {\r\n      throw arguments[1]; // Unhandled 'error' event\r\n    } else {\r\n      throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nif (!this._events) return false;\r\nvar handler = this._events[type];\r\nif (!handler) return false;\r\n\r\nif (typeof handler == 'function') {\r\n  switch (arguments.length) {\r\n    // fast cases\r\n    case 1:\r\n      handler.call(this);\r\n      break;\r\n    case 2:\r\n      handler.call(this, arguments[1]);\r\n      break;\r\n    case 3:\r\n      handler.call(this, arguments[1], arguments[2]);\r\n      break;\r\n    // slower\r\n    default:\r\n      var args = Array.prototype.slice.call(arguments, 1);\r\n      handler.apply(this, args);\r\n  }\r\n  return true;\r\n\r\n} else if (isArray(handler)) {\r\n  var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n  var listeners = handler.slice();\r\n  for (var i = 0, l = listeners.length; i < l; i++) {\r\n    listeners[i].apply(this, args);\r\n  }\r\n  return true;\r\n\r\n} else {\r\n  return false;\r\n}\r\n};\r\n\r\n// EventEmitter is defined in src/node_events.cc\r\n// EventEmitter.prototype.emit() is also defined there.\r\nEventEmitter.prototype.addListener = function(type, listener) {\r\nif ('function' !== typeof listener) {\r\n  throw new Error('addListener only takes instances of Function');\r\n}\r\n\r\nif (!this._events) this._events = {};\r\n\r\n// To avoid recursion in the case that type == \"newListeners\"! Before\r\n// adding it to the listeners, first emit \"newListeners\".\r\nthis.emit('newListener', type, listener);\r\n\r\nif (!this._events[type]) {\r\n  // Optimize the case of one listener. Don't need the extra array object.\r\n  this._events[type] = listener;\r\n} else if (isArray(this._events[type])) {\r\n\r\n  // Check for listener leak\r\n  if (!this._events[type].warned) {\r\n    var m;\r\n    if (this._events.maxListeners !== undefined) {\r\n      m = this._events.maxListeners;\r\n    } else {\r\n      m = defaultMaxListeners;\r\n    }\r\n\r\n    if (m && m > 0 && this._events[type].length > m) {\r\n      this._events[type].warned = true;\r\n      console.error('(node) warning: possible EventEmitter memory ' +\r\n                    'leak detected. %d listeners added. ' +\r\n                    'Use emitter.setMaxListeners() to increase limit.',\r\n                    this._events[type].length);\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  // If we've already got an array, just append.\r\n  this._events[type].push(listener);\r\n} else {\r\n  // Adding the second element, need to change to array.\r\n  this._events[type] = [this._events[type], listener];\r\n}\r\n\r\nreturn this;\r\n};\r\n\r\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\r\n\r\nEventEmitter.prototype.once = function(type, listener) {\r\nvar self = this;\r\nself.on(type, function g() {\r\n  self.removeListener(type, g);\r\n  listener.apply(this, arguments);\r\n});\r\n\r\nreturn this;\r\n};\r\n\r\nEventEmitter.prototype.removeListener = function(type, listener) {\r\nif ('function' !== typeof listener) {\r\n  throw new Error('removeListener only takes instances of Function');\r\n}\r\n\r\n// does not use listeners(), so no side effect of creating _events[type]\r\nif (!this._events || !this._events[type]) return this;\r\n\r\nvar list = this._events[type];\r\n\r\nif (isArray(list)) {\r\n  var i = list.indexOf(listener);\r\n  if (i < 0) return this;\r\n  list.splice(i, 1);\r\n  if (list.length == 0)\r\n    delete this._events[type];\r\n} else if (this._events[type] === listener) {\r\n  delete this._events[type];\r\n}\r\n\r\nreturn this;\r\n};\r\n\r\nEventEmitter.prototype.removeAllListeners = function(type) {\r\n// does not use listeners(), so no side effect of creating _events[type]\r\nif (type && this._events && this._events[type]) this._events[type] = null;\r\nreturn this;\r\n};\r\n\r\nEventEmitter.prototype.listeners = function(type) {\r\nif (!this._events) this._events = {};\r\nif (!this._events[type]) this._events[type] = [];\r\nif (!isArray(this._events[type])) {\r\n  this._events[type] = [this._events[type]];\r\n}\r\nreturn this._events[type];\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/stemmers/porter_stemmer_ru.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2012, Polyakov Vladimir, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Stemmer = require('./stemmer_ru');\r\n\r\nvar PorterStemmer = new Stemmer();\r\nmodule.exports = PorterStemmer;\r\n\r\nfunction attemptReplacePatterns(token, patterns) {\r\nvar replacement = null;\r\nvar i = 0, isReplaced = false;\r\nwhile ((i < patterns.length) && !isReplaced) {\r\n  if (patterns[i][0].test(token)) {\r\n    replacement = token.replace(patterns[i][0], patterns[i][1]);\r\n    isReplaced = true;\r\n  }\r\n  i++;\r\n}\r\nreturn replacement;\r\n};\r\n\r\nfunction perfectiveGerund(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n    [/[ая]в(ши|шись)$/g, ''],\r\n    [/(ив|ивши|ившись|ывши|ывшись|ыв)$/g, '']\r\n  ]);\r\nreturn result;\r\n};\r\n\r\nfunction adjectival(token) {\r\nvar result = adjective(token);\r\nif (result != null) {\r\n  var pariticipleResult = participle(result);\r\n  result = pariticipleResult ? pariticipleResult : result;\r\n}\r\nreturn result;\r\n};\r\n\r\nfunction adjective(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n    [/(ее|ие|ые|ое|ими|ыми|ей|ий|ый|ой|ем|им|ым|ом|его|ого|ему|ому|их|ых|ую|юю|ая|яя|ою|ею)$/g, '']\r\n  ]);\r\nreturn result;\r\n};\r\n\r\nfunction participle(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/([ая])(ем|нн|вш|ющ|щ)$/g, '$1'],\r\n  [/(ивш|ывш|ующ)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\nfunction reflexive(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/(ся|сь)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\nfunction verb(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/([ая])(ла|на|ете|йте|ли|й|л|ем|н|ло|но|ет|ют|ны|ть|ешь|нно)$/g, '$1'],\r\n  [/(ила|ыла|ена|ейте|уйте|ите|или|ыли|ей|уй|ил|ыл|им|ым|ен|ило|ыло|ено|ят|ует|ит|ыт|ены|ить|ыть|ишь|ую|ю)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\nfunction noun(token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/(а|ев|ов|ие|ье|е|иями|ями|ами|еи|ии|и|ией|ей|ой|ий|й|иям|ям|ием|ем|ам|ом|о|у|ах|иях|ях|ы|ь|ию|ью|ю|ия|ья|я)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\nfunction superlative (token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/(ейш|ейше)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\nfunction derivational (token) {\r\nvar result = attemptReplacePatterns(token, [\r\n  [/(ост|ость)$/g, '']\r\n]);\r\nreturn result;\r\n};\r\n\r\n// perform full stemming algorithm on a single word\r\nPorterStemmer.stem = function(token) {\r\ntoken = token.toLowerCase().replace(/ё/g, 'е');\r\nvar volwesRegexp = /^(.*?[аеиоюяуыиэ])(.*)$/g;\r\nvar RV = volwesRegexp.exec(token);\r\nif (!RV || RV.length < 3) {\r\n  return token;\r\n}\r\nvar head = RV[1];\r\nRV = RV[2];\r\nvolwesRegexp.lastIndex = 0;\r\nvar R2 = volwesRegexp.exec(RV);\r\nvar result = perfectiveGerund(RV);\r\nif (result === null) {\r\n  var resultReflexive = reflexive(RV) || RV;\r\n  result = adjectival(resultReflexive);\r\n  if (result === null) {\r\n    result = verb(resultReflexive);\r\n    if (result === null) {\r\n      result = noun(resultReflexive);\r\n      if (result === null) {\r\n        result = resultReflexive;\r\n      }\r\n    }\r\n  }\r\n}\r\nresult = result.replace(/и$/g, '');\r\nvar derivationalResult = result\r\nif (R2 && R2[2]) {\r\n  derivationalResult = derivational(R2[2]);\r\n  if (derivationalResult != null) {\r\n    derivationalResult = derivational(result);\r\n  } else {\r\n    derivationalResult = result;\r\n  }\r\n}\r\n\r\nvar superlativeResult = superlative(derivationalResult) || derivationalResult;\r\n\r\nsuperlativeResult = superlativeResult.replace(/(н)н/g, '$1');\r\nsuperlativeResult = superlativeResult.replace(/ь$/g, '');\r\nreturn head + superlativeResult;\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/stemmers/stemmer_ru.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2012, Polyakov Vladimir, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar stopwords = require('../util/stopwords_ru');\r\nvar Tokenizer = require('../tokenizers/aggressive_tokenizer_ru');\r\n\r\nmodule.exports = function() {\r\n  var stemmer = this;\r\n\r\n  stemmer.stem = function(token) {\r\n      return token;\r\n  };\r\n\r\n  stemmer.tokenizeAndStem = function(text, keepStops) {\r\n      var stemmedTokens = [];\r\n\r\n      new Tokenizer().tokenize(text).forEach(function(token) {\r\n          if (keepStops || stopwords.words.indexOf(token) == -1) {\r\n              var resultToken = token.toLowerCase();\r\n              if (resultToken.match(new RegExp('[а-яё0-9]+', 'gi'))) {\r\n                  resultToken = stemmer.stem(resultToken);\r\n              }\r\n              stemmedTokens.push(resultToken);\r\n          }\r\n      });\r\n\r\n      return stemmedTokens;\r\n  };\r\n\r\n  stemmer.attach = function() {\r\n      String.prototype.stem = function() {\r\n          return stemmer.stem(this);\r\n      };\r\n\r\n      String.prototype.tokenizeAndStem = function(keepStops) {\r\n          return stemmer.tokenizeAndStem(this, keepStops);\r\n      };\r\n  };\r\n}\r\n});\r\n\r\nrequire.define(\"/lib/natural/util/stopwords_ru.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Polyakov Vladimir, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n// a list of commonly used words that have little meaning and can be excluded\r\n// from analysis.\r\nvar words = [\r\n  'о', 'после', 'все', 'также', 'и', 'другие', 'все', 'как', 'во', 'быть',\r\n  'потому', 'был', 'до', 'являюсь', 'между', 'все', 'но', 'от', 'иди', 'могу',\r\n  'подойди', 'мог', 'делал', 'делаю', 'каждый', 'для', 'откуда', 'иметь', 'имел',\r\n  'он', 'имеет', 'её', 'здесь', 'его', 'как', 'если', 'в', 'оно', 'за',\r\n  'делать', 'много', 'я', 'может быть', 'более', 'самый', 'должен',\r\n  'мой', 'никогда', 'сейчас', 'из', 'на', 'только', 'или', 'другой', 'другая',\r\n  'другое', 'наше', 'вне', 'конец', 'сказал', 'сказала', 'также', 'видел', 'c',\r\n  'немного', 'все еще', 'так', 'затем', 'тот', 'их', 'там', 'этот', 'они', 'те',\r\n  'через', 'тоже', 'под', 'над', 'очень', 'был', 'путь', 'мы', 'хорошо',\r\n  'что', 'где', 'который', 'пока', 'кто', 'с кем', 'хотел бы', 'ты', 'твои',\r\n  'а', 'б', 'в', 'г', 'д', 'е', 'ё', 'ж', 'з', 'и', 'й', 'к', 'л', 'м', 'н',\r\n  'o', 'п', 'р', 'с', 'т', 'у', 'ф', 'х', 'ц', 'ч', 'ш', 'щ', 'ъ', 'ы', 'ь',\r\n  'э', 'ю', 'я','$', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '_'];\r\n\r\n// tell the world about the noise words.\r\nexports.words = words;\r\n});\r\n\r\nrequire.define(\"/lib/natural/tokenizers/aggressive_tokenizer_ru.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Tokenizer = require('./tokenizer'),\r\n  util = require('util');\r\n\r\nAggressiveTokenizer = function() {\r\n  Tokenizer.call(this);\r\n};\r\nutil.inherits(AggressiveTokenizer, Tokenizer);\r\n\r\nmodule.exports = AggressiveTokenizer;\r\n\r\nAggressiveTokenizer.prototype.clearEmptyString = function(array) {\r\nreturn array.filter(function(a) {\r\n  return a != '';\r\n});\r\n};\r\n\r\nAggressiveTokenizer.prototype.clearText = function(text) {\r\nreturn text.replace(new RegExp('«|»|!|\\\\?', 'g'), ' ');\r\n};\r\n\r\nAggressiveTokenizer.prototype.tokenize = function(text) {\r\n  // break a string up into an array of tokens by anything non-word\r\n  text = this.clearText(text);\r\n  return this.clearEmptyString(text.split(/-|[|$|\\b|\\(|\\)|[ \\s\\xA0'\\.,:\"]+/gi));\r\n};\r\n});\r\n\r\nrequire.define(\"/lib/natural/stemmers/lancaster_stemmer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar Stemmer = require('./stemmer');\r\nvar ruleTable = require('./lancaster_rules').rules;\r\n\r\nfunction acceptable(candidate) {\r\n  if (candidate.match(/^[aeiou]/))\r\n      return (candidate.length > 1);\r\n  else\r\n      return (candidate.length > 2 && candidate.match(/[aeiouy]/));\r\n}\r\n\r\n// take a token, look up the applicatble rule section and attempt some stemming!\r\nfunction applyRuleSection(token, intact) {\r\n  var section = token.substr( - 1);\r\n  var rules = ruleTable[section];\r\n\r\n  if (rules) {\r\n      for (var i = 0; i < rules.length; i++) {\r\n          if ((intact || !rules[i].intact)\r\n          // only apply intact rules to intact tokens\r\n          && token.substr(0 - rules[i].pattern.length) == rules[i].pattern) {\r\n              // hack off only as much as the rule indicates\r\n              var result = token.substr(0, token.length - rules[i].size);\r\n\r\n              // if the rules wants us to apply an appendage do so\r\n              if (rules[i].appendage)\r\n                  result += rules[i].appendage;\r\n\r\n              if (acceptable(result)) {\r\n                  token = result;\r\n\r\n                  // see what the rules wants to do next\r\n                  if (rules[i].continuation) {\r\n                      // this rule thinks there still might be stem left. keep at it.\r\n                      // since we've applied a change we'll pass false in for intact\r\n                      return applyRuleSection(result, false);\r\n                  } else {\r\n                      // the rule thinks we're done stemming. drop out.\r\n                      return result;\r\n                  }\r\n              }\r\n          }\r\n      }\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\nvar LancasterStemmer = new Stemmer();\r\nmodule.exports = LancasterStemmer;\r\n\r\nLancasterStemmer.stem = function(token) {\r\n  return applyRuleSection(token.toLowerCase(), true);\r\n}});\r\n\r\nrequire.define(\"/lib/natural/stemmers/lancaster_rules.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nexports.rules = {\r\n  \"a\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"ia\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"a\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"b\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"bb\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"c\": [\r\n      {\r\n          \"appendage\": \"s\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ytic\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ic\",\r\n          \"size\": \"2\"\r\n     },\r\n      {\r\n          \"appendage\": \"t\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"nc\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"d\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"dd\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ied\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"appendage\": \"s\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ceed\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"eed\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ed\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"hood\",\r\n          \"size\": \"4\"\r\n      }\r\n  ],\r\n  \"e\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"e\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"f\": [\r\n      {\r\n          \"appendage\": \"v\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"lief\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"if\",\r\n          \"size\": \"2\"\r\n      }\r\n  ],\r\n  \"g\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ing\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"iag\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ag\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"gg\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"h\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"th\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"c\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"guish\",\r\n          \"size\": \"5\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ish\",\r\n          \"size\": \"3\"\r\n      }\r\n  ],\r\n  \"i\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"i\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"i\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"j\": [\r\n      {\r\n          \"appendage\": \"d\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ij\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"s\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"fuj\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"d\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"uj\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"d\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"oj\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"r\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"hej\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"t\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"verj\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"t\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"misj\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"d\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"nj\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"s\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"j\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"l\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ifiabl\",\r\n          \"size\": \"6\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"iabl\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"abl\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ibl\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"appendage\": \"l\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"bil\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"cl\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"iful\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ful\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ul\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ial\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ual\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"al\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ll\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"m\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ium\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"um\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ism\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"mm\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"n\": [\r\n      {\r\n          \"appendage\": \"j\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"sion\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"appendage\": \"c\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"xion\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ion\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ian\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"an\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"een\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"en\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"nn\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"p\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ship\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"pp\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"r\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"er\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ear\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ar\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"or\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ur\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"rr\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"tr\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ier\",\r\n          \"size\": \"3\"\r\n      }\r\n  ],\r\n  \"s\": [\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ies\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"sis\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"is\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ness\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ss\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ous\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": true,\r\n          \"pattern\": \"us\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": true,\r\n          \"pattern\": \"s\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"s\",\r\n          \"size\": \"0\"\r\n      }\r\n  ],\r\n  \"t\": [\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"plicat\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"at\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ment\",\r\n          \"size\": \"4\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ent\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ant\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"appendage\": \"b\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ript\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"b\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"orpt\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"duct\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"sumpt\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"i\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"cept\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"v\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"olut\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"sist\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ist\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"tt\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"u\": [\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"iqu\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ogu\",\r\n          \"size\": \"1\"\r\n      }\r\n  ],\r\n  \"v\": [\r\n      {\r\n          \"appendage\": \"j\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"siv\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"eiv\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"iv\",\r\n          \"size\": \"2\"\r\n      }\r\n  ],\r\n  \"y\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"bly\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"appendage\": \"y\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ily\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ply\",\r\n          \"size\": \"0\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ly\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ogy\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"phy\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"omy\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"opy\",\r\n          \"size\": \"1\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ity\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ety\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"lty\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"istry\",\r\n          \"size\": \"5\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ary\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ory\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"ify\",\r\n          \"size\": \"3\"\r\n      },\r\n      {\r\n          \"appendage\": \"t\",\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"ncy\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"acy\",\r\n          \"size\": \"3\"\r\n      }\r\n  ],\r\n  \"z\": [\r\n      {\r\n          \"continuation\": true,\r\n          \"intact\": false,\r\n          \"pattern\": \"iz\",\r\n          \"size\": \"2\"\r\n      },\r\n      {\r\n          \"appendage\": \"s\",\r\n          \"continuation\": false,\r\n          \"intact\": false,\r\n          \"pattern\": \"yz\",\r\n          \"size\": \"1\"\r\n      }\r\n  ]\r\n};\r\n\r\n});\r\n\r\nrequire.define(\"/lib/natural/tokenizers/regexp_tokenizer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Rob Ellis, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar util = require(\"util\");\r\nvar _ = require('underscore')._;\r\nvar Tokenizer = require('./tokenizer');\r\n\r\n// Base Class for RegExp Matching\r\nRegexpTokenizer = function(options) {\r\n  var options = options || {};\r\n  this._pattern = options.pattern || this._pattern;\r\n  this.discardEmpty = options.discardEmpty || true;\r\n\r\n  // Match and split on GAPS not the actual WORDS\r\n  this._gaps = options.gaps;\r\n\r\n  if (this._gaps === undefined) {\r\n      this._gaps = true;\r\n  }\r\n}\r\n\r\nutil.inherits(RegexpTokenizer, Tokenizer);\r\n\r\nRegexpTokenizer.prototype.tokenize = function(s) {\r\n  var results;\r\n\r\n  if (this._gaps) {\r\n      results = s.split(this._pattern);\r\n      return (this.discardEmpty) ? _.without(results,'',' ') : results;\r\n  } else {\r\n      return s.match(this._pattern);\r\n  }\r\n}\r\n\r\nexports.RegexpTokenizer = RegexpTokenizer;\r\n\r\n/***\r\n* A tokenizer that divides a text into sequences of alphabetic and\r\n* non-alphabetic characters.  E.g.:\r\n*\r\n*      >>> WordTokenizer().tokenize(\"She said 'hello'.\")\r\n*      ['She', 'said', 'hello']\r\n*\r\n*/\r\nWordTokenizer = function(options) {\r\n  this._pattern = /\\W+/;\r\n  RegexpTokenizer.call(this,options)\r\n}\r\n\r\nutil.inherits(WordTokenizer, RegexpTokenizer);\r\nexports.WordTokenizer = WordTokenizer;\r\n\r\n/***\r\n* A tokenizer that divides a text into sequences of alphabetic and\r\n* non-alphabetic characters.  E.g.:\r\n*\r\n*      >>> WordPunctTokenizer().tokenize(\"She said 'hello'.\")\r\n*      ['She', 'said', \"'\", 'hello', \"'.\"]\r\n*\r\n*/\r\nWordPunctTokenizer = function(options) {\r\n  this._pattern = new RegExp(/(\\w+|\\!|\\'|\\\"\")/i);\r\n  RegexpTokenizer.call(this,options)\r\n}\r\n\r\nutil.inherits(WordPunctTokenizer, RegexpTokenizer);\r\nexports.WordPunctTokenizer = WordPunctTokenizer;\r\n});\r\n\r\nrequire.define(\"/node_modules/underscore/package.json\",function(require,module,exports,__dirname,__filename,process){module.exports = {\"main\":\"underscore.js\"}});\r\n\r\nrequire.define(\"/node_modules/underscore/underscore.js\",function(require,module,exports,__dirname,__filename,process){//     Underscore.js 1.3.3\r\n//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.\r\n//     Underscore is freely distributable under the MIT license.\r\n//     Portions of Underscore are inspired or borrowed from Prototype,\r\n//     Oliver Steele's Functional, and John Resig's Micro-Templating.\r\n//     For all details and documentation:\r\n//     http://documentcloud.github.com/underscore\r\n\r\n(function() {\r\n\r\n// Baseline setup\r\n// --------------\r\n\r\n// Establish the root object, `window` in the browser, or `global` on the server.\r\nvar root = this;\r\n\r\n// Save the previous value of the `_` variable.\r\nvar previousUnderscore = root._;\r\n\r\n// Establish the object that gets returned to break out of a loop iteration.\r\nvar breaker = {};\r\n\r\n// Save bytes in the minified (but not gzipped) version:\r\nvar ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\r\n\r\n// Create quick reference variables for speed access to core prototypes.\r\nvar slice            = ArrayProto.slice,\r\n    unshift          = ArrayProto.unshift,\r\n    toString         = ObjProto.toString,\r\n    hasOwnProperty   = ObjProto.hasOwnProperty;\r\n\r\n// All **ECMAScript 5** native function implementations that we hope to use\r\n// are declared here.\r\nvar\r\n  nativeForEach      = ArrayProto.forEach,\r\n  nativeMap          = ArrayProto.map,\r\n  nativeReduce       = ArrayProto.reduce,\r\n  nativeReduceRight  = ArrayProto.reduceRight,\r\n  nativeFilter       = ArrayProto.filter,\r\n  nativeEvery        = ArrayProto.every,\r\n  nativeSome         = ArrayProto.some,\r\n  nativeIndexOf      = ArrayProto.indexOf,\r\n  nativeLastIndexOf  = ArrayProto.lastIndexOf,\r\n  nativeIsArray      = Array.isArray,\r\n  nativeKeys         = Object.keys,\r\n  nativeBind         = FuncProto.bind;\r\n\r\n// Create a safe reference to the Underscore object for use below.\r\nvar _ = function(obj) { return new wrapper(obj); };\r\n\r\n// Export the Underscore object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = _;\r\n  }\r\n  exports._ = _;\r\n} else {\r\n  root['_'] = _;\r\n}\r\n\r\n// Current version.\r\n_.VERSION = '1.3.3';\r\n\r\n// Collection Functions\r\n// --------------------\r\n\r\n// The cornerstone, an `each` implementation, aka `forEach`.\r\n// Handles objects with the built-in `forEach`, arrays, and raw objects.\r\n// Delegates to **ECMAScript 5**'s native `forEach` if available.\r\nvar each = _.each = _.forEach = function(obj, iterator, context) {\r\n  if (obj == null) return;\r\n  if (nativeForEach && obj.forEach === nativeForEach) {\r\n    obj.forEach(iterator, context);\r\n  } else if (obj.length === +obj.length) {\r\n    for (var i = 0, l = obj.length; i < l; i++) {\r\n      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;\r\n    }\r\n  } else {\r\n    for (var key in obj) {\r\n      if (_.has(obj, key)) {\r\n        if (iterator.call(context, obj[key], key, obj) === breaker) return;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// Return the results of applying the iterator to each element.\r\n// Delegates to **ECMAScript 5**'s native `map` if available.\r\n_.map = _.collect = function(obj, iterator, context) {\r\n  var results = [];\r\n  if (obj == null) return results;\r\n  if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\r\n  each(obj, function(value, index, list) {\r\n    results[results.length] = iterator.call(context, value, index, list);\r\n  });\r\n  if (obj.length === +obj.length) results.length = obj.length;\r\n  return results;\r\n};\r\n\r\n// **Reduce** builds up a single result from a list of values, aka `inject`,\r\n// or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\r\n_.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\r\n  var initial = arguments.length > 2;\r\n  if (obj == null) obj = [];\r\n  if (nativeReduce && obj.reduce === nativeReduce) {\r\n    if (context) iterator = _.bind(iterator, context);\r\n    return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\r\n  }\r\n  each(obj, function(value, index, list) {\r\n    if (!initial) {\r\n      memo = value;\r\n      initial = true;\r\n    } else {\r\n      memo = iterator.call(context, memo, value, index, list);\r\n    }\r\n  });\r\n  if (!initial) throw new TypeError('Reduce of empty array with no initial value');\r\n  return memo;\r\n};\r\n\r\n// The right-associative version of reduce, also known as `foldr`.\r\n// Delegates to **ECMAScript 5**'s native `reduceRight` if available.\r\n_.reduceRight = _.foldr = function(obj, iterator, memo, context) {\r\n  var initial = arguments.length > 2;\r\n  if (obj == null) obj = [];\r\n  if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\r\n    if (context) iterator = _.bind(iterator, context);\r\n    return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\r\n  }\r\n  var reversed = _.toArray(obj).reverse();\r\n  if (context && !initial) iterator = _.bind(iterator, context);\r\n  return initial ? _.reduce(reversed, iterator, memo, context) : _.reduce(reversed, iterator);\r\n};\r\n\r\n// Return the first value which passes a truth test. Aliased as `detect`.\r\n_.find = _.detect = function(obj, iterator, context) {\r\n  var result;\r\n  any(obj, function(value, index, list) {\r\n    if (iterator.call(context, value, index, list)) {\r\n      result = value;\r\n      return true;\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\n// Return all the elements that pass a truth test.\r\n// Delegates to **ECMAScript 5**'s native `filter` if available.\r\n// Aliased as `select`.\r\n_.filter = _.select = function(obj, iterator, context) {\r\n  var results = [];\r\n  if (obj == null) return results;\r\n  if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\r\n  each(obj, function(value, index, list) {\r\n    if (iterator.call(context, value, index, list)) results[results.length] = value;\r\n  });\r\n  return results;\r\n};\r\n\r\n// Return all the elements for which a truth test fails.\r\n_.reject = function(obj, iterator, context) {\r\n  var results = [];\r\n  if (obj == null) return results;\r\n  each(obj, function(value, index, list) {\r\n    if (!iterator.call(context, value, index, list)) results[results.length] = value;\r\n  });\r\n  return results;\r\n};\r\n\r\n// Determine whether all of the elements match a truth test.\r\n// Delegates to **ECMAScript 5**'s native `every` if available.\r\n// Aliased as `all`.\r\n_.every = _.all = function(obj, iterator, context) {\r\n  var result = true;\r\n  if (obj == null) return result;\r\n  if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\r\n  each(obj, function(value, index, list) {\r\n    if (!(result = result && iterator.call(context, value, index, list))) return breaker;\r\n  });\r\n  return !!result;\r\n};\r\n\r\n// Determine if at least one element in the object matches a truth test.\r\n// Delegates to **ECMAScript 5**'s native `some` if available.\r\n// Aliased as `any`.\r\nvar any = _.some = _.any = function(obj, iterator, context) {\r\n  iterator || (iterator = _.identity);\r\n  var result = false;\r\n  if (obj == null) return result;\r\n  if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\r\n  each(obj, function(value, index, list) {\r\n    if (result || (result = iterator.call(context, value, index, list))) return breaker;\r\n  });\r\n  return !!result;\r\n};\r\n\r\n// Determine if a given value is included in the array or object using `===`.\r\n// Aliased as `contains`.\r\n_.include = _.contains = function(obj, target) {\r\n  var found = false;\r\n  if (obj == null) return found;\r\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\r\n  found = any(obj, function(value) {\r\n    return value === target;\r\n  });\r\n  return found;\r\n};\r\n\r\n// Invoke a method (with arguments) on every item in a collection.\r\n_.invoke = function(obj, method) {\r\n  var args = slice.call(arguments, 2);\r\n  return _.map(obj, function(value) {\r\n    return (_.isFunction(method) ? method || value : value[method]).apply(value, args);\r\n  });\r\n};\r\n\r\n// Convenience version of a common use case of `map`: fetching a property.\r\n_.pluck = function(obj, key) {\r\n  return _.map(obj, function(value){ return value[key]; });\r\n};\r\n\r\n// Return the maximum element or (element-based computation).\r\n_.max = function(obj, iterator, context) {\r\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0]) return Math.max.apply(Math, obj);\r\n  if (!iterator && _.isEmpty(obj)) return -Infinity;\r\n  var result = {computed : -Infinity};\r\n  each(obj, function(value, index, list) {\r\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\r\n    computed >= result.computed && (result = {value : value, computed : computed});\r\n  });\r\n  return result.value;\r\n};\r\n\r\n// Return the minimum element (or element-based computation).\r\n_.min = function(obj, iterator, context) {\r\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0]) return Math.min.apply(Math, obj);\r\n  if (!iterator && _.isEmpty(obj)) return Infinity;\r\n  var result = {computed : Infinity};\r\n  each(obj, function(value, index, list) {\r\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\r\n    computed < result.computed && (result = {value : value, computed : computed});\r\n  });\r\n  return result.value;\r\n};\r\n\r\n// Shuffle an array.\r\n_.shuffle = function(obj) {\r\n  var shuffled = [], rand;\r\n  each(obj, function(value, index, list) {\r\n    rand = Math.floor(Math.random() * (index + 1));\r\n    shuffled[index] = shuffled[rand];\r\n    shuffled[rand] = value;\r\n  });\r\n  return shuffled;\r\n};\r\n\r\n// Sort the object's values by a criterion produced by an iterator.\r\n_.sortBy = function(obj, val, context) {\r\n  var iterator = _.isFunction(val) ? val : function(obj) { return obj[val]; };\r\n  return _.pluck(_.map(obj, function(value, index, list) {\r\n    return {\r\n      value : value,\r\n      criteria : iterator.call(context, value, index, list)\r\n    };\r\n  }).sort(function(left, right) {\r\n    var a = left.criteria, b = right.criteria;\r\n    if (a === void 0) return 1;\r\n    if (b === void 0) return -1;\r\n    return a < b ? -1 : a > b ? 1 : 0;\r\n  }), 'value');\r\n};\r\n\r\n// Groups the object's values by a criterion. Pass either a string attribute\r\n// to group by, or a function that returns the criterion.\r\n_.groupBy = function(obj, val) {\r\n  var result = {};\r\n  var iterator = _.isFunction(val) ? val : function(obj) { return obj[val]; };\r\n  each(obj, function(value, index) {\r\n    var key = iterator(value, index);\r\n    (result[key] || (result[key] = [])).push(value);\r\n  });\r\n  return result;\r\n};\r\n\r\n// Use a comparator function to figure out at what index an object should\r\n// be inserted so as to maintain order. Uses binary search.\r\n_.sortedIndex = function(array, obj, iterator) {\r\n  iterator || (iterator = _.identity);\r\n  var low = 0, high = array.length;\r\n  while (low < high) {\r\n    var mid = (low + high) >> 1;\r\n    iterator(array[mid]) < iterator(obj) ? low = mid + 1 : high = mid;\r\n  }\r\n  return low;\r\n};\r\n\r\n// Safely convert anything iterable into a real, live array.\r\n_.toArray = function(obj) {\r\n  if (!obj)                                     return [];\r\n  if (_.isArray(obj))                           return slice.call(obj);\r\n  if (_.isArguments(obj))                       return slice.call(obj);\r\n  if (obj.toArray && _.isFunction(obj.toArray)) return obj.toArray();\r\n  return _.values(obj);\r\n};\r\n\r\n// Return the number of elements in an object.\r\n_.size = function(obj) {\r\n  return _.isArray(obj) ? obj.length : _.keys(obj).length;\r\n};\r\n\r\n// Array Functions\r\n// ---------------\r\n\r\n// Get the first element of an array. Passing **n** will return the first N\r\n// values in the array. Aliased as `head` and `take`. The **guard** check\r\n// allows it to work with `_.map`.\r\n_.first = _.head = _.take = function(array, n, guard) {\r\n  return (n != null) && !guard ? slice.call(array, 0, n) : array[0];\r\n};\r\n\r\n// Returns everything but the last entry of the array. Especcialy useful on\r\n// the arguments object. Passing **n** will return all the values in\r\n// the array, excluding the last N. The **guard** check allows it to work with\r\n// `_.map`.\r\n_.initial = function(array, n, guard) {\r\n  return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\r\n};\r\n\r\n// Get the last element of an array. Passing **n** will return the last N\r\n// values in the array. The **guard** check allows it to work with `_.map`.\r\n_.last = function(array, n, guard) {\r\n  if ((n != null) && !guard) {\r\n    return slice.call(array, Math.max(array.length - n, 0));\r\n  } else {\r\n    return array[array.length - 1];\r\n  }\r\n};\r\n\r\n// Returns everything but the first entry of the array. Aliased as `tail`.\r\n// Especially useful on the arguments object. Passing an **index** will return\r\n// the rest of the values in the array from that index onward. The **guard**\r\n// check allows it to work with `_.map`.\r\n_.rest = _.tail = function(array, index, guard) {\r\n  return slice.call(array, (index == null) || guard ? 1 : index);\r\n};\r\n\r\n// Trim out all falsy values from an array.\r\n_.compact = function(array) {\r\n  return _.filter(array, function(value){ return !!value; });\r\n};\r\n\r\n// Return a completely flattened version of an array.\r\n_.flatten = function(array, shallow) {\r\n  return _.reduce(array, function(memo, value) {\r\n    if (_.isArray(value)) return memo.concat(shallow ? value : _.flatten(value));\r\n    memo[memo.length] = value;\r\n    return memo;\r\n  }, []);\r\n};\r\n\r\n// Return a version of the array that does not contain the specified value(s).\r\n_.without = function(array) {\r\n  return _.difference(array, slice.call(arguments, 1));\r\n};\r\n\r\n// Produce a duplicate-free version of the array. If the array has already\r\n// been sorted, you have the option of using a faster algorithm.\r\n// Aliased as `unique`.\r\n_.uniq = _.unique = function(array, isSorted, iterator) {\r\n  var initial = iterator ? _.map(array, iterator) : array;\r\n  var results = [];\r\n  // The `isSorted` flag is irrelevant if the array only contains two elements.\r\n  if (array.length < 3) isSorted = true;\r\n  _.reduce(initial, function (memo, value, index) {\r\n    if (isSorted ? _.last(memo) !== value || !memo.length : !_.include(memo, value)) {\r\n      memo.push(value);\r\n      results.push(array[index]);\r\n    }\r\n    return memo;\r\n  }, []);\r\n  return results;\r\n};\r\n\r\n// Produce an array that contains the union: each distinct element from all of\r\n// the passed-in arrays.\r\n_.union = function() {\r\n  return _.uniq(_.flatten(arguments, true));\r\n};\r\n\r\n// Produce an array that contains every item shared between all the\r\n// passed-in arrays. (Aliased as \"intersect\" for back-compat.)\r\n_.intersection = _.intersect = function(array) {\r\n  var rest = slice.call(arguments, 1);\r\n  return _.filter(_.uniq(array), function(item) {\r\n    return _.every(rest, function(other) {\r\n      return _.indexOf(other, item) >= 0;\r\n    });\r\n  });\r\n};\r\n\r\n// Take the difference between one array and a number of other arrays.\r\n// Only the elements present in just the first array will remain.\r\n_.difference = function(array) {\r\n  var rest = _.flatten(slice.call(arguments, 1), true);\r\n  return _.filter(array, function(value){ return !_.include(rest, value); });\r\n};\r\n\r\n// Zip together multiple lists into a single array -- elements that share\r\n// an index go together.\r\n_.zip = function() {\r\n  var args = slice.call(arguments);\r\n  var length = _.max(_.pluck(args, 'length'));\r\n  var results = new Array(length);\r\n  for (var i = 0; i < length; i++) results[i] = _.pluck(args, \"\" + i);\r\n  return results;\r\n};\r\n\r\n// If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\r\n// we need this function. Return the position of the first occurrence of an\r\n// item in an array, or -1 if the item is not included in the array.\r\n// Delegates to **ECMAScript 5**'s native `indexOf` if available.\r\n// If the array is large and already in sort order, pass `true`\r\n// for **isSorted** to use binary search.\r\n_.indexOf = function(array, item, isSorted) {\r\n  if (array == null) return -1;\r\n  var i, l;\r\n  if (isSorted) {\r\n    i = _.sortedIndex(array, item);\r\n    return array[i] === item ? i : -1;\r\n  }\r\n  if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item);\r\n  for (i = 0, l = array.length; i < l; i++) if (i in array && array[i] === item) return i;\r\n  return -1;\r\n};\r\n\r\n// Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\r\n_.lastIndexOf = function(array, item) {\r\n  if (array == null) return -1;\r\n  if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) return array.lastIndexOf(item);\r\n  var i = array.length;\r\n  while (i--) if (i in array && array[i] === item) return i;\r\n  return -1;\r\n};\r\n\r\n// Generate an integer Array containing an arithmetic progression. A port of\r\n// the native Python `range()` function. See\r\n// [the Python documentation](http://docs.python.org/library/functions.html#range).\r\n_.range = function(start, stop, step) {\r\n  if (arguments.length <= 1) {\r\n    stop = start || 0;\r\n    start = 0;\r\n  }\r\n  step = arguments[2] || 1;\r\n\r\n  var len = Math.max(Math.ceil((stop - start) / step), 0);\r\n  var idx = 0;\r\n  var range = new Array(len);\r\n\r\n  while(idx < len) {\r\n    range[idx++] = start;\r\n    start += step;\r\n  }\r\n\r\n  return range;\r\n};\r\n\r\n// Function (ahem) Functions\r\n// ------------------\r\n\r\n// Reusable constructor function for prototype setting.\r\nvar ctor = function(){};\r\n\r\n// Create a function bound to a given object (assigning `this`, and arguments,\r\n// optionally). Binding with arguments is also known as `curry`.\r\n// Delegates to **ECMAScript 5**'s native `Function.bind` if available.\r\n// We check for `func.bind` first, to fail fast when `func` is undefined.\r\n_.bind = function bind(func, context) {\r\n  var bound, args;\r\n  if (func.bind === nativeBind && nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\r\n  if (!_.isFunction(func)) throw new TypeError;\r\n  args = slice.call(arguments, 2);\r\n  return bound = function() {\r\n    if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\r\n    ctor.prototype = func.prototype;\r\n    var self = new ctor;\r\n    var result = func.apply(self, args.concat(slice.call(arguments)));\r\n    if (Object(result) === result) return result;\r\n    return self;\r\n  };\r\n};\r\n\r\n// Bind all of an object's methods to that object. Useful for ensuring that\r\n// all callbacks defined on an object belong to it.\r\n_.bindAll = function(obj) {\r\n  var funcs = slice.call(arguments, 1);\r\n  if (funcs.length == 0) funcs = _.functions(obj);\r\n  each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\r\n  return obj;\r\n};\r\n\r\n// Memoize an expensive function by storing its results.\r\n_.memoize = function(func, hasher) {\r\n  var memo = {};\r\n  hasher || (hasher = _.identity);\r\n  return function() {\r\n    var key = hasher.apply(this, arguments);\r\n    return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\r\n  };\r\n};\r\n\r\n// Delays a function for the given number of milliseconds, and then calls\r\n// it with the arguments supplied.\r\n_.delay = function(func, wait) {\r\n  var args = slice.call(arguments, 2);\r\n  return setTimeout(function(){ return func.apply(null, args); }, wait);\r\n};\r\n\r\n// Defers a function, scheduling it to run after the current call stack has\r\n// cleared.\r\n_.defer = function(func) {\r\n  return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\r\n};\r\n\r\n// Returns a function, that, when invoked, will only be triggered at most once\r\n// during a given window of time.\r\n_.throttle = function(func, wait) {\r\n  var context, args, timeout, throttling, more, result;\r\n  var whenDone = _.debounce(function(){ more = throttling = false; }, wait);\r\n  return function() {\r\n    context = this; args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if (more) func.apply(context, args);\r\n      whenDone();\r\n    };\r\n    if (!timeout) timeout = setTimeout(later, wait);\r\n    if (throttling) {\r\n      more = true;\r\n    } else {\r\n      result = func.apply(context, args);\r\n    }\r\n    whenDone();\r\n    throttling = true;\r\n    return result;\r\n  };\r\n};\r\n\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\n_.debounce = function(func, wait, immediate) {\r\n  var timeout;\r\n  return function() {\r\n    var context = this, args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    if (immediate && !timeout) func.apply(context, args);\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n};\r\n\r\n// Returns a function that will be executed at most one time, no matter how\r\n// often you call it. Useful for lazy initialization.\r\n_.once = function(func) {\r\n  var ran = false, memo;\r\n  return function() {\r\n    if (ran) return memo;\r\n    ran = true;\r\n    return memo = func.apply(this, arguments);\r\n  };\r\n};\r\n\r\n// Returns the first function passed as an argument to the second,\r\n// allowing you to adjust arguments, run code before and after, and\r\n// conditionally execute the original function.\r\n_.wrap = function(func, wrapper) {\r\n  return function() {\r\n    var args = [func].concat(slice.call(arguments, 0));\r\n    return wrapper.apply(this, args);\r\n  };\r\n};\r\n\r\n// Returns a function that is the composition of a list of functions, each\r\n// consuming the return value of the function that follows.\r\n_.compose = function() {\r\n  var funcs = arguments;\r\n  return function() {\r\n    var args = arguments;\r\n    for (var i = funcs.length - 1; i >= 0; i--) {\r\n      args = [funcs[i].apply(this, args)];\r\n    }\r\n    return args[0];\r\n  };\r\n};\r\n\r\n// Returns a function that will only be executed after being called N times.\r\n_.after = function(times, func) {\r\n  if (times <= 0) return func();\r\n  return function() {\r\n    if (--times < 1) { return func.apply(this, arguments); }\r\n  };\r\n};\r\n\r\n// Object Functions\r\n// ----------------\r\n\r\n// Retrieve the names of an object's properties.\r\n// Delegates to **ECMAScript 5**'s native `Object.keys`\r\n_.keys = nativeKeys || function(obj) {\r\n  if (obj !== Object(obj)) throw new TypeError('Invalid object');\r\n  var keys = [];\r\n  for (var key in obj) if (_.has(obj, key)) keys[keys.length] = key;\r\n  return keys;\r\n};\r\n\r\n// Retrieve the values of an object's properties.\r\n_.values = function(obj) {\r\n  return _.map(obj, _.identity);\r\n};\r\n\r\n// Return a sorted list of the function names available on the object.\r\n// Aliased as `methods`\r\n_.functions = _.methods = function(obj) {\r\n  var names = [];\r\n  for (var key in obj) {\r\n    if (_.isFunction(obj[key])) names.push(key);\r\n  }\r\n  return names.sort();\r\n};\r\n\r\n// Extend a given object with all the properties in passed-in object(s).\r\n_.extend = function(obj) {\r\n  each(slice.call(arguments, 1), function(source) {\r\n    for (var prop in source) {\r\n      obj[prop] = source[prop];\r\n    }\r\n  });\r\n  return obj;\r\n};\r\n\r\n// Return a copy of the object only containing the whitelisted properties.\r\n_.pick = function(obj) {\r\n  var result = {};\r\n  each(_.flatten(slice.call(arguments, 1)), function(key) {\r\n    if (key in obj) result[key] = obj[key];\r\n  });\r\n  return result;\r\n};\r\n\r\n// Fill in a given object with default properties.\r\n_.defaults = function(obj) {\r\n  each(slice.call(arguments, 1), function(source) {\r\n    for (var prop in source) {\r\n      if (obj[prop] == null) obj[prop] = source[prop];\r\n    }\r\n  });\r\n  return obj;\r\n};\r\n\r\n// Create a (shallow-cloned) duplicate of an object.\r\n_.clone = function(obj) {\r\n  if (!_.isObject(obj)) return obj;\r\n  return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\r\n};\r\n\r\n// Invokes interceptor with the obj, and then returns obj.\r\n// The primary purpose of this method is to \"tap into\" a method chain, in\r\n// order to perform operations on intermediate results within the chain.\r\n_.tap = function(obj, interceptor) {\r\n  interceptor(obj);\r\n  return obj;\r\n};\r\n\r\n// Internal recursive comparison function.\r\nfunction eq(a, b, stack) {\r\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n  // See the Harmony `egal` proposal: http://wiki.ecmascript.org/doku.php?id=harmony:egal.\r\n  if (a === b) return a !== 0 || 1 / a == 1 / b;\r\n  // A strict comparison is necessary because `null == undefined`.\r\n  if (a == null || b == null) return a === b;\r\n  // Unwrap any wrapped objects.\r\n  if (a._chain) a = a._wrapped;\r\n  if (b._chain) b = b._wrapped;\r\n  // Invoke a custom `isEqual` method if one is provided.\r\n  if (a.isEqual && _.isFunction(a.isEqual)) return a.isEqual(b);\r\n  if (b.isEqual && _.isFunction(b.isEqual)) return b.isEqual(a);\r\n  // Compare `[[Class]]` names.\r\n  var className = toString.call(a);\r\n  if (className != toString.call(b)) return false;\r\n  switch (className) {\r\n    // Strings, numbers, dates, and booleans are compared by value.\r\n    case '[object String]':\r\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n      // equivalent to `new String(\"5\")`.\r\n      return a == String(b);\r\n    case '[object Number]':\r\n      // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\r\n      // other numeric values.\r\n      return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\r\n    case '[object Date]':\r\n    case '[object Boolean]':\r\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n      // millisecond representations. Note that invalid dates with millisecond representations\r\n      // of `NaN` are not equivalent.\r\n      return +a == +b;\r\n    // RegExps are compared by their source patterns and flags.\r\n    case '[object RegExp]':\r\n      return a.source == b.source &&\r\n             a.global == b.global &&\r\n             a.multiline == b.multiline &&\r\n             a.ignoreCase == b.ignoreCase;\r\n  }\r\n  if (typeof a != 'object' || typeof b != 'object') return false;\r\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n  var length = stack.length;\r\n  while (length--) {\r\n    // Linear search. Performance is inversely proportional to the number of\r\n    // unique nested structures.\r\n    if (stack[length] == a) return true;\r\n  }\r\n  // Add the first object to the stack of traversed objects.\r\n  stack.push(a);\r\n  var size = 0, result = true;\r\n  // Recursively compare objects and arrays.\r\n  if (className == '[object Array]') {\r\n    // Compare array lengths to determine if a deep comparison is necessary.\r\n    size = a.length;\r\n    result = size == b.length;\r\n    if (result) {\r\n      // Deep compare the contents, ignoring non-numeric properties.\r\n      while (size--) {\r\n        // Ensure commutative equality for sparse arrays.\r\n        if (!(result = size in a == size in b && eq(a[size], b[size], stack))) break;\r\n      }\r\n    }\r\n  } else {\r\n    // Objects with different constructors are not equivalent.\r\n    if ('constructor' in a != 'constructor' in b || a.constructor != b.constructor) return false;\r\n    // Deep compare objects.\r\n    for (var key in a) {\r\n      if (_.has(a, key)) {\r\n        // Count the expected number of properties.\r\n        size++;\r\n        // Deep compare each member.\r\n        if (!(result = _.has(b, key) && eq(a[key], b[key], stack))) break;\r\n      }\r\n    }\r\n    // Ensure that both objects contain the same number of properties.\r\n    if (result) {\r\n      for (key in b) {\r\n        if (_.has(b, key) && !(size--)) break;\r\n      }\r\n      result = !size;\r\n    }\r\n  }\r\n  // Remove the first object from the stack of traversed objects.\r\n  stack.pop();\r\n  return result;\r\n}\r\n\r\n// Perform a deep comparison to check if two objects are equal.\r\n_.isEqual = function(a, b) {\r\n  return eq(a, b, []);\r\n};\r\n\r\n// Is a given array, string, or object empty?\r\n// An \"empty\" object has no enumerable own-properties.\r\n_.isEmpty = function(obj) {\r\n  if (obj == null) return true;\r\n  if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\r\n  for (var key in obj) if (_.has(obj, key)) return false;\r\n  return true;\r\n};\r\n\r\n// Is a given value a DOM element?\r\n_.isElement = function(obj) {\r\n  return !!(obj && obj.nodeType == 1);\r\n};\r\n\r\n// Is a given value an array?\r\n// Delegates to ECMA5's native Array.isArray\r\n_.isArray = nativeIsArray || function(obj) {\r\n  return toString.call(obj) == '[object Array]';\r\n};\r\n\r\n// Is a given variable an object?\r\n_.isObject = function(obj) {\r\n  return obj === Object(obj);\r\n};\r\n\r\n// Is a given variable an arguments object?\r\n_.isArguments = function(obj) {\r\n  return toString.call(obj) == '[object Arguments]';\r\n};\r\nif (!_.isArguments(arguments)) {\r\n  _.isArguments = function(obj) {\r\n    return !!(obj && _.has(obj, 'callee'));\r\n  };\r\n}\r\n\r\n// Is a given value a function?\r\n_.isFunction = function(obj) {\r\n  return toString.call(obj) == '[object Function]';\r\n};\r\n\r\n// Is a given value a string?\r\n_.isString = function(obj) {\r\n  return toString.call(obj) == '[object String]';\r\n};\r\n\r\n// Is a given value a number?\r\n_.isNumber = function(obj) {\r\n  return toString.call(obj) == '[object Number]';\r\n};\r\n\r\n// Is a given object a finite number?\r\n_.isFinite = function(obj) {\r\n  return _.isNumber(obj) && isFinite(obj);\r\n};\r\n\r\n// Is the given value `NaN`?\r\n_.isNaN = function(obj) {\r\n  // `NaN` is the only value for which `===` is not reflexive.\r\n  return obj !== obj;\r\n};\r\n\r\n// Is a given value a boolean?\r\n_.isBoolean = function(obj) {\r\n  return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\r\n};\r\n\r\n// Is a given value a date?\r\n_.isDate = function(obj) {\r\n  return toString.call(obj) == '[object Date]';\r\n};\r\n\r\n// Is the given value a regular expression?\r\n_.isRegExp = function(obj) {\r\n  return toString.call(obj) == '[object RegExp]';\r\n};\r\n\r\n// Is a given value equal to null?\r\n_.isNull = function(obj) {\r\n  return obj === null;\r\n};\r\n\r\n// Is a given variable undefined?\r\n_.isUndefined = function(obj) {\r\n  return obj === void 0;\r\n};\r\n\r\n// Has own property?\r\n_.has = function(obj, key) {\r\n  return hasOwnProperty.call(obj, key);\r\n};\r\n\r\n// Utility Functions\r\n// -----------------\r\n\r\n// Run Underscore.js in *noConflict* mode, returning the `_` variable to its\r\n// previous owner. Returns a reference to the Underscore object.\r\n_.noConflict = function() {\r\n  root._ = previousUnderscore;\r\n  return this;\r\n};\r\n\r\n// Keep the identity function around for default iterators.\r\n_.identity = function(value) {\r\n  return value;\r\n};\r\n\r\n// Run a function **n** times.\r\n_.times = function (n, iterator, context) {\r\n  for (var i = 0; i < n; i++) iterator.call(context, i);\r\n};\r\n\r\n// Escape a string for HTML interpolation.\r\n_.escape = function(string) {\r\n  return (''+string).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\\//g,'&#x2F;');\r\n};\r\n\r\n// If the value of the named property is a function then invoke it;\r\n// otherwise, return it.\r\n_.result = function(object, property) {\r\n  if (object == null) return null;\r\n  var value = object[property];\r\n  return _.isFunction(value) ? value.call(object) : value;\r\n};\r\n\r\n// Add your own custom functions to the Underscore object, ensuring that\r\n// they're correctly added to the OOP wrapper as well.\r\n_.mixin = function(obj) {\r\n  each(_.functions(obj), function(name){\r\n    addToWrapper(name, _[name] = obj[name]);\r\n  });\r\n};\r\n\r\n// Generate a unique integer id (unique within the entire client session).\r\n// Useful for temporary DOM ids.\r\nvar idCounter = 0;\r\n_.uniqueId = function(prefix) {\r\n  var id = idCounter++;\r\n  return prefix ? prefix + id : id;\r\n};\r\n\r\n// By default, Underscore uses ERB-style template delimiters, change the\r\n// following template settings to use alternative delimiters.\r\n_.templateSettings = {\r\n  evaluate    : /<%([\\s\\S]+?)%>/g,\r\n  interpolate : /<%=([\\s\\S]+?)%>/g,\r\n  escape      : /<%-([\\s\\S]+?)%>/g\r\n};\r\n\r\n// When customizing `templateSettings`, if you don't want to define an\r\n// interpolation, evaluation or escaping regex, we need one that is\r\n// guaranteed not to match.\r\nvar noMatch = /.^/;\r\n\r\n// Certain characters need to be escaped so that they can be put into a\r\n// string literal.\r\nvar escapes = {\r\n  '\\\\': '\\\\',\r\n  \"'\": \"'\",\r\n  'r': '\\r',\r\n  'n': '\\n',\r\n  't': '\\t',\r\n  'u2028': '\\u2028',\r\n  'u2029': '\\u2029'\r\n};\r\n\r\nfor (var p in escapes) escapes[escapes[p]] = p;\r\nvar escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\r\nvar unescaper = /\\\\(\\\\|'|r|n|t|u2028|u2029)/g;\r\n\r\n// Within an interpolation, evaluation, or escaping, remove HTML escaping\r\n// that had been previously added.\r\nvar unescape = function(code) {\r\n  return code.replace(unescaper, function(match, escape) {\r\n    return escapes[escape];\r\n  });\r\n};\r\n\r\n// JavaScript micro-templating, similar to John Resig's implementation.\r\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\r\n// and correctly escapes quotes within interpolated code.\r\n_.template = function(text, data, settings) {\r\n  settings = _.defaults(settings || {}, _.templateSettings);\r\n\r\n  // Compile the template source, taking care to escape characters that\r\n  // cannot be included in a string literal and then unescape them in code\r\n  // blocks.\r\n  var source = \"__p+='\" + text\r\n    .replace(escaper, function(match) {\r\n      return '\\\\' + escapes[match];\r\n    })\r\n    .replace(settings.escape || noMatch, function(match, code) {\r\n      return \"'+\\n_.escape(\" + unescape(code) + \")+\\n'\";\r\n    })\r\n    .replace(settings.interpolate || noMatch, function(match, code) {\r\n      return \"'+\\n(\" + unescape(code) + \")+\\n'\";\r\n    })\r\n    .replace(settings.evaluate || noMatch, function(match, code) {\r\n      return \"';\\n\" + unescape(code) + \"\\n;__p+='\";\r\n    }) + \"';\\n\";\r\n\r\n  // If a variable is not specified, place data values in local scope.\r\n  if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\r\n\r\n  source = \"var __p='';\" +\r\n    \"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\\n\" +\r\n    source + \"return __p;\\n\";\r\n\r\n  var render = new Function(settings.variable || 'obj', '_', source);\r\n  if (data) return render(data, _);\r\n  var template = function(data) {\r\n    return render.call(this, data, _);\r\n  };\r\n\r\n  // Provide the compiled function source as a convenience for build time\r\n  // precompilation.\r\n  template.source = 'function(' + (settings.variable || 'obj') + '){\\n' +\r\n    source + '}';\r\n\r\n  return template;\r\n};\r\n\r\n// Add a \"chain\" function, which will delegate to the wrapper.\r\n_.chain = function(obj) {\r\n  return _(obj).chain();\r\n};\r\n\r\n// The OOP Wrapper\r\n// ---------------\r\n\r\n// If Underscore is called as a function, it returns a wrapped object that\r\n// can be used OO-style. This wrapper holds altered versions of all the\r\n// underscore functions. Wrapped objects may be chained.\r\nvar wrapper = function(obj) { this._wrapped = obj; };\r\n\r\n// Expose `wrapper.prototype` as `_.prototype`\r\n_.prototype = wrapper.prototype;\r\n\r\n// Helper function to continue chaining intermediate results.\r\nvar result = function(obj, chain) {\r\n  return chain ? _(obj).chain() : obj;\r\n};\r\n\r\n// A method to easily add functions to the OOP wrapper.\r\nvar addToWrapper = function(name, func) {\r\n  wrapper.prototype[name] = function() {\r\n    var args = slice.call(arguments);\r\n    unshift.call(args, this._wrapped);\r\n    return result(func.apply(_, args), this._chain);\r\n  };\r\n};\r\n\r\n// Add all of the Underscore functions to the wrapper object.\r\n_.mixin(_);\r\n\r\n// Add all mutator Array functions to the wrapper.\r\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\r\n  var method = ArrayProto[name];\r\n  wrapper.prototype[name] = function() {\r\n    var wrapped = this._wrapped;\r\n    method.apply(wrapped, arguments);\r\n    var length = wrapped.length;\r\n    if ((name == 'shift' || name == 'splice') && length === 0) delete wrapped[0];\r\n    return result(wrapped, this._chain);\r\n  };\r\n});\r\n\r\n// Add all accessor Array functions to the wrapper.\r\neach(['concat', 'join', 'slice'], function(name) {\r\n  var method = ArrayProto[name];\r\n  wrapper.prototype[name] = function() {\r\n    return result(method.apply(this._wrapped, arguments), this._chain);\r\n  };\r\n});\r\n\r\n// Start chaining a wrapped Underscore object.\r\nwrapper.prototype.chain = function() {\r\n  this._chain = true;\r\n  return this;\r\n};\r\n\r\n// Extracts the result from a wrapped and chained object.\r\nwrapper.prototype.value = function() {\r\n  return this._wrapped;\r\n};\r\n\r\n}).call(this);\r\n});\r\n\r\nrequire.define(\"/lib/natural/tokenizers/treebank_word_tokenizer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Rob Ellis, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar util = require(\"util\"),\r\n  Tokenizer = require('./tokenizer'),\r\n  _ = require('underscore')._;\r\n\r\nvar contractions2 = [\r\n  /(.)('ll|'re|'ve|n't|'s|'m|'d)\\b/ig,\r\n  /\\b(can)(not)\\b/ig,\r\n  /\\b(D)('ye)\\b/ig,\r\n  /\\b(Gim)(me)\\b/ig,\r\n  /\\b(Gon)(na)\\b/ig,\r\n  /\\b(Got)(ta)\\b/ig,\r\n  /\\b(Lem)(me)\\b/ig,\r\n  /\\b(Mor)('n)\\b/ig,\r\n  /\\b(T)(is)\\b/ig,\r\n  /\\b(T)(was)\\b/ig,\r\n  /\\b(Wan)(na)\\b/ig];\r\n\r\nvar contractions3 = [\r\n  /\\b(Whad)(dd)(ya)\\b/ig,\r\n  /\\b(Wha)(t)(cha)\\b/ig\r\n];\r\n\r\nTreebankWordTokenizer = function() {\r\n}\r\n\r\nutil.inherits(TreebankWordTokenizer, Tokenizer);\r\n\r\nTreebankWordTokenizer.prototype.tokenize = function(text) {\r\n  contractions2.forEach(function(regexp) {\r\ntext = text.replace(regexp,\"$1 $2\");\r\n  });\r\n\r\n  contractions3.forEach(function(regexp) {\r\ntext = text.replace(regexp,\"$1 $2 $3\");\r\n  });\r\n\r\n  // most punctuation\r\n  text = text.replace(/([^\\w\\.\\'\\-\\/\\+\\<\\>,&])/g, \" $1 \");\r\n\r\n  // commas if followed by space\r\n  text = text.replace(/(,\\s)/g, \" $1\");\r\n\r\n  // single quotes if followed by a space\r\n  text = text.replace(/('\\s)/g, \" $1\");\r\n\r\n  // periods before newline or end of string\r\n  text = text.replace(/\\. *(\\n|$)/g, \" . \");\r\n\r\n  return  _.without(text.split(/\\s+/), '');\r\n}\r\n\r\nmodule.exports = TreebankWordTokenizer;\r\n});\r\n\r\nrequire.define(\"/lib/natural/inflectors/noun_inflector.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar SingularPluralInflector = require('./singular_plural_inflector'),\r\n  util = require('util'),\r\n  FormSet = require('./form_set');\r\n\r\nfunction attach() {\r\n  var inflector = this;\r\n\r\n  String.prototype.singularizeNoun = function() {\r\n      return inflector.singularize(this);\r\n  }\r\n\r\n  String.prototype.pluralizeNoun = function() {\r\n      return inflector.pluralize(this);\r\n  }\r\n}\r\n\r\nvar NounInflector = function() {\r\n  this.ambiguous = [\r\n      'bison', 'bream', 'carp', 'chassis', 'cod', 'corps', 'debris', 'deer',\r\n      'diabetes', 'equipment', 'elk', 'fish', 'flounder', 'gallows', 'graffiti',\r\n      'headquarters', 'herpes', 'highjinks', 'homework', 'information',\r\n      'mackerel', 'mews', 'money', 'news', 'rice', 'rabies', 'salmon', 'series',\r\n      'sheep', 'shrimp', 'species', 'swine', 'trout', 'tuna', 'whiting', 'wildebeest'\r\n  ];\r\n\r\n  this.customPluralForms = [];\r\n  this.customSingularForms = [];\r\n  this.singularForms = new FormSet();\r\n  this.pluralForms = new FormSet();\r\n\r\n  this.attach = attach;\r\n\r\n  this.addIrregular(\"child\", \"children\");\r\n  this.addIrregular(\"man\", \"men\");\r\n  this.addIrregular(\"person\", \"people\");\r\n  this.addIrregular(\"sex\", \"sexes\");\r\n  this.addIrregular(\"mouse\", \"mice\");\r\n  this.addIrregular(\"ox\", \"oxen\");\r\n  this.addIrregular(\"foot\", \"feet\");\r\n  this.addIrregular(\"tooth\", \"teeth\");\r\n  this.addIrregular(\"goose\", \"geese\");\r\n\r\n  // see if it is possible to unify the creation of both the singular and\r\n  // plural regexes or maybe even just have one list. with a complete list\r\n  // of rules it may only be possible for some regular forms, but worth a shot\r\n  this.pluralForms.regularForms.push([/y$/i, 'ies']);\r\n  this.pluralForms.regularForms.push([/ife$/i, 'ives']);\r\n  this.pluralForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)a$/i, '$1ae']);\r\n  this.pluralForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)us$/i, '$1i']);\r\n  this.pluralForms.regularForms.push([/(buffal|tomat)o$/i, '$1oes']);\r\n  this.pluralForms.regularForms.push([/(sis)$/i, 'ses']);\r\n  this.pluralForms.regularForms.push([/(matr|vert|ind)(ix|ex)$/i, '$1ices']);\r\n  this.pluralForms.regularForms.push([/(x|ch|ss|sh|s|z)$/i, '$1es']);\r\n  this.pluralForms.regularForms.push([/^(?!talis|.*hu)(.*)man$/i, '$1men']);\r\n  this.pluralForms.regularForms.push([/(.*)/i, '$1s']);\r\n\r\n  this.singularForms.regularForms.push([/([^v])ies$/i, '$1y']);\r\n  this.singularForms.regularForms.push([/ives$/i, 'ife']);\r\n  this.singularForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)ae$/i, '$1a']);\r\n  this.singularForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i, '$1us']);\r\n  this.singularForms.regularForms.push([/(buffal|tomat)(oes)$/i, '$1o']);\r\n  this.singularForms.regularForms.push([/(analy|naly|synop|parenthe|diagno|the)ses$/i, '$1sis']);\r\n  this.singularForms.regularForms.push([/(vert|ind)(ices)$/i, '$1ex']);\r\n  // our pluralizer won''t cause this form of appendix (appendicies)\r\n  // but we should handle it\r\n  this.singularForms.regularForms.push([/(matr|append)(ices)$/i, '$1ix']);\r\n  this.singularForms.regularForms.push([/(x|ch|ss|sh|s|z)es$/i, '$1']);\r\n  this.singularForms.regularForms.push([/men$/i, 'man']);\r\n  this.singularForms.regularForms.push([/s$/i, '']);\r\n\r\n  this.pluralize = function (token) {\r\n      return this.ize(token, this.pluralForms, this.customPluralForms);\r\n  };\r\n\r\n  this.singularize = function(token) {\r\n      return this.ize(token, this.singularForms, this.customSingularForms);\r\n  };\r\n};\r\n\r\nutil.inherits(NounInflector, SingularPluralInflector);\r\n\r\nmodule.exports = NounInflector;\r\n});\r\n\r\nrequire.define(\"/lib/natural/inflectors/singular_plural_inflector.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar TenseInflector = function () {\r\n};\r\n\r\nTenseInflector.prototype.addSingular = function(pattern, replacement) {\r\n  this.customSingularForms.push([pattern, replacement]);\r\n};\r\n\r\nTenseInflector.prototype.addPlural = function(pattern, replacement) {\r\n  this.customPluralForms.push([pattern, replacement]);\r\n};\r\n\r\nTenseInflector.prototype.ize = function (token, formSet, customForms) {\r\n  var restoreCase = this.restoreCase(token);\r\n  return restoreCase(this.izeRegExps(token, customForms) || this.izeAbiguous(token) ||\r\n      this.izeRegulars(token, formSet) || this.izeRegExps(token, formSet.regularForms) ||\r\n      token);\r\n}\r\n\r\nTenseInflector.prototype.izeAbiguous = function (token) {\r\n  if(this.ambiguous.indexOf(token.toLowerCase()) > -1)\r\n      return token.toLowerCase();\r\n\r\n  return false;\r\n}\r\n\r\nTenseInflector.prototype.pluralize = function (token) {\r\n  return this.ize(token, this.pluralForms, this.customPluralForms);\r\n};\r\n\r\nTenseInflector.prototype.singularize = function(token) {\r\n  return this.ize(token, this.singularForms, this.customSingularForms);\r\n};\r\n\r\nvar uppercaseify = function(token) {\r\n  return token.toUpperCase();\r\n}\r\nvar capitalize = function(token) {\r\n  return token[0].toUpperCase() + token.slice(1);\r\n}\r\nvar lowercaseify = function(token) {\r\n  return token.toLowerCase();\r\n}\r\n\r\nTenseInflector.prototype.restoreCase = function(token) {\r\n  if (token[0] === token[0].toUpperCase()) {\r\n      if (token[1] && token[1] === token[1].toLowerCase()) {\r\n          return capitalize;\r\n      } else {\r\n          return uppercaseify;\r\n      }\r\n  } else {\r\n      return lowercaseify;\r\n  }\r\n}\r\n\r\nTenseInflector.prototype.izeRegulars = function(token, formSet) {\r\n  token = token.toLowerCase();\r\n\r\n  if(formSet.irregularForms[token])\r\n      return formSet.irregularForms[token];\r\n\r\n  return false;\r\n}\r\n\r\nTenseInflector.prototype.addForm = function(singularTable, pluralTable, singular, plural) {\r\n  singular = singular.toLowerCase();\r\n  plural = plural.toLowerCase();\r\n  pluralTable[singular] = plural;\r\n  singularTable[plural] = singular;\r\n};\r\n\r\nTenseInflector.prototype.addIrregular = function(singular, plural) {\r\n  this.addForm(this.singularForms.irregularForms, this.pluralForms.irregularForms, singular, plural);\r\n};\r\n\r\nTenseInflector.prototype.izeRegExps = function(token, forms) {\r\n      var i, form;\r\n      for(i = 0; i < forms.length; i++) {\r\n          form = forms[i];\r\n\r\n          if(token.match(form[0]))\r\n              return token.replace(form[0], form[1]);\r\n      }\r\n\r\n      return false;\r\n  }\r\n\r\nmodule.exports = TenseInflector;\r\n});\r\n\r\nrequire.define(\"/lib/natural/inflectors/form_set.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar FormSet = function() {\r\n  this.regularForms = [];\r\n  this.irregularForms = {};\r\n}\r\n\r\nmodule.exports = FormSet;\r\n});\r\n\r\nrequire.define(\"/lib/natural/inflectors/present_verb_inflector.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar util = require('util'),\r\n  SingularPluralInflector = require('./singular_plural_inflector'),\r\n  FormSet = require('./form_set');\r\n\r\nfunction attach() {\r\n  var inflector = this;\r\n\r\n  String.prototype.singularizePresentVerb = function() {\r\n      return inflector.singularize(this);\r\n  }\r\n\r\n  String.prototype.pluralizePresentVerb = function() {\r\n      return inflector.pluralize(this);\r\n  }\r\n}\r\n\r\nvar VerbInflector = function() {\r\n  this.ambiguous = [\r\n      'will'\r\n  ];\r\n\r\n  this.attach = attach;\r\n\r\n  this.customPluralForms = [];\r\n  this.customSingularForms = [];\r\n  this.singularForms = new FormSet();\r\n  this.pluralForms = new FormSet();\r\n\r\n  this.addIrregular(\"am\", \"are\");\r\n  this.addIrregular(\"is\", \"are\");\r\n  this.addIrregular(\"was\", \"were\");\r\n\r\n  this.singularForms.regularForms.push([/ed$/i, 'ed']);\r\n  this.singularForms.regularForms.push([/ss$/i, 'sses']);\r\n  this.singularForms.regularForms.push([/x$/i, 'xes']);\r\n  this.singularForms.regularForms.push([/(h|z|o)$/i, '$1es']);\r\n  this.singularForms.regularForms.push([/$zz/i, 'zzes']);\r\n  this.singularForms.regularForms.push([/$/i, 's']);\r\n\r\n  this.pluralForms.regularForms.push([/sses$/i, 'ss']);\r\n  this.pluralForms.regularForms.push([/xes$/i, 'x']);\r\n  this.pluralForms.regularForms.push([/([cs])hes$/i, '$1h']);\r\n  this.pluralForms.regularForms.push([/zzes$/i, 'zz']);\r\n  this.pluralForms.regularForms.push([/([^h|z|o])es$/i, '$1e']);\r\n  this.pluralForms.regularForms.push([/e?s$/i, '']);\r\n};\r\n\r\nutil.inherits(VerbInflector, SingularPluralInflector);\r\n\r\nmodule.exports = VerbInflector;\r\n});\r\n\r\nrequire.define(\"/lib/natural/inflectors/count_inflector.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nfunction nthForm(i) {\r\n  teenth = (i % 100);\r\n\r\n  if(teenth > 10 && teenth < 14)\r\n      return 'th';\r\n  else {\r\n      switch(i % 10) {\r\n          case 1:\r\n              return 'st';\r\n              break;\r\n          case 2:\r\n              return 'nd';\r\n              break;\r\n          case 3:\r\n              return 'rd';\r\n              break;\r\n          default:\r\n              return 'th';\r\n      }\r\n  }\r\n}\r\n\r\nfunction nth(i) {\r\n  return i.toString() + nthForm(i);\r\n}\r\n\r\nfunction CountInflector() {}\r\nCountInflector.nth = nth;\r\n\r\nmodule.exports = CountInflector;\r\n\r\n});\r\n\r\nrequire.define(\"/lib/natural/tfidf/tfidf.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Rob Ellis, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar _ = require(\"underscore\")._,\r\n  Tokenizer = require('../tokenizers/regexp_tokenizer').WordTokenizer,\r\n  tokenizer = new Tokenizer(),\r\n  stopwords = require('../util/stopwords').words,\r\n  fs = require('fs');\r\n\r\nfunction buildDocument(text, key) {\r\n  var stopOut;\r\n\r\n  if(typeof text === 'string') {\r\n      text = tokenizer.tokenize(text.toLowerCase());\r\n      stopOut = true;\r\n  } else if(!_.isArray(text)) {\r\n      return text;\r\n      stopOut = false;\r\n  }\r\n\r\n  return text.reduce(function(document, term) {\r\n      if(!stopOut || stopwords.indexOf(term) < 0)\r\n          document[term] = (document[term] ? document[term] + 1 : 1);\r\n\r\n      return document;\r\n  }, {__key: key});\r\n}\r\n\r\nfunction tf(term, document) {\r\n  return document[term] ? document[term]: 0;\r\n}\r\n\r\nfunction documentHasTerm(term, document) {\r\n  return document[term] && document[term] > 0;\r\n}\r\n\r\nfunction TfIdf(deserialized) {\r\n  if(deserialized)\r\n      this.documents = deserialized.documents;\r\n  else\r\n      this.documents = [];\r\n}\r\n\r\nmodule.exports = TfIdf;\r\nTfIdf.tf = tf;\r\n\r\nTfIdf.prototype.idf = function(term) {\r\n  var docsWithTerm = this.documents.reduce(function(count, document) {\r\n      return count + (documentHasTerm(term, document) ? 1 : 0);\r\n  }, 1);\r\n\r\n  return Math.log(this.documents.length + 1 / docsWithTerm /* inited to 1 so\r\n      no addition needed */);\r\n};\r\n\r\nTfIdf.prototype.addDocument = function(document, key) {\r\n  this.documents.push(buildDocument(document, key));\r\n};\r\n\r\nTfIdf.prototype.addFileSync = function(path, encoding, key) {\r\n  if(encoding)\r\n      encoding = 'UTF-8';\r\n\r\n  var document = fs.readFileSync(path, 'UTF-8');\r\n  this.documents.push(buildDocument(document, key));\r\n};\r\n\r\nTfIdf.prototype.tfidf = function(terms, d) {\r\n  var _this = this;\r\n\r\n  if(!_.isArray(terms))\r\n      terms = tokenizer.tokenize(terms.toString().toLowerCase());\r\n\r\n  return terms.reduce(function(value, term) {\r\n      return value + (tf(term, _this.documents[d]) * _this.idf(term));\r\n  }, 0.0);\r\n};\r\n\r\nTfIdf.prototype.listTerms = function(d) {\r\n  var terms = [];\r\n\r\n  for(term in this.documents[d]) {\r\nterms.push({term: term, tfidf: this.tfidf(term, d)})\r\n  }\r\n\r\n  return terms.sort(function(x, y) { return y.tfidf - x.tfidf });\r\n}\r\n\r\nTfIdf.prototype.tfidfs = function(terms, callback) {\r\n  var tfidfs = new Array(this.documents.length);\r\n\r\n  for(var i = 0; i < this.documents.length; i++) {\r\n      tfidfs[i] = this.tfidf(terms, i);\r\n\r\n      if(callback)\r\n          callback(i, tfidfs[i], this.documents[i].__key);\r\n  }\r\n\r\n  return tfidfs;\r\n};\r\n});\r\n\r\nrequire.define(\"fs\",function(require,module,exports,__dirname,__filename,process){// nothing to see here... no file methods for the browser\r\n});\r\n\r\nrequire.define(\"/lib/natural/analyzers/sentence_analyzer.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Rob Ellis, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar _ = require(\"underscore\")._;\r\n\r\n/*\r\nSentences Analizer Class\r\nFrom http://www.writingcentre.uottawa.ca/hypergrammar/sntpurps.html\r\n\r\nTake a POS input and analyse it for\r\n- Type of Sentense\r\n   - Interrogative\r\n     - Tag Questions\r\n     -\r\n   - Declarative\r\n   - Exclamatory\r\n   - Imperative\r\n\r\n- Parts of a Sentense\r\n   - Subject\r\n   - Predicate\r\n\r\n- Show Preposition Phrases\r\n*/\r\n\r\nvar Sentences = function(pos, callback) {\r\n  this.posObj = pos;\r\n  this.senType = null;\r\n  callback(this);\r\n}\r\n\r\nSentences.prototype.part = function(callback) {\r\n  var subject = [],\r\npredicat = [],\r\nverbFound = false;\r\n\r\n  this.prepositionPhrases();\r\n\r\n  for (var i = 0; i < this.posObj.tags.length; i++) {\r\n      if (this.posObj.tags[i].pos == \"VB\") {\r\n          if (i === 0) {\r\n              verbFound = true;\r\n          } else {\r\n              // We need to Test for any EX before the VB\r\n              if (this.posObj.tags[i - 1].pos != \"EX\") {\r\n                  verbFound = true;\r\n              } else {\r\n                  predicat.push(this.posObj.tags[i].token);\r\n              }\r\n          }\r\n      }\r\n\r\n      // Add Pronoun Phrase (pp) Or Subject Phrase (sp)\r\n      if (!verbFound) {\r\n          if (this.posObj.tags[i].pp != true)\r\n              this.posObj.tags[i].spos = \"SP\";\r\n\r\n          subject.push(this.posObj.tags[i].token);\r\n      } else {\r\n          if (this.posObj.tags[i].pp != true)\r\n              this.posObj.tags[i].spos = \"PP\";\r\n\r\n          predicat.push(this.posObj.tags[i].token)\r\n      }\r\n  }\r\n\r\n  if (subject.length == 0) {\r\nthis.posObj.tags.push({token:\"You\",spos:\"SP\",pos:\"PRP\",added:true});\r\n  }\r\n\r\n  callback(this);\r\n}\r\n\r\n// Takes POS and removes IN to NN or NNS\r\n// Adds a PP for each prepositionPhrases\r\nSentences.prototype.prepositionPhrases = function() {\r\n  var remove = false;\r\n\r\n  for (var i = 0; i < this.posObj.tags.length; i++) {\r\n      if (this.posObj.tags[i].pos.match(\"IN\")) {\r\n          remove = true;\r\n      }\r\n\r\n      if (remove) {\r\n          this.posObj.tags[i].pp = true;\r\n      }\r\n\r\n      if (this.posObj.tags[i].pos.match(\"NN\")) {\r\n          remove = false;\r\n      }\r\n  }\r\n}\r\n\r\nSentences.prototype.subjectToString = function() {\r\n  return this.posObj.tags.map(function(t){ if (t.spos == \"SP\" || t.spos == \"S\" ) return t.token }).join(' ');\r\n}\r\n\r\nSentences.prototype.predicateToString = function() {\r\n  return this.posObj.tags.map(function(t){ if (t.spos == \"PP\" || t.spos == \"P\" ) return t.token }).join(' ');\r\n}\r\n\r\nSentences.prototype.implicitYou = function() {\r\n  for (var i = 0; i < this.posObj.tags.length;i++) {\r\n      if (this.posObj.tags[i].added) {\r\n          return true;\r\n      }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nSentences.prototype.toString = function() {\r\n  return this.posObj.tags.map(function(t){return t.token}).join(' ');\r\n}\r\n\r\n// This is quick and incomplete.\r\nSentences.prototype.type = function(callback) {\r\n  var callback = callback || false;\r\n\r\n  // FIXME - punct seems useless\r\n  var lastElement = this.posObj.punct();\r\n  lastElement = (lastElement.length != 0) ? lastElement.pop() : this.posObj.tags.pop();\r\n\r\n  if (lastElement.pos !== \".\") {\r\n      if (this.implicitYou()) {\r\n          this.senType = \"COMMAND\";\r\n      } else if (_([\"WDT\",\"WP\",\"WP$\",\"WRB\"]).contains(this.posObj.tags[0].pos)) {\r\n          // Sentences that start with: who, what where when why and how, then they are questions\r\n          this.senType = \"INTERROGATIVE\";\r\n      } else if (_([\"PRP\"]).contains(lastElement.pos)) {\r\n          // Sentences that end in a Personal pronoun are most likely questions\r\n          // eg. We should run away, should we [?]\r\n          // eg. You want to see that again, do you [?]\r\n          this.senType = \"INTERROGATIVE\";\r\n      } else {\r\n          this.senType = \"UNKNOWN\";\r\n      }\r\n\r\n  } else {\r\n      switch(lastElement.token) {\r\n          case \"?\": this.senType = \"INTERROGATIVE\"; break;\r\n          case \"!\": this.senType = (this.implicitYou()) ? \"COMMAND\":\"EXCLAMATORY\"; break;\r\n          case \".\": this.senType = (this.implicitYou()) ? \"COMMAND\":\"DECLARATIVE\";\tbreak;\r\n      }\r\n  }\r\n\r\n  if (callback && _(callback).isFunction()) {\r\n      callback(this);\r\n  } else {\r\n      return this.senType;\r\n  }\r\n}\r\n\r\nmodule.exports = Sentences;\r\n});\r\n\r\nrequire.define(\"/lib/natural/ngrams/ngrams.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, Rob Ellis, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\nvar _ = require(\"underscore\")._,\r\n  Tokenizer = require('../tokenizers/regexp_tokenizer').WordTokenizer,\r\n  tokenizer = new Tokenizer();\r\n\r\nexports.ngrams = function(sequence, n) {\r\n  return ngrams(sequence, n);\r\n}\r\n\r\nexports.bigrams = function(sequence) {\r\n  return ngrams(sequence, 2);\r\n}\r\n\r\nexports.trigrams = function(sequence) {\r\n  return ngrams(sequence, 3);\r\n}\r\n\r\nvar ngrams = function(sequence, n) {\r\n  var result = [];\r\n\r\n  if (!_(sequence).isArray()) {\r\n      sequence = tokenizer.tokenize(sequence);\r\n  }\r\n\r\n  var count = _.max([0, sequence.length - n + 1]);\r\n\r\n  for (var i = 0; i < count; i++) {\r\n      result.push(sequence.slice(i, i + n));\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n});\r\n\r\nrequire.define(\"/lib/natural/distance/jaro-winkler_distance.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2012, Adam Phillabaum, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nUnless otherwise stated by a specific section of code\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n// Computes the Jaro distance between two string -- intrepreted from:\r\n// http://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance\r\n// s1 is the first string to compare\r\n// s2 is the second string to compare\r\nfunction distance(s1, s2) {\r\n  if (typeof(s1) != \"string\" || typeof(s2) != \"string\") return 0;\r\n  if (s1.length == 0 || s2.length == 0)\r\n      return 0;\r\n  s1 = s1.toLowerCase(), s2 = s2.toLowerCase();\r\n  var matchWindow = (Math.floor(Math.max(s1.length, s2.length) / 2.0)) - 1;\r\n  var matches1 = new Array(s1.length);\r\n  var matches2 = new Array(s2.length);\r\n  var m = 0; // number of matches\r\n  var t = 0; // number of transpositions\r\n\r\n  //debug helpers\r\n  //console.log(\"s1: \" + s1 + \"; s2: \" + s2);\r\n  //console.log(\" - matchWindow: \" + matchWindow);\r\n\r\n  // find matches\r\n  for (var i = 0; i < s1.length; i++) {\r\nvar matched = false;\r\n\r\n// check for an exact match\r\nif (s1[i] ==  s2[i]) {\r\n  matches1[i] = matches2[i] = matched = true;\r\n  m++\r\n}\r\n\r\n// check the \"match window\"\r\nelse {\r\n        // this for loop is a little brutal\r\n        for (k = (i <= matchWindow) ? 0 : i - matchWindow;\r\n          (k <= i + matchWindow) && k < s2.length && !matched;\r\n    k++) {\r\n              if (s1[i] == s2[k]) {\r\n                  if(!matches1[i] && !matches2[k]) {\r\n                        m++;\r\n                 }\r\n\r\n                matches1[i] = matches2[k] = matched = true;\r\n            }\r\n        }\r\n}\r\n  }\r\n\r\n  if(m == 0)\r\n      return 0.0;\r\n\r\n  // count transpositions\r\n  var k = 0;\r\n\r\n  for(var i = 0; i < s1.length; i++) {\r\n    if(matches1[k]) {\r\n        while(!matches2[k] && k < matches2.length)\r\n              k++;\r\n        if(s1[i] != s2[k] &&  k < matches2.length)  {\r\n              t++;\r\n          }\r\n\r\n        k++;\r\n    }\r\n  }\r\n\r\n  //debug helpers:\r\n  //console.log(\" - matches: \" + m);\r\n  //console.log(\" - transpositions: \" + t);\r\n  t = t / 2.0;\r\n  return (m / s1.length + m / s2.length + (m - t) / m) / 3;\r\n}\r\n\r\n// Computes the Winkler distance between two string -- intrepreted from:\r\n// http://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance\r\n// s1 is the first string to compare\r\n// s2 is the second string to compare\r\n// dj is the Jaro Distance (if you've already computed it), leave blank and the method handles it\r\nfunction JaroWinklerDistance(s1, s2, dj) {\r\n  var jaro;\r\n  (typeof(dj) == 'undefined')? jaro = distance(s1,s2) : jaro = dj;\r\n  var p = 0.1; //\r\n  var l = 0 // length of the matching prefix\r\n  while(s1[l] == s2[l] && l < 4)\r\n      l++;\r\n\r\n  return jaro + l * p * (1 - jaro);\r\n}\r\nmodule.exports = JaroWinklerDistance;\r\n});\r\n\r\nrequire.define(\"/lib/natural/distance/levenshtein_distance.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2012, Sid Nallu, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n/*\r\n* contribution by sidred123\r\n*/\r\n\r\n/*\r\n* Compute the Levenshtein distance between two strings.\r\n* Algorithm based from Speech and Language Processing - Daniel Jurafsky and James H. Martin.\r\n*/\r\n\r\nfunction LevenshteinDistance (source, target, options) {\r\n  options = options || {};\r\n  options.insertion_cost = options.insertion_cost || 1;\r\n  options.deletion_cost = options.deletion_cost || 1;\r\n  options.substitution_cost = options.substitution_cost || 2;\r\n\r\n  var sourceLength = source.length;\r\n  var targetLength = target.length;\r\n  var distanceMatrix = [[0]];\r\n\r\n  for (var row =  1; row <= sourceLength; row++) {\r\n      distanceMatrix[row] = [];\r\n      distanceMatrix[row][0] = distanceMatrix[row-1][0] + options.deletion_cost;\r\n  }\r\n\r\n  for (var column = 1; column <= targetLength; column++) {\r\n      distanceMatrix[0][column] = distanceMatrix[0][column-1] + options.insertion_cost;\r\n  }\r\n\r\n  for (var row = 1; row <= sourceLength; row++) {\r\n      for (var column = 1; column <= targetLength; column++) {\r\n          var costToInsert = distanceMatrix[row][column-1] + options.insertion_cost;\r\n          var costToDelete = distanceMatrix[row-1][column] + options.deletion_cost;\r\n\r\n          var sourceElement = source[row-1];\r\n          var targetElement = target[column-1];\r\n          var costToSubstitute = distanceMatrix[row-1][column-1];\r\n          if (sourceElement !== targetElement) {\r\n              costToSubstitute = costToSubstitute + options.substitution_cost;\r\n          }\r\n          distanceMatrix[row][column] = Math.min(costToInsert, costToDelete, costToSubstitute);\r\n      }\r\n  }\r\n  return distanceMatrix[sourceLength][targetLength];\r\n}\r\n\r\nmodule.exports = LevenshteinDistance;\r\n});\r\n\r\nrequire.define(\"/lib/natural/distance/dice_coefficient.js\",function(require,module,exports,__dirname,__filename,process){/*\r\nCopyright (c) 2011, John Crepezzi, Chris Umbel\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n// Get all of the pairs of letters for a string\r\nvar letterPairs = function (str) {\r\nvar numPairs = str.length - 1;\r\nvar pairs = new Array(numPairs);\r\nfor (var i = 0; i < numPairs; i++) {\r\n  pairs[i] = str.substring(i, i + 2);\r\n}\r\nreturn pairs;\r\n};\r\n\r\n// Get all of the pairs in all of the words for a string\r\nvar wordLetterPairs = function (str) {\r\nvar allPairs = [], pairs;\r\nvar words = str.split(/\\s+/);\r\nfor (var i = 0; i < words.length; i++) {\r\n  pairs = letterPairs(words[i]);\r\n  allPairs.push.apply(allPairs, pairs);\r\n}\r\nreturn allPairs;\r\n};\r\n\r\n// Perform some sanitization steps\r\nvar sanitize = function (str) {\r\nreturn str.toLowerCase().replace(/^\\s+|\\s+$/g, '');\r\n};\r\n\r\n// Compare two strings, and spit out a number from 0-1\r\nvar compare = function (str1, str2) {\r\nvar pairs1 = wordLetterPairs(sanitize(str1));\r\nvar pairs2 = wordLetterPairs(sanitize(str2));\r\nvar intersection = 0, union = pairs1.length + pairs2.length;\r\nvar i, j, pair1, pair2;\r\nfor (i = 0; i < pairs1.length; i++) {\r\n  pair1 = pairs1[i];\r\n  for (j = 0; j < pairs2.length; j++) {\r\n    pair2 = pairs2[j];\r\n    if (pair1 == pair2) {\r\n      intersection ++;\r\n      delete pairs2[j];\r\n      break;\r\n    }\r\n  }\r\n}\r\nreturn 2 * intersection / union;\r\n};\r\n\r\nmodule.exports = compare;\r\n});\r\n\r\nrequire.define(\"/lib/natural/entry.js\",function(require,module,exports,__dirname,__filename,process){window.natural = {};\r\n\r\nwindow.natural.SoundEx = require('./phonetics/soundex');\r\nwindow.natural.Metaphone = require('./phonetics/metaphone');\r\nwindow.natural.DoubleMetaphone = require('./phonetics/double_metaphone');\r\nwindow.natural.PorterStemmer = require('./stemmers/porter_stemmer');\r\nwindow.natural.PorterStemmerRu = require('./stemmers/porter_stemmer_ru');\r\nwindow.natural.LancasterStemmer = require('./stemmers/lancaster_stemmer');\r\nwindow.natural.AggressiveTokenizerRu = require('./tokenizers/aggressive_tokenizer_ru');\r\nwindow.natural.AggressiveTokenizer = require('./tokenizers/aggressive_tokenizer');\r\nwindow.natural.RegexpTokenizer = require('./tokenizers/regexp_tokenizer').RegexpTokenizer;\r\nwindow.natural.WordTokenizer = require('./tokenizers/regexp_tokenizer').WordTokenizer;\r\nwindow.natural.WordPunctTokenizer = require('./tokenizers/regexp_tokenizer').WordPunctTokenizer;\r\nwindow.natural.TreebankWordTokenizer = require('./tokenizers/treebank_word_tokenizer');\r\n/*\r\nwindow.natural.BayesClassifier = require('./classifiers/bayes_classifier');\r\nwindow.natural.LogisticRegressionClassifier = require('./classifiers/logistic_regression_classifier');\r\n*/\r\nwindow.natural.NounInflector = require('./inflectors/noun_inflector');\r\nwindow.natural.PresentVerbInflector = require('./inflectors/present_verb_inflector');\r\nwindow.natural.CountInflector = require('./inflectors/count_inflector');\r\n/*\r\nwindow.natural.WordNet = require('./wordnet/wordnet');\r\n*/\r\nwindow.natural.TfIdf = require('./tfidf/tfidf');\r\nwindow.natural.SentenceAnalyzer = require('./analyzers/sentence_analyzer');\r\nwindow.natural.stopwords = require('./util/stopwords').words;\r\nwindow.natural.NGrams = require('./ngrams/ngrams');\r\nwindow.natural.JaroWinklerDistance = require('./distance/jaro-winkler_distance');\r\nwindow.natural.LevenshteinDistance = require('./distance/levenshtein_distance');\r\nwindow.natural.DiceCoefficient = require('./distance/dice_coefficient');\r\n});\r\nrequire(\"/lib/natural/entry.js\");\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/natural.js\n// module id = ./src/app/natural.js\n// module chunks = main","module.exports = \":host {\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-pack: justify;\\r\\n      -ms-flex-pack: justify;\\r\\n          justify-content: space-between;\\r\\n  margin: 0 auto;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.duration {\\r\\n  color: white;\\r\\n  font-size: 1.25rem;\\r\\n  font-weight: 100;\\r\\n}\\r\\n\\r\\n.duration-divider {\\r\\n  margin: 0 .75rem;\\r\\n}\\r\\n\\r\\n.btnplaypause {\\r\\n  background-color: white;\\r\\n  border-radius: 3px;\\r\\n  border: none;\\r\\n  color: black;\\r\\n  cursor: pointer;\\r\\n  font-size: 1.25rem;\\r\\n  font-weight: 700;\\r\\n  padding: .5rem 0;\\r\\n  text-align: center;\\r\\n  width: 130px;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/audio/audio.component.css\n// module id = ./src/app/player/audio/audio.component.css\n// module chunks = main","module.exports = \"<div class=\\\"duration\\\">\\r\\n  <span>{{ currentTime }}</span>\\r\\n  <span class=\\\"duration-divider\\\">|</span>\\r\\n  <span>{{ duration }}</span>\\r\\n</div>\\r\\n\\r\\n<button class=\\\"btnplaypause\\\" (click)=\\\"handleAudioPlayPause()\\\">\\r\\n  {{ (isPlaying) ? \\\"Pause\\\" : \\\"Play\\\" }}\\r\\n</button>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/audio/audio.component.html\n// module id = ./src/app/player/audio/audio.component.html\n// module chunks = main","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, SimpleChanges, OnChanges } from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { PlayerService } from '../player.service';\r\nimport { Particle } from '../lyrics/particles';\r\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\r\n\r\n@Component({\r\n  selector: 'app-player-audio',\r\n  templateUrl: './audio.component.html',\r\n  styleUrls: ['./audio.component.css']\r\n})\r\nexport class AudioComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges {\r\n\r\n  // tslint:disable:no-output-on-prefix\r\n  @Output() onCurrentTimeUpdate = new EventEmitter<number>();\r\n  @Output() onPlayPause = new EventEmitter<boolean>();\r\n  @Input() src: string;\r\n  private audio: HTMLAudioElement;\r\n  private timeSubscription: Subscription;\r\n  private loadSubscription: Subscription;\r\n  public isPlaying: boolean = false;\r\n  public currentTime: string;\r\n  public duration: string;\r\n  private MP3_PATH = '';\r\n  private NUM_PARTICLES = 150;\r\n  private onUpdate;\r\n\r\n  NUM_BANDS = 128;\r\n\r\n  SMOOTHING = 0.5;\r\n\r\n\r\n  constructor(private service: PlayerService) {\r\n    console.log(`${AudioComponent.name}::ctor`);\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.audio = this.initAudio();\r\n    this.sketch();\r\n\r\n    this.currentTime = this.service.formatTime(0);\r\n    this.duration = this.service.formatTime(0);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    console.log(`${AudioComponent.name}::ngAfterViewInit`);\r\n\r\n    // Loads new audio source\r\n    this.loadAudioSource(this.src);\r\n\r\n    // Subscribes timeupdate\r\n    this.timeSubscription = Observable\r\n      .fromEvent(this.audio, 'timeupdate')\r\n      .subscribe(this.handleAudioTimeUpdate);\r\n\r\n    // Subscribe to loaded event\r\n    this.loadSubscription = Observable\r\n      .fromEvent(this.audio, 'loadeddata')\r\n      .subscribe(this.handleAudioLoaded);\r\n\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (this.service.hasPropertyChanged(changes.src)) {\r\n      this.loadAudioSource(changes.src.currentValue);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    console.log(`${AudioComponent.name}::ngOnDestroy`);\r\n\r\n    // Unsubscribe\r\n    this.timeSubscription.unsubscribe();\r\n    this.loadSubscription.unsubscribe();\r\n\r\n    // Destroy audio tag\r\n    this.loadAudioSource('');\r\n    this.audio.load();\r\n    const windows = <any>window;\r\n    if (windows.Sketch.instances.length > 0) {\r\n      windows.Sketch.instances[0].destroy();\r\n    }\r\n  }\r\n\r\n  public initAudio(): HTMLAudioElement {\r\n    console.log(`${AudioComponent.name}::initAudio`);\r\n\r\n    const audio = new Audio();\r\n    audio['autobuffer'] = true;\r\n    audio.autoplay = false;\r\n    audio.preload = 'auto';\r\n\r\n    return audio;\r\n  }\r\n\r\n  public loadAudioSource(src: string) {\r\n    console.log(`${AudioComponent.name}::loadAudioSource`);\r\n\r\n    this.audio.pause();\r\n    this.handleAudioPaused();\r\n    this.audio.src = src;\r\n    this.analizerAudio(this.audio);\r\n  }\r\n\r\n  public handleAudioLoaded = (e: HTMLMediaElementEventMap) => {\r\n    console.log(`${AudioComponent.name}::handleAudioLoaded`);\r\n\r\n    this.duration = this.service.formatTime(this.audio.duration);\r\n  }\r\n\r\n  public handleAudioTimeUpdate = (e: HTMLMediaElementEventMap) => {\r\n    console.log(`${AudioComponent.name}::handleAudioTimeUpdate`);\r\n\r\n    this.currentTime = this.service.formatTime(this.audio.currentTime);\r\n    this.onCurrentTimeUpdate.emit(this.audio.currentTime);\r\n  }\r\n\r\n  public handleAudioPlayed = () => {\r\n    console.log(`${AudioComponent.name}::handleAudioPlayed`);\r\n    this.onPlayPause.emit(true);\r\n    this.isPlaying = true;\r\n  }\r\n\r\n  public handleAudioPaused = () => {\r\n    console.log(`${AudioComponent.name}::handleAudioPaused`);\r\n    this.onPlayPause.emit(false);\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  public handleAudioPlayPause() {\r\n    console.log(`${AudioComponent.name}::handleAudioPlayPause`);\r\n\r\n    if (this.audio.paused) {\r\n      this.audio.play();\r\n    } else {\r\n      this.audio.pause();\r\n    }\r\n  }\r\n\r\n  public sketch() {\r\n    const windows = <any>window;\r\n\r\n    const self = this;\r\n    // Sketch\r\n    windows.Sketch.create(\r\n      {\r\n        particles: [],\r\n        setup: function () {\r\n          // let analyser;\r\n          let error;\r\n          let i = 0;\r\n          let intro;\r\n          let j = 0;\r\n          let particle;\r\n          const ref = self.NUM_PARTICLES - 1;\r\n          let warning;\r\n          let x;\r\n          let y;\r\n\r\n          // generate some particles\r\n          for (ref; j <= ref; j += 1) {\r\n            i = i + 1;\r\n            x = Math.random() * this.width;\r\n            y = Math.random() * this.height * 2;\r\n            particle = new Particle(x, y);\r\n            this.particles.push(particle);\r\n          }\r\n\r\n          const w = <any>window;\r\n          const aver = w.AudioContext || w.webkitAudioContext;\r\n\r\n          try {\r\n\r\n            // update particles based on fft transformed audio frequencies\r\n            self.onUpdate = (bands) => {\r\n              let k = 0;\r\n              let results;\r\n              const ref1 = this.particles;\r\n              const len = ref1.length;\r\n              results = [];\r\n              for (len; k < len; k++) {\r\n                particle = ref1[k];\r\n                results.push(particle.energy = bands[particle.band] / 256);\r\n              }\r\n              return results;\r\n            };\r\n\r\n            intro = document.getElementById('intro');\r\n            intro.style.display = 'none';\r\n\r\n            // bug in Safari 6 when using getByteFrequencyData with MediaElementAudioSource\r\n            // @see https://goo.gl/6WLx1\r\n            if (/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)) {\r\n              warning = document.getElementById('warning2');\r\n              return warning.style.display = 'block';\r\n            }\r\n          } catch (error1) {\r\n            error = error1;\r\n          }\r\n        },\r\n        draw: function () {\r\n          let j;\r\n          let particle;\r\n          let ref;\r\n          let results;\r\n          this.globalCompositeOperation = 'lighter';\r\n          ref = this.particles;\r\n          const len = ref.length;\r\n          results = [];\r\n          for (j = 0, len; j < len; j++) {\r\n            particle = ref[j];\r\n\r\n            // recycle particles\r\n            if (particle.y < -particle.size * particle.level * particle.scale * 2) {\r\n              particle.reset();\r\n              particle.y = this.height + particle.size * particle.scale * particle.level;\r\n            }\r\n            particle.move();\r\n            results.push(particle.draw(this));\r\n          }\r\n          return results;\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  public animates() {\r\n    this.sketch();\r\n  }\r\n\r\n\r\n  public analizerAudio(audio) {\r\n    console.log('analizerAudio');\r\n\r\n    const w = <any>window;\r\n    const numBands = 256;\r\n    const smoothing = 0.3;\r\n    let context;\r\n    let jsNode;\r\n    let analyser;\r\n    let bands;\r\n    let source;\r\n    let enabled = null;\r\n    let src;\r\n    const windows = <any>window;\r\n    const audioContext = windows.AudioContext || windows.webkitAudioContext;\r\n\r\n    enabled = windows.AudioContext != null;\r\n\r\n    // construct audio object\r\n    if (typeof audio === 'string') {\r\n      src = audio;\r\n      audio = new Audio();\r\n      audio.crossOrigin = 'anonymous';\r\n      audio.controls = true;\r\n      audio.src = src;\r\n    }\r\n\r\n    // setup audio context and nodes\r\n    // const audioAnalyser = <any>self.audioAnalyserFun;\r\n    context = new AudioContext();\r\n\r\n    // createScriptProcessor so we can hook onto updates\r\n    jsNode = context.createScriptProcessor(2048, 1, 1);\r\n\r\n    // smoothed analyser with n bins for frequency-domain analysis\r\n    analyser = context.createAnalyser();\r\n    analyser.smoothingTimeConstant = smoothing;\r\n    analyser.fftSize = numBands * 2;\r\n\r\n    // persistant bands array\r\n    bands = new Uint8Array(analyser.frequencyBinCount);\r\n    // circumvent http://crbug.com/112368\r\n    this.audio.addEventListener('canplay', () => {\r\n\r\n      // Subscribe other events\r\n      this.audio.addEventListener('playing', () => {\r\n        console.log('PLAY');\r\n        this.onPlayPause.emit(true);\r\n        this.isPlaying = true;\r\n        this.audio.play();\r\n      });\r\n      this.audio.addEventListener('pause', () => {\r\n        console.log('PAUSA');\r\n        this.onPlayPause.emit(false);\r\n        this.isPlaying = false;\r\n        this.audio.pause();\r\n      });\r\n      // media source\r\n      source = context.createMediaElementSource(audio);\r\n      // wire up nodes\r\n      source.connect(analyser);\r\n      analyser.connect(jsNode);\r\n      jsNode.connect(context.destination);\r\n      source.connect(context.destination);\r\n      const self = this;\r\n      // update each time the JavaScriptNode is called\r\n      return jsNode.onaudioprocess = () => {\r\n        // retreive the data from the first channel\r\n        analyser.getByteFrequencyData(bands);\r\n        if (!audio.paused) {\r\n          return typeof self.onUpdate === 'function' ? self.onUpdate(bands) : void 0;\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/audio/audio.component.ts","module.exports = \"@-webkit-keyframes pulse {\\r\\n  0% {\\r\\n    color: #AAA;\\r\\n  }\\r\\n\\r\\n  50% {\\r\\n    color: #FFF;\\r\\n  }\\r\\n\\r\\n  100% {\\r\\n    color: #AAA;\\r\\n  }\\r\\n}\\r\\n\\r\\n@keyframes pulse {\\r\\n  0% {\\r\\n    color: #AAA;\\r\\n  }\\r\\n\\r\\n  50% {\\r\\n    color: #FFF;\\r\\n  }\\r\\n\\r\\n  100% {\\r\\n    color: #AAA;\\r\\n  }\\r\\n}\\r\\n\\r\\n:host {\\r\\n  color: white;\\r\\n  font-weight: 300;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\np {\\r\\n  color: rgba(255, 255, 255, .4);\\r\\n  font-size: 14px;\\r\\n  margin: .5rem 0;\\r\\n  -webkit-transition: all 500ms ease;\\r\\n  transition: all 500ms ease;\\r\\n}\\r\\n\\r\\n.highlighted {\\r\\n  /* color: #999; */\\r\\n  color: red;\\r\\n  /* @include animation(pulse 0.3s ease-out); */\\r\\n}\\r\\n\\r\\n.active {\\r\\n  color: rgba(255, 255, 255, 1);\\r\\n  font-size: 26px;\\r\\n  margin: 1.25rem 0;\\r\\n  /* color: #999; */\\r\\n  /* -webkit-animation: pulse 5s ease-out;\\r\\n  -moz-animation: pulse 5s ease-out;\\r\\n  animation: pulse 5s ease-out; */\\r\\n}\\r\\n\\r\\n.karaoke-caption {\\r\\n  padding-top: 30px;\\r\\n  text-align: center;\\r\\n  font-size: 20pt;\\r\\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\\r\\n  font-weight: 300;\\r\\n}\\r\\n\\r\\n.karaoke-caption span {\\r\\n  color: #555;\\r\\n}\\r\\n\\r\\n.karaoke-caption span.highlighted {\\r\\n  color: #999;\\r\\n  -webkit-animation: pulse .3s ease-out;\\r\\n  animation: pulse .3s ease-out;\\r\\n}\\r\\n\\r\\ncanvas.sketch {\\r\\n  position: absolute !important;\\r\\n  top: 0 !important;\\r\\n  left: 0 !important;\\r\\n  width: 100% !important;\\r\\n  height: 100% !important;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/lyrics/lyrics.component.css\n// module id = ./src/app/player/lyrics/lyrics.component.css\n// module chunks = main","module.exports = \"<div *ngIf=\\\"lyrics\\\">\\r\\n  <!-- <div *ngFor=\\\"let line of lines\\\" > -->\\r\\n  <!-- <div *ngFor=\\\"let line of lines\\\" > -->\\r\\n  <!-- <div *ngFor=\\\"let line of lines\\\" [class.active]=\\\"line.index === currentLineIndex\\\"> -->\\r\\n\\r\\n  <!-- <span class=\\\"k-letters\\\">{{ line.text }}</span> -->\\r\\n  <span class=\\\"k-letters\\\"></span>\\r\\n  <!-- </div> -->\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/lyrics/lyrics.component.html\n// module id = ./src/app/player/lyrics/lyrics.component.html\n// module chunks = main","import { Component, EventEmitter, Input, OnInit, Output, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Http, Response } from '@angular/http';\r\nimport { Subscription } from 'rxjs';\r\nimport * as LRC from 'lrc.js';\r\nimport * as $ from 'jquery';\r\n\r\nimport { LyricLRC } from './LyricLRC.interface';\r\nimport { PlayerService } from '../player.service';\r\n\r\nexport interface Line {\r\n  index: number;\r\n  text: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-player-lyrics',\r\n  templateUrl: './lyrics.component.html',\r\n  styleUrls: ['./lyrics.component.css']\r\n})\r\nexport class LyricsComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  @Input() src: string = 'assets/songs/face-it/face-it.mp3';\r\n  @Input() delay: number = 0;\r\n  @Input() onCurrentTimeUpdate: EventEmitter<number>;\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onLoad = new EventEmitter();\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onNewLine = new EventEmitter<any>();\r\n  private timeSubscription: Subscription;\r\n  public lyrics: LyricLRC;\r\n  public currentLineIndex: number = -1;\r\n  public lines: Line[] = [];\r\n  public activateHighlight: boolean = false;\r\n  public countEmit = 0;\r\n\r\n  private cc = 0;\r\n  private fulltext = [];\r\n  // private nextWord;\r\n  private text;\r\n  private textBody;\r\n  private words;\r\n\r\n  // private MP3_PATH = 'https://api.soundcloud.com/tracks/42328219/stream?client_id=b1495e39071bd7081a74093816f77ddb';\r\n\r\n  constructor(\r\n    private service: PlayerService,\r\n    private http: Http) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadLyrics(this.src);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (this.service.hasPropertyChanged(changes.src)) {\r\n      this.loadLyrics(changes.src.currentValue);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.timeSubscription) {\r\n      this.timeSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  loadLyrics(src) {\r\n    console.log(`${LyricsComponent.name}::handleToggle`);\r\n\r\n    this.http\r\n      .get(src)\r\n      .subscribe((response: Response) => {\r\n        this.processLyrics(response.text());\r\n        this.timeSubscription = this.onCurrentTimeUpdate.subscribe(this.handleUpdateTime);\r\n      });\r\n  }\r\n\r\n  public processLyrics(lrcText) {\r\n    console.log(`${LyricsComponent.name}::handleToggle`);\r\n\r\n    this.lyrics = LRC.parse(lrcText);\r\n    this.currentLineIndex = -1;\r\n    this.lines = [];\r\n    this.onLoad.emit();\r\n  }\r\n\r\n  public handleUpdateTime = (currentTime: number) => {\r\n    this.getCurrentLine(currentTime);\r\n  }\r\n\r\n  public getCurrentLine = (currentTime: number) => {\r\n\r\n    currentTime += this.delay;\r\n    const { lines } = this.lyrics;\r\n    const lineIndex = lines.findIndex((line) => (line.time >= currentTime));\r\n    const previousLine = lines[this.currentLineIndex];\r\n    const nextLine = lines[lineIndex];\r\n    const currentLineIndex = (lineIndex - 1);\r\n    const currentLine = (lineIndex > 0)\r\n      ? lines[currentLineIndex]\r\n      : null;\r\n\r\n\r\n    if (currentLine && currentLine !== previousLine) {\r\n      this.activateHighlight = false;\r\n      this.currentLineIndex = currentLineIndex;\r\n      const timeDiff = nextLine !== undefined ? nextLine.time - currentLine.time : 0;\r\n      this.onNewLine.emit({ line: currentLine.text, diff: timeDiff });\r\n      this.countEmit = this.countEmit + 1;\r\n      if (this.countEmit > 2) {\r\n        this.highlightsProcess(currentLine.text, timeDiff);\r\n      }\r\n      this.activateHighlight = true;\r\n\r\n      if (!this.lines.length) {\r\n        this.lines.push({ index: currentLineIndex, text: currentLine.text });\r\n      }\r\n\r\n      if (nextLine) {\r\n        const liness = this.lines.concat([{ index: lineIndex, text: nextLine.text }]);\r\n\r\n        if (lines.length >= 4) {\r\n          liness.shift();\r\n        }\r\n\r\n        this.lines = liness;\r\n      }\r\n    }\r\n  }\r\n\r\n  public paint = (text, spn, el, velocidad) => {\r\n    $(spn).html(text);\r\n    $(el).each(function (i, idx) {\r\n      const sp = $(this);\r\n\r\n      setTimeout(() => {\r\n        sp.css('color', 'yellow');\r\n      }, i * velocidad);\r\n    });\r\n  }\r\n\r\n\r\n  public highlightsProcess(currentLine, timeDiff) {\r\n    const words = currentLine.split(' ');\r\n    console.log('highlightsProcess words %o', words);\r\n\r\n    let l_count = words.length;\r\n    let l_wrapped = '';\r\n\r\n    const contadorTotal = l_count;\r\n\r\n    words.forEach((el) => {\r\n      // l_wrapped = l_wrapped.concat('<span class=\"letter\">' + el + '</span>');\r\n      l_wrapped = l_wrapped.concat(`<span class=\"letter\"> ${el} </span>`);\r\n      if (!--l_count) {\r\n        // const tiempoIndividual = timeDiff / contadorTotal;\r\n        const tiempoIndividual = timeDiff * 120;\r\n        this.paint(l_wrapped, '.k-letters', '.letter', tiempoIndividual);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/lyrics/lyrics.component.ts","export class Particle {\r\n\r\n    private x;\r\n    private y;\r\n    private level;\r\n    private scale;\r\n    private alpha;\r\n    private speed;\r\n    private color;\r\n    private size;\r\n    private spin;\r\n    private band;\r\n    private decayScale;\r\n    private smoothedScale;\r\n    private smoothedAlpha;\r\n    private decayAlpha;\r\n    private rotation;\r\n    private energy;\r\n\r\n    private NUM_BANDS = 128;\r\n\r\n    COLORS = ['#69D2E7', '#1B676B', '#BEF202', '#EBE54D', '#00CDAC', '#1693A5', '#F9D423', '#FF4E50', '#E7204E', '#0CCABA', '#FF006F'];\r\n\r\n    SCALE = {\r\n        MIN: 5.0,\r\n        MAX: 80.0\r\n    };\r\n\r\n    SPEED = {\r\n        MIN: 0.2,\r\n        MAX: 1.0\r\n    };\r\n\r\n    ALPHA = {\r\n        MIN: 0.8,\r\n        MAX: 0.9\r\n    };\r\n\r\n    SPIN = {\r\n        MIN: 0.001,\r\n        MAX: 0.005\r\n    };\r\n\r\n    SIZE = {\r\n        MIN: 0.5,\r\n        MAX: 1.25\r\n    };\r\n\r\n    constructor(x1 = 0, y1 = 0) {\r\n        this.x = x1;\r\n        this.y = y1;\r\n        this.reset();\r\n    }\r\n\r\n    public reset() {\r\n\r\n        this.level = 1 + Math.floor(Math.random() * (4 - 0 + 0) + 0);\r\n        this.scale = Math.random() * (this.SCALE.MAX - this.SCALE.MIN + 0.1) + this.SCALE.MIN;\r\n        this.alpha = Math.random() * (this.ALPHA.MAX - this.ALPHA.MIN + 0.1) + this.ALPHA.MIN;\r\n        this.speed = Math.random() * (this.SPEED.MAX - this.SPEED.MIN + 0.1) + this.SPEED.MIN;\r\n        this.color = this.COLORS[Math.floor(Math.random() * this.COLORS.length)];\r\n        this.size = Math.random() * (this.SIZE.MAX - this.SIZE.MIN + 0.1) + this.SIZE.MIN;\r\n        this.spin = Math.random() * (this.SPIN.MAX - this.SPIN.MIN + 0.001) + this.SPIN.MIN;\r\n\r\n        // this.band = Math.floor(Math.random(NUM_BANDS));\r\n        this.band = Math.floor(Math.random() * (this.NUM_BANDS - 0 + 0) + 0);\r\n        // if (random() < 0.5) {\r\n        if (Math.random() < 0.5) {\r\n            this.spin = -this.spin;\r\n        }\r\n        this.smoothedScale = 0.0;\r\n        this.smoothedAlpha = 0.0;\r\n        this.decayScale = 0.0;\r\n        this.decayAlpha = 0.0;\r\n        // this.rotation = random(TWO_PI);\r\n        this.rotation = Math.random();\r\n        return this.energy = 0.0;\r\n    }\r\n\r\n    public move() {\r\n        this.rotation += this.spin;\r\n        return this.y -= this.speed * this.level;\r\n    }\r\n\r\n    public draw(ctx) {\r\n        let salpha;\r\n        let spower;\r\n        let sscale;\r\n\r\n        spower = Math.exp(this.energy);\r\n        sscale = this.scale * spower;\r\n        salpha = this.alpha * this.energy * 1.5;\r\n        this.decayScale = Math.max(this.decayScale, sscale);\r\n        this.decayAlpha = Math.max(this.decayAlpha, salpha);\r\n        this.smoothedScale += (this.decayScale - this.smoothedScale) * 0.3;\r\n        this.smoothedAlpha += (this.decayAlpha - this.smoothedAlpha) * 0.3;\r\n        this.decayScale *= 0.985;\r\n        this.decayAlpha *= 0.975;\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.translate(this.x + Math.cos(this.rotation * this.speed) * 250, this.y);\r\n        ctx.rotate(this.rotation);\r\n        ctx.scale(this.smoothedScale * this.level, this.smoothedScale * this.level);\r\n        ctx.moveTo(this.size * 0.5, 0);\r\n        ctx.lineTo(this.size * -0.5, 0);\r\n        ctx.lineWidth = 1;\r\n        ctx.lineCap = 'round';\r\n        ctx.globalAlpha = this.smoothedAlpha / this.level;\r\n        ctx.strokeStyle = this.color;\r\n        ctx.stroke();\r\n        return ctx.restore();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/lyrics/particles.ts","module.exports = \":host {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: column;\\r\\n          flex-direction: column;\\r\\n  -webkit-box-flex: 1;\\r\\n      -ms-flex-positive: 1;\\r\\n          flex-grow: 1;\\r\\n}\\r\\n\\r\\n.player {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: column;\\r\\n          flex-direction: column;\\r\\n  -webkit-box-flex: 1;\\r\\n      -ms-flex-positive: 1;\\r\\n          flex-grow: 1;\\r\\n}\\r\\n\\r\\n.player-info {\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: horizontal;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: row;\\r\\n          flex-direction: row;\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n  -webkit-box-pack: justify;\\r\\n      -ms-flex-pack: justify;\\r\\n          justify-content: space-between;\\r\\n}\\r\\n\\r\\n.player-info-song-title {\\r\\n  color: #444444;\\r\\n  font-size: 1.1rem;\\r\\n  font-weight: 700;\\r\\n  margin-bottom: .5rem;\\r\\n}\\r\\n\\r\\n.player-info-song-artist {\\r\\n  color: #5AA8CD;\\r\\n  font-size: 1rem;\\r\\n}\\r\\n\\r\\n.player-screen-lyrics {\\r\\n  background-color: #474747;\\r\\n  min-height: 200px;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n  -webkit-box-pack: center;\\r\\n      -ms-flex-pack: center;\\r\\n          justify-content: center;\\r\\n  font-size: 20px;\\r\\n}\\r\\n\\r\\n.player-screen-controls {\\r\\n  background-color: black;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: column;\\r\\n          flex-direction: column;\\r\\n  -webkit-box-flex: 5;\\r\\n      -ms-flex-positive: 5;\\r\\n          flex-grow: 5;\\r\\n  -webkit-box-pack: center;\\r\\n      -ms-flex-pack: center;\\r\\n          justify-content: center;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/player.component.css\n// module id = ./src/app/player/player.component.css\n// module chunks = main","module.exports = \"<div class=\\\"player\\\">\\r\\n\\r\\n  <div class=\\\"player-info p2\\\">\\r\\n    <div class=\\\"player-info-song\\\">\\r\\n      <p class=\\\"player-info-song-title\\\">{{ currentSong.title }}</p>\\r\\n      <p class=\\\"player-info-song-artist\\\">{{ currentSong.artist }}</p>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"player-info-points\\\">\\r\\n      <app-player-points [points]=\\\"points\\\"></app-player-points>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"player-screen\\\">\\r\\n    <div class=\\\"player-screen-lyrics p1\\\">\\r\\n      <app-player-lyrics [src]=\\\"currentSong.lyrics\\\" [delay]=\\\"currentSong.lyricDelay\\\" [onCurrentTimeUpdate]=\\\"onLyricsTimeUpdate\\\"\\r\\n        (onNewLine)=\\\"handleLyricsNewLine($event)\\\"></app-player-lyrics>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"player-screen-controls p2\\\">\\r\\n      <app-player-audio [src]=\\\"currentSong.audio\\\" (onCurrentTimeUpdate)=\\\"handleAudioTimeUpdate($event)\\\" (onPlayPause)=\\\"handleAudioPlayPause($event)\\\"></app-player-audio>\\r\\n      <app-player-speech [playPause]=\\\"onSpeechStart\\\" (onSpeechFound)=\\\"handleSpeechFound($event)\\\"></app-player-speech>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/player.component.html\n// module id = ./src/app/player/player.component.html\n// module chunks = main","import { Component, EventEmitter, Input, OnChanges, OnDestroy, Output, SimpleChanges } from '@angular/core';\r\nimport { PlayerService } from './player.service';\r\nimport { Song } from '../songs/song.interface';\r\n\r\n@Component({\r\n  selector: 'app-player',\r\n  templateUrl: './player.component.html',\r\n  styleUrls: ['./player.component.css']\r\n})\r\nexport class PlayerComponent implements OnChanges {\r\n  @Input() currentSong: Song;\r\n  public points: number = 0;\r\n  public lines: string[] = [];\r\n  public onLyricsTimeUpdate = new EventEmitter<number>();\r\n  public onSpeechStart = new EventEmitter<boolean>();\r\n  private readonly POINTS_MULTIPLIER = 5;\r\n\r\n  constructor(private playerService: PlayerService) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.playerService.hasPropertyChanged(changes.currentSong)) {\r\n      this.resetPlayer();\r\n    }\r\n  }\r\n\r\n  public resetPlayer() {\r\n    console.log(`${PlayerComponent.name}::resetPlayer`);\r\n\r\n    this.points = 0;\r\n    this.lines = [];\r\n  }\r\n\r\n  public handleAudioPlayPause(isPlaying: boolean) {\r\n    console.log(`${PlayerComponent.name}::handleAudioPlayPause`);\r\n    this.onSpeechStart.emit(isPlaying);\r\n  }\r\n\r\n  public handleAudioTimeUpdate = (time: number) => {\r\n    this.onLyricsTimeUpdate.emit(time);\r\n  }\r\n\r\n  public handleLyricsNewLine = (current) => {\r\n    const newLines = [current.line].concat(this.lines).slice(0, 5);\r\n\r\n    const count = current.line.split(' ').length;\r\n    console.log(`${PlayerComponent.name}::handleLyricsNewLine cantidad %o`, count);\r\n    // Keep up to last 5 lines in array\r\n    this.lines = newLines;\r\n  }\r\n\r\n  public handleSpeechFound(text: string) {\r\n    console.log(`${PlayerComponent.name}::handleSpeechFound [speech match]: %o`, text);\r\n\r\n    const matches = this.playerService.countMatches(text, this.lines);\r\n    this.points += (matches * this.POINTS_MULTIPLIER);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/player.component.ts","import { SimpleChange } from '@angular/core';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, Scheduler, Subject, Subscription } from 'rxjs';\r\nimport { scan, map, withLatestFrom, distinctUntilChanged } from 'rxjs/operators';\r\nconst { Metaphone, SoundEx } = window['natural'];\r\n\r\n@Injectable()\r\nexport class PlayerService {\r\n\r\n  /**\r\n   * Alpha & space character regex\r\n   * @private\r\n   * @readonly\r\n   * @type {RegExp}\r\n   * @memberOf PlayerService\r\n   */\r\n  private readonly ALPHA_REGEX: RegExp = /[^a-z\\s]/gi;\r\n\r\n  /**\r\n   * Double spaces regex\r\n   * @private\r\n   * @type {RegExp}\r\n   * @memberOf PlayerService\r\n   */\r\n  private readonly DOUBLESPACES_REGEX: RegExp = /\\s\\s+/g;\r\n\r\n  /**\r\n   * Defines if whether or not a property has changed\r\n   * and that it is not during component's first load.\r\n   * @param {SimpleChange} change\r\n   * @returns {boolean}\r\n   * @memberOf PlayerService\r\n   */\r\n  public hasPropertyChanged(change: SimpleChange): boolean {\r\n    return !change.firstChange && change.previousValue !== change.currentValue;\r\n  }\r\n\r\n  /**\r\n   * Formats seconds into readable [hh:]?mm:ss format\r\n   * @param {number|string} secs\r\n   * @returns {string} Formatted string\r\n   * @memberOf PlayerService\r\n   */\r\n  public formatTime(secs: number | string): string {\r\n    const secsNum = parseInt(secs.toString(), 10);\r\n    const hours = Math.floor(secsNum / 3600) % 24;\r\n    const minutes = Math.floor(secsNum / 60) % 60;\r\n    const seconds = secsNum % 60;\r\n\r\n    return [hours, minutes, seconds]\r\n      .map((num) => (num < 10)\r\n        ? '0' + num\r\n        : num\r\n      )\r\n      .filter((num, i) => (\r\n        (num !== '00') || (i > 0))\r\n      )\r\n      .join(':');\r\n  }\r\n\r\n  /**\r\n   * Calculates number of word matches between speech and last 5 lines of lyrics\r\n   * @param {string} speech Spoken text\r\n   * @param {string[]} lines Last 5 lines of song lyrics\r\n   * @returns {number} Number of exact matches found\r\n   * @memberOf PlayerService\r\n   */\r\n  public countMatches(speech: string, lines: string[]): number {\r\n    let matches = 0;\r\n\r\n    const speechWordsList = speech\r\n      .trim()\r\n      .toLowerCase()\r\n      .replace(this.ALPHA_REGEX, '')\r\n      .replace(this.DOUBLESPACES_REGEX, ' ')\r\n      .split(' ');\r\n\r\n    const linesWordsList = lines\r\n      .map((line) => line\r\n        .trim()\r\n        .toLowerCase()\r\n        .replace(this.ALPHA_REGEX, '')\r\n        .replace(this.DOUBLESPACES_REGEX, ' ')\r\n        .split(' ')\r\n      )\r\n      .reduce((a, b) => a.concat(b), []);\r\n\r\n    // Goes through each word in speech and tries to find a match in lyric lines\r\n    speechWordsList.forEach((wordFromSpeech) => {\r\n      const indexInLyrics = linesWordsList.findIndex(\r\n        (wordFromLyrics) => wordFromSpeech === wordFromLyrics\r\n          || Metaphone.compare(wordFromSpeech, wordFromLyrics)\r\n          || SoundEx.compare(wordFromSpeech, wordFromLyrics)\r\n      );\r\n\r\n      if (indexInLyrics >= 0) {\r\n        // console.log('match', wordFromSpeech, linesWordsList[indexInLyrics])\r\n        // remove word from list\r\n        linesWordsList.splice(indexInLyrics, 1);\r\n\r\n        // increase number of matches\r\n        matches++;\r\n      }\r\n    });\r\n\r\n    return matches;\r\n  }\r\n\r\n  public pointsAnimator(value$: Subject<number>) {\r\n    const tick$ = Observable.interval(0, Scheduler.animationFrame);\r\n    const lerpValue$ = tick$.pipe(\r\n      withLatestFrom(value$, (_, value) => value),\r\n      scan(\r\n        (prev, current) => prev + (current - prev) * .05,\r\n        0\r\n      ),\r\n      map((n) => Math.round(n)),\r\n      distinctUntilChanged()\r\n    );\r\n\r\n    return lerpValue$;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/player.service.ts","module.exports = \".pyro > .before, .pyro > .after {\\r\\n  position: absolute;\\r\\n  width: 5px;\\r\\n  height: 5px;\\r\\n  border-radius: 50%;\\r\\n  -webkit-box-shadow: 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff;\\r\\n          box-shadow: 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff;\\r\\n  -webkit-animation: 1s bang ease-out 2 backwards, 1s gravity ease-in 2 backwards, 5s position linear 2 backwards;\\r\\n          animation: 1s bang ease-out 2 backwards, 1s gravity ease-in 2 backwards, 5s position linear 2 backwards; }\\r\\n\\r\\n.pyro > .after {\\r\\n  -webkit-animation-delay: 500ms, 500ms, 500ms;\\r\\n          animation-delay: 500ms, 500ms, 500ms;\\r\\n  -webkit-animation-duration: 500ms, 500ms, 2500ms;\\r\\n          animation-duration: 500ms, 500ms, 2500ms; }\\r\\n\\r\\n@-webkit-keyframes bang {\\r\\n  to {\\r\\n    -webkit-box-shadow: -30px -33.66667px #fbff00, -14px -8.66667px #33ff00, 24px -48.66667px #dd00ff, 15px -7.66667px #ff001e, 25px -5.66667px #8c00ff, -32px -58.66667px #00ff1e, -4px -33.66667px #c800ff, -18px -15.66667px #9100ff, 19px -2.66667px #ff5e00;\\r\\n            box-shadow: -30px -33.66667px #fbff00, -14px -8.66667px #33ff00, 24px -48.66667px #dd00ff, 15px -7.66667px #ff001e, 25px -5.66667px #8c00ff, -32px -58.66667px #00ff1e, -4px -33.66667px #c800ff, -18px -15.66667px #9100ff, 19px -2.66667px #ff5e00; } }\\r\\n\\r\\n@keyframes bang {\\r\\n  to {\\r\\n    -webkit-box-shadow: -30px -33.66667px #fbff00, -14px -8.66667px #33ff00, 24px -48.66667px #dd00ff, 15px -7.66667px #ff001e, 25px -5.66667px #8c00ff, -32px -58.66667px #00ff1e, -4px -33.66667px #c800ff, -18px -15.66667px #9100ff, 19px -2.66667px #ff5e00;\\r\\n            box-shadow: -30px -33.66667px #fbff00, -14px -8.66667px #33ff00, 24px -48.66667px #dd00ff, 15px -7.66667px #ff001e, 25px -5.66667px #8c00ff, -32px -58.66667px #00ff1e, -4px -33.66667px #c800ff, -18px -15.66667px #9100ff, 19px -2.66667px #ff5e00; } }\\r\\n\\r\\n@-webkit-keyframes gravity {\\r\\n  to {\\r\\n    -webkit-transform: translateY(10px);\\r\\n            transform: translateY(10px);\\r\\n    opacity: 0; } }\\r\\n\\r\\n@keyframes gravity {\\r\\n  to {\\r\\n    -webkit-transform: translateY(10px);\\r\\n            transform: translateY(10px);\\r\\n    opacity: 0; } }\\r\\n\\r\\n@-webkit-keyframes position {\\r\\n  0%, 19.9% {\\r\\n    margin-top: 10%;\\r\\n    margin-left: 40%; }\\r\\n  20%, 39.9% {\\r\\n    margin-top: 40%;\\r\\n    margin-left: 30%; }\\r\\n  40%, 59.9% {\\r\\n    margin-top: 20%;\\r\\n    margin-left: 70%; }\\r\\n  60%, 79.9% {\\r\\n    margin-top: 30%;\\r\\n    margin-left: 20%; }\\r\\n  80%, 99.9% {\\r\\n    margin-top: 30%;\\r\\n    margin-left: 20%; } }\\r\\n\\r\\n@keyframes position {\\r\\n  0%, 19.9% {\\r\\n    margin-top: 10%;\\r\\n    margin-left: 40%; }\\r\\n  20%, 39.9% {\\r\\n    margin-top: 40%;\\r\\n    margin-left: 30%; }\\r\\n  40%, 59.9% {\\r\\n    margin-top: 20%;\\r\\n    margin-left: 70%; }\\r\\n  60%, 79.9% {\\r\\n    margin-top: 30%;\\r\\n    margin-left: 20%; }\\r\\n  80%, 99.9% {\\r\\n    margin-top: 30%;\\r\\n    margin-left: 20%; } }\\r\\n\\r\\n.points {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.points-score {\\r\\n  color: #c46bed;\\r\\n  font-weight: 700;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n      -ms-flex-direction: column;\\r\\n          flex-direction: column;\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n}\\r\\n\\r\\n.points-score small {\\r\\n  font-size: .75rem;\\r\\n}\\r\\n\\r\\n.points-score strong {\\r\\n  font-size: 2rem;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/points/points.component.css\n// module id = ./src/app/player/points/points.component.css\n// module chunks = main","module.exports = \"<div class=\\\"points\\\">\\r\\n  <div class=\\\"points-score\\\">\\r\\n    <small>Points:</small>\\r\\n    <strong>{{ points }}</strong>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"pyro\\\" *ngIf=\\\"hasFireworks\\\">\\r\\n    <div class=\\\"before\\\"></div>\\r\\n    <div class=\\\"after\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/points/points.component.html\n// module id = ./src/app/player/points/points.component.html\n// module chunks = main","import { Component, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { PlayerService } from '../player.service';\r\n\r\n@Component({\r\n  selector: 'app-player-points',\r\n  templateUrl: './points.component.html',\r\n  styleUrls: ['./points.component.css']\r\n})\r\nexport class PointsComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('points') playerPoints: number = 0;\r\n  public points = 0;\r\n  public hasFireworks = false;\r\n  private value$: Subject<number> = new Subject();\r\n  private lerpSubscription: Subscription;\r\n  private timeout;\r\n\r\n  constructor(private playerService: PlayerService) { }\r\n\r\n  ngOnInit() {\r\n    this.lerpSubscription = this.playerService\r\n      .pointsAnimator(this.value$)\r\n      .subscribe((points) => this.points = points);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { playerPoints } = changes;\r\n\r\n    if (this.playerService.hasPropertyChanged(playerPoints) && playerPoints.currentValue > 0) {\r\n      this.value$.next(playerPoints.currentValue);\r\n\r\n      this.hasFireworks = true;\r\n\r\n      this.timeout = setTimeout(\r\n        () => this.hasFireworks = false,\r\n        4000,\r\n      );\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.lerpSubscription.unsubscribe();\r\n    clearTimeout(this.timeout);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/points/points.component.ts","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class RecognitionService {\r\n\r\n  private static recognition: SpeechRecognition;\r\n\r\n  constructor() { }\r\n\r\n  getRecognition(): SpeechRecognition {\r\n    if (RecognitionService.recognition) {\r\n      return RecognitionService.recognition;\r\n    }\r\n\r\n    const recognition = new (window['SpeechRecognition']\r\n      || window['webkitSpeechRecognition']\r\n      || window['mozSpeechRecognition']\r\n      || window['msSpeechRecognition'])() as SpeechRecognition;\r\n    recognition.continuous = true;\r\n    recognition.interimResults = true;\r\n\r\n    return recognition;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/speech/recognition.service.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/speech/speech.component.css\n// module id = ./src/app/player/speech/speech.component.css\n// module chunks = main","module.exports = \"<!-- <button (click)=\\\"handleToggle()\\\">{{ (isRecording) ?  \\\"Stop\\\" : \\\"Start\\\" }}</button> -->\\r\\n<!--\\r\\n<p>\\r\\n  Recognized: {{ onSpeechFound | async  }}\\r\\n</p> -->\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/player/speech/speech.component.html\n// module id = ./src/app/player/speech/speech.component.html\n// module chunks = main","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { fromEvent } from 'rxjs/observable/fromEvent';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/filter';\r\nimport 'rxjs/add/operator/distinct';\r\nimport 'rxjs/add/operator/timeout';\r\n\r\nimport { RecognitionService } from './recognition.service';\r\n\r\n@Component({\r\n  selector: 'app-player-speech',\r\n  templateUrl: './speech.component.html',\r\n  styleUrls: ['./speech.component.css']\r\n})\r\nexport class SpeechComponent implements OnInit, OnDestroy {\r\n\r\n  @Input() playPause: EventEmitter<boolean>;\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onSpeechFound = new EventEmitter<string>();\r\n  private subscriptions: Subscription[] = [];\r\n  private recognition: SpeechRecognition;\r\n  public isAutoRestarting: boolean = false;\r\n  public isRecording: boolean = false;\r\n\r\n  constructor(private recognitionService: RecognitionService) { }\r\n\r\n  ngOnInit() {\r\n    this.recognition = this.recognitionService.getRecognition();\r\n    const result$ = fromEvent(this.recognition, 'result');\r\n    const start$ = fromEvent(this.recognition, 'start');\r\n    const stop$ = fromEvent(this.recognition, 'stop');\r\n    const end$ = fromEvent(this.recognition, 'end');\r\n\r\n    const onStart = start$.subscribe(() => {\r\n      // console.log('start')\r\n      this.isRecording = true;\r\n\r\n      result$.timeout(5000).subscribe(null, () => {\r\n        if (this.isRecording) {\r\n          // console.log('timeout, restarting...')\r\n          this.isAutoRestarting = true;\r\n          this.recognition.stop();\r\n        }\r\n      });\r\n    });\r\n\r\n    const onEnd = Observable.merge(stop$, end$).subscribe(() => {\r\n      // console.log('stop or end?')\r\n      if (this.isAutoRestarting) {\r\n        this.isAutoRestarting = false;\r\n        this.recognition.start();\r\n      } else {\r\n        this.isRecording = false;\r\n      }\r\n    });\r\n\r\n    const onResult = result$\r\n      .map((e: SpeechRecognitionEvent) => e.results[e.results.length - 1])\r\n      .filter((result: SpeechRecognitionResult) => result.isFinal)\r\n      .map((result: SpeechRecognitionResult) => result[0].transcript)\r\n      .distinct()\r\n      .subscribe((text: string) => {\r\n        this.onSpeechFound.emit(text);\r\n      });\r\n\r\n    const onPlay = this.playPause\r\n      .subscribe((isPlaying) => {\r\n        if (isPlaying && !this.isRecording) {\r\n          this.recognition.start();\r\n        } else if (!isPlaying && this.isRecording) {\r\n          this.recognition.stop();\r\n        }\r\n      });\r\n\r\n    // So we can unsubscribe later\r\n    this.subscriptions = this.subscriptions.concat([onStart, onEnd, onResult, onPlay]);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.recognition.stop();\r\n    this.subscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\n\r\n  public handleToggle() {\r\n    console.log(`${SpeechComponent.name}::handleToggle`);\r\n\r\n    if (!this.isRecording) {\r\n      this.recognition.start();\r\n    } else {\r\n      this.recognition.stop();\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/player/speech/speech.component.ts","module.exports = \".songlist {\\r\\n  max-width: 400px;\\r\\n  margin: auto;\\r\\n}\\r\\n\\r\\n.songlist-item {\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\n.songlist-item-anchor {\\r\\n  -webkit-box-align: center;\\r\\n      -ms-flex-align: center;\\r\\n          align-items: center;\\r\\n  border-radius: .25rem;\\r\\n  border: 2px solid transparent;\\r\\n  color: #444;\\r\\n  display: -webkit-box;\\r\\n  display: -ms-flexbox;\\r\\n  display: flex;\\r\\n  font-size: 16px;\\r\\n  padding: 1rem;\\r\\n  text-decoration: none;\\r\\n  -webkit-transition: all 250ms ease;\\r\\n  transition: all 250ms ease;\\r\\n}\\r\\n\\r\\n.songlist-item--selected .songlist-item-anchor {\\r\\n  border-color: #D76AFF;\\r\\n}\\r\\n\\r\\n.songlist-item-anchor:hover {\\r\\n  border-color: #F3E0FA;\\r\\n}\\r\\n\\r\\n.songlist-item-avatar {\\r\\n  height: 70px;\\r\\n  width: 70px;\\r\\n  background-color: #c46bed;\\r\\n  background-size: 100%;\\r\\n  margin-right: 1rem;\\r\\n  border-radius: .25rem;\\r\\n}\\r\\n\\r\\n.songlist-item:nth-child(1) .songlist-item-avatar {\\r\\n  background-image: url('artist-1.62069018d9d933b5b233.jpg');\\r\\n}\\r\\n\\r\\n.songlist-item:nth-child(2) .songlist-item-avatar {\\r\\n  background-image: url('artist-2.24dc91af996df266ddae.jpg');\\r\\n}\\r\\n\\r\\n.songlist-item:nth-child(3) .songlist-item-avatar {\\r\\n  background-image: url('nightcars.a43b986a18da3f536c6c.jpg');\\r\\n}\\r\\n\\r\\n.songlist-item:nth-child(4) .songlist-item-avatar {\\r\\n  background-image: url('queen.28ad54d617a634911f2d.png');\\r\\n}\\r\\n\\r\\n.songlist-item:nth-child(5) .songlist-item-avatar {\\r\\n  background-image: url('stromae.b3c475ca01b13cc511d0.jpg');\\r\\n}\\r\\n\\r\\n.songlist-item-details-title,\\r\\n.songlist-item-details-artist {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.songlist-item-details-artist {\\r\\n  color: #5AA8CD;\\r\\n  font-size: 14px;\\r\\n  margin-top: .75rem;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/song-selection/song-selection.component.css\n// module id = ./src/app/song-selection/song-selection.component.css\n// module chunks = main","module.exports = \"<ul class=\\\"songlist\\\">\\r\\n  <li class=\\\"songlist-item\\\" *ngFor=\\\"let song of songList\\\" [class.songlist-item--selected]=\\\"currentSong === song\\\">\\r\\n    <a href=\\\"\\\" (click)=\\\"handleChooseSong($event, song)\\\" class=\\\"songlist-item-anchor\\\">\\r\\n      <span class=\\\"songlist-item-avatar\\\"></span>\\r\\n      <span class=\\\"songlist-item-details\\\">\\r\\n        <span class=\\\"songlist-item-details-title\\\">{{ song.title }}</span>\\r\\n        <span class=\\\"songlist-item-details-artist\\\">{{ song.artist }}</span>\\r\\n      </span>\\r\\n    </a>\\r\\n  </li>\\r\\n</ul>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/song-selection/song-selection.component.html\n// module id = ./src/app/song-selection/song-selection.component.html\n// module chunks = main","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { Song } from '../songs/song.interface';\r\n\r\n@Component({\r\n  selector: 'app-song-selection',\r\n  templateUrl: './song-selection.component.html',\r\n  styleUrls: ['./song-selection.component.css']\r\n})\r\nexport class SongSelectionComponent implements OnInit {\r\n\r\n  @Input() songList: Song[];\r\n  @Input() currentSong: Song;\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onChooseSong = new EventEmitter<Song>();\r\n\r\n  constructor() {\r\n    console.log(`${SongSelectionComponent.name}::ctor`);\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public handleChooseSong($event, song: Song) {\r\n    console.log(`${SongSelectionComponent.name}::handleChooseSong song %o`, song);\r\n\r\n    $event.preventDefault();\r\n    this.onChooseSong.emit(song);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/song-selection/song-selection.component.ts","import { Injectable } from '@angular/core';\r\n\r\nimport { Song } from './song.interface';\r\n\r\n@Injectable()\r\nexport class SongsService {\r\n\r\n  constructor() { }\r\n\r\n  private readonly songList: Song[] = [\r\n    {\r\n      artist: 'Rick Astley',\r\n      title: 'Never Gonna Give You Up',\r\n      audio: 'assets/songs/never-gonna-give-you-up/never-gonna-give-you-up.mp3',\r\n      lyrics: 'assets/songs/never-gonna-give-you-up/never-gonna-give-you-up.lrc',\r\n      lyricDelay: 1,\r\n    },\r\n    {\r\n      artist: 'Journey',\r\n      title: 'Don\\'t Stop Believing',\r\n      audio: 'assets/songs/dont-stop-believing/dont-stop-believing.mp3',\r\n      lyrics: 'assets/songs/dont-stop-believing/dont-stop-believing.lrc',\r\n      lyricDelay: 1,\r\n    },\r\n    {\r\n      artist: 'Nightcars',\r\n      title: 'Face it',\r\n      audio: 'assets/songs/face-it/face-it.mp3',\r\n      lyrics: 'assets/songs/face-it/face-it.lrc',\r\n      lyricDelay: 0,\r\n    },\r\n    {\r\n      artist: 'Queen',\r\n      title: 'Bohemian Rhapsody ',\r\n      audio: 'assets/songs/bohemian-rhapsody/bohemian-rhapsody.mp3',\r\n      lyrics: 'assets/songs/bohemian-rhapsody/bohemian-rhapsody.lrc',\r\n      lyricDelay: 0,\r\n    },\r\n    {\r\n      artist: 'Stromae',\r\n      title: 'Carmen ',\r\n      audio: 'assets/songs/carmen/carmen.mp3',\r\n      lyrics: 'assets/songs/carmen/carmen.lrc',\r\n      lyricDelay: 0,\r\n    },\r\n  ];\r\n\r\n  getSongList() {\r\n    return this.songList;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/songs/songs.service.ts","export const environment = {\r\n  production: true\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":"webpack:///"}